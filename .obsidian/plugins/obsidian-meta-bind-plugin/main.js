"use strict";/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Ca=Object.create;var sr=Object.defineProperty;var xa=Object.getOwnPropertyDescriptor;var _a=Object.getOwnPropertyNames;var Sa=Object.getPrototypeOf,Ta=Object.prototype.hasOwnProperty;var gt=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),ka=(n,e)=>{for(var t in e)sr(n,t,{get:e[t],enumerable:!0})},Is=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _a(e))!Ta.call(n,i)&&i!==t&&sr(n,i,{get:()=>e[i],enumerable:!(r=xa(e,i))||r.enumerable});return n};var Cn=(n,e,t)=>(t=n!=null?Ca(Sa(n)):{},Is(e||!n||!n.__esModule?sr(t,"default",{value:n,enumerable:!0}):t,n)),Ma=n=>Is(sr({},"__esModule",{value:!0}),n);var ur=gt(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.OPDUtilsObjectTraversalError=qt.OPDUtilsParsingError=void 0;var si=class extends Error{constructor(e){super(e)}};qt.OPDUtilsParsingError=si;var ui=class extends Error{constructor(e){super(e)}};qt.OPDUtilsObjectTraversalError=ui});var xn=gt(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.validatePath=Ae.parsePath=Ae.traverseObjectByPath=Ae.traverseObjectToParent=Ae.traverseObject=void 0;var lt=ur();function Ia(n,e){let t=ai(n);return oi(t,e)}Ae.traverseObject=Ia;function Oa(n,e){var t;let r=ai(n);if(r[0]==="")throw new lt.OPDUtilsObjectTraversalError("can not traverse to parent on self reference");let i=r.slice(0,-1),s=(t=r.at(-1))!==null&&t!==void 0?t:"",u=oi(i,e);return{parent:{key:i,value:u},child:{key:s,value:u[s]}}}Ae.traverseObjectToParent=Oa;function oi(n,e){for(let t of n){if(t==="")return e;if(e===void 0)return;e=e[t]}return e}Ae.traverseObjectByPath=oi;function ai(n){return n=n.replace(/'/g,'"'),Os(n),n.split(".").map(e=>e.split("[").map(t=>(t.endsWith("]")&&(t=t.slice(0,-1)),t.startsWith('"')&&t.endsWith('"')&&(t=t.slice(1,-1)),t))).flat()}Ae.parsePath=ai;function Os(n){let e="0123456789",t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=!1,i=!1;for(let s=0;s<n.length;s++){let u=n[s],o=n[s+1];if(u==="."){if(s===0)throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${u}' at position ${s} in "${n}", path may not start with '.'`);if(!(t.includes(o)||o==="_"||o==="$"))throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${s+1} in "${n}", expected a letter, '_' or '$' to follow '.'`)}if(u==="[")if(e.includes(o)){i=!0;continue}else if(o==='"'){if(n[s+2]==='"')throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${n[s+2]}' at position ${s+2} in "${n}", the string between the quotation-marks may not be empty`);r=!0,s+=1;continue}else throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${s+1} in "${n}", expected number or '"' to follow a '['`);if(r&&u==='"')if(o==="]"){r=!1,s+=1;continue}else throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${o}' at position ${s+1} in "${n}", expected ']' to follow a '"'`);if(i&&u==="]"){i=!1;continue}if(r&&(u==="."||u==="]"||u==="["))throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${u}' at position ${s} in "${n}"`);if(i&&!e.includes(u))throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${u}' at position ${s} in "${n}", number expected inside of brackets`);if(!i&&!r&&u==="]")throw new lt.OPDUtilsObjectTraversalError(`Invalid character '${u}' at position ${s} in "${n}", expected '[' to proceed`)}}Ae.validatePath=Os});var Yo=gt(tt=>{"use strict";Object.defineProperty(tt,"__esModule",{value:!0});require("obsidian");var pt=class extends Error{},$i=class extends pt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},Ri=class extends pt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Pi=class extends pt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Mt=class extends pt{},Lr=class extends pt{constructor(e){super(`Invalid unit ${e}`)}},Se=class extends pt{},Xe=class extends pt{constructor(){super("Zone is an abstract class")}},x="numeric",ze="short",Oe="long",Vr={year:x,month:x,day:x},Yu={year:x,month:ze,day:x},gl={year:x,month:ze,day:x,weekday:ze},Zu={year:x,month:Oe,day:x},Ju={year:x,month:Oe,day:x,weekday:Oe},Ku={hour:x,minute:x},Qu={hour:x,minute:x,second:x},Xu={hour:x,minute:x,second:x,timeZoneName:ze},eo={hour:x,minute:x,second:x,timeZoneName:Oe},to={hour:x,minute:x,hourCycle:"h23"},no={hour:x,minute:x,second:x,hourCycle:"h23"},ro={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:ze},io={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:Oe},so={year:x,month:x,day:x,hour:x,minute:x},uo={year:x,month:x,day:x,hour:x,minute:x,second:x},oo={year:x,month:ze,day:x,hour:x,minute:x},ao={year:x,month:ze,day:x,hour:x,minute:x,second:x},Dl={year:x,month:ze,day:x,weekday:ze,hour:x,minute:x},lo={year:x,month:Oe,day:x,hour:x,minute:x,timeZoneName:ze},co={year:x,month:Oe,day:x,hour:x,minute:x,second:x,timeZoneName:ze},fo={year:x,month:Oe,day:x,weekday:Oe,hour:x,minute:x,timeZoneName:Oe},ho={year:x,month:Oe,day:x,weekday:Oe,hour:x,minute:x,second:x,timeZoneName:Oe},Ot=class{get type(){throw new Xe}get name(){throw new Xe}get ianaName(){return this.name}get isUniversal(){throw new Xe}offsetName(e,t){throw new Xe}formatOffset(e,t){throw new Xe}offset(e){throw new Xe}equals(e){throw new Xe}get isValid(){throw new Xe}},Mi=null,dn=class extends Ot{static get instance(){return Mi===null&&(Mi=new dn),Mi}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return po(e,t,r)}formatOffset(e,t){return Rn(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},Br={};function yl(n){return Br[n]||(Br[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Br[n]}var Fl={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function bl(n,e){let t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,u,o,a,c,m]=r;return[u,i,s,o,a,c,m]}function wl(n,e){let t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){let{type:s,value:u}=t[i],o=Fl[s];s==="era"?r[o]=u:P(o)||(r[o]=parseInt(u,10))}return r}var Mr={},Ge=class extends Ot{static create(e){return Mr[e]||(Mr[e]=new Ge(e)),Mr[e]}static resetCache(){Mr={},Br={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ge.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return po(e,t,r,this.name)}formatOffset(e,t){return Rn(this.offset(e),t)}offset(e){let t=new Date(e);if(isNaN(t))return NaN;let r=yl(this.name),[i,s,u,o,a,c,m]=r.formatToParts?wl(r,t):bl(r,t);o==="BC"&&(i=-Math.abs(i)+1);let g=is({year:i,month:s,day:u,hour:a===24?0:a,minute:c,second:m,millisecond:0}),h=+t,y=h%1e3;return h-=y>=0?y:1e3+y,(g-h)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},Fu={};function El(n,e={}){let t=JSON.stringify([n,e]),r=Fu[t];return r||(r=new Intl.ListFormat(n,e),Fu[t]=r),r}var ji={};function qi(n,e={}){let t=JSON.stringify([n,e]),r=ji[t];return r||(r=new Intl.DateTimeFormat(n,e),ji[t]=r),r}var Hi={};function vl(n,e={}){let t=JSON.stringify([n,e]),r=Hi[t];return r||(r=new Intl.NumberFormat(n,e),Hi[t]=r),r}var Wi={};function Cl(n,e={}){let{base:t,...r}=e,i=JSON.stringify([n,r]),s=Wi[i];return s||(s=new Intl.RelativeTimeFormat(n,e),Wi[i]=s),s}var Vn=null;function xl(){return Vn||(Vn=new Intl.DateTimeFormat().resolvedOptions().locale,Vn)}function _l(n){let e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));let t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=qi(n).resolvedOptions(),i=n}catch(o){let a=n.substring(0,t);r=qi(a).resolvedOptions(),i=a}let{numberingSystem:s,calendar:u}=r;return[i,s,u]}}function Sl(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function Tl(n){let e=[];for(let t=1;t<=12;t++){let r=k.utc(2016,t,1);e.push(n(r))}return e}function kl(n){let e=[];for(let t=1;t<=7;t++){let r=k.utc(2016,11,13+t);e.push(n(r))}return e}function Ir(n,e,t,r,i){let s=n.listingMode(t);return s==="error"?null:s==="en"?r(e):i(e)}function Ml(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}var Ui=class{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:s,...u}=r;if(!t||Object.keys(u).length>0){let o={useGrouping:!1,...r};r.padTo>0&&(o.minimumIntegerDigits=r.padTo),this.inf=vl(e,o)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):rs(e,3);return de(t,this.padTo)}}},zi=class{constructor(e,t,r){this.opts=r;let i;if(e.zone.isUniversal){let u=-1*(e.offset/60),o=u>=0?`Etc/GMT+${u}`:`Etc/GMT${u}`;e.offset!==0&&Ge.create(o).valid?(i=o,this.dt=e):(i="UTC",r.timeZoneName?this.dt=e:this.dt=e.offset===0?e:k.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,i=e.zone.name);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=qi(t,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},Gi=class{constructor(e,t,r){this.opts={style:"long",...r},!t&&mo()&&(this.rtf=Cl(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):zl(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},Z=class{static fromOpts(e){return Z.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,r,i=!1){let s=e||ie.defaultLocale,u=s||(i?"en-US":xl()),o=t||ie.defaultNumberingSystem,a=r||ie.defaultOutputCalendar;return new Z(u,o,a,s)}static resetCache(){Vn=null,ji={},Hi={},Wi={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:r}={}){return Z.create(e,t,r)}constructor(e,t,r,i){let[s,u,o]=_l(e);this.locale=s,this.numberingSystem=t||u||null,this.outputCalendar=r||o||null,this.intl=Sl(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Ml(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Z.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1,r=!0){return Ir(this,e,r,yo,()=>{let i=t?{month:e,day:"numeric"}:{month:e},s=t?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=Tl(u=>this.extract(u,i,"month"))),this.monthsCache[s][e]})}weekdays(e,t=!1,r=!0){return Ir(this,e,r,wo,()=>{let i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=t?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=kl(u=>this.extract(u,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return Ir(this,void 0,e,()=>Eo,()=>{if(!this.meridiemCache){let t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[k.utc(2016,11,13,9),k.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(e,t=!0){return Ir(this,e,t,vo,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[k.utc(-40,1,1),k.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[e]})}extract(e,t,r){let i=this.dtFormatter(e,t),s=i.formatToParts(),u=s.find(o=>o.type.toLowerCase()===r);return u?u.value:null}numberFormatter(e={}){return new Ui(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new zi(e,this.intl,t)}relFormatter(e={}){return new Gi(this.intl,this.isEnglish(),e)}listFormatter(e={}){return El(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},Ii=null,we=class extends Ot{static get utcInstance(){return Ii===null&&(Ii=new we(0)),Ii}static instance(e){return e===0?we.utcInstance:new we(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new we(Wr(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Rn(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Rn(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Rn(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Yi=class extends Ot{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function bt(n,e){if(P(n)||n===null)return e;if(n instanceof Ot)return n;if(Il(n)){let t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?dn.instance:t==="utc"||t==="gmt"?we.utcInstance:we.parseSpecifier(t)||Ge.create(n)}else return It(n)?we.instance(n):typeof n=="object"&&n.offset&&typeof n.offset=="number"?n:new Yi(n)}var bu=()=>Date.now(),wu="system",Eu=null,vu=null,Cu=null,xu=60,_u,ie=class{static get now(){return bu}static set now(e){bu=e}static set defaultZone(e){wu=e}static get defaultZone(){return bt(wu,dn.instance)}static get defaultLocale(){return Eu}static set defaultLocale(e){Eu=e}static get defaultNumberingSystem(){return vu}static set defaultNumberingSystem(e){vu=e}static get defaultOutputCalendar(){return Cu}static set defaultOutputCalendar(e){Cu=e}static get twoDigitCutoffYear(){return xu}static set twoDigitCutoffYear(e){xu=e%100}static get throwOnInvalid(){return _u}static set throwOnInvalid(e){_u=e}static resetCaches(){Z.resetCache(),Ge.resetCache()}};function P(n){return typeof n=="undefined"}function It(n){return typeof n=="number"}function Hr(n){return typeof n=="number"&&n%1===0}function Il(n){return typeof n=="string"}function Ol(n){return Object.prototype.toString.call(n)==="[object Date]"}function mo(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(n){return!1}}function Al(n){return Array.isArray(n)?n:[n]}function Su(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{let s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function Bl(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function fn(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function mt(n,e,t){return Hr(n)&&n>=e&&n<=t}function Nl(n,e){return n-e*Math.floor(n/e)}function de(n,e=2){let t=n<0,r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Ft(n){if(!(P(n)||n===null||n===""))return parseInt(n,10)}function Tt(n){if(!(P(n)||n===null||n===""))return parseFloat(n)}function ns(n){if(!(P(n)||n===null||n==="")){let e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function rs(n,e,t=!1){let r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function Wn(n){return n%4===0&&(n%100!==0||n%400===0)}function $n(n){return Wn(n)?366:365}function $r(n,e){let t=Nl(e-1,12)+1,r=n+(e-t)/12;return t===2?Wn(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function is(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function Rr(n){let e=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,t=n-1,r=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||r===3?53:52}function Zi(n){return n>99?n:n>ie.twoDigitCutoffYear?1900+n:2e3+n}function po(n,e,t,r=null){let i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);let u={timeZoneName:e,...s},o=new Intl.DateTimeFormat(t,u).formatToParts(i).find(a=>a.type.toLowerCase()==="timezonename");return o?o.value:null}function Wr(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);let r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function go(n){let e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new Se(`Invalid unit value ${n}`);return e}function Pr(n,e){let t={};for(let r in n)if(fn(n,r)){let i=n[r];if(i==null)continue;t[e(r)]=go(i)}return t}function Rn(n,e){let t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${de(t,2)}:${de(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${de(t,2)}${de(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Ur(n){return Bl(n,["hour","minute","second","millisecond"])}var Ll=["January","February","March","April","May","June","July","August","September","October","November","December"],Do=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Vl=["J","F","M","A","M","J","J","A","S","O","N","D"];function yo(n){switch(n){case"narrow":return[...Vl];case"short":return[...Do];case"long":return[...Ll];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Fo=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],bo=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],$l=["M","T","W","T","F","S","S"];function wo(n){switch(n){case"narrow":return[...$l];case"short":return[...bo];case"long":return[...Fo];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Eo=["AM","PM"],Rl=["Before Christ","Anno Domini"],Pl=["BC","AD"],jl=["B","A"];function vo(n){switch(n){case"narrow":return[...jl];case"short":return[...Pl];case"long":return[...Rl];default:return null}}function ql(n){return Eo[n.hour<12?0:1]}function Hl(n,e){return wo(e)[n.weekday-1]}function Wl(n,e){return yo(e)[n.month-1]}function Ul(n,e){return vo(e)[n.year<0?0:1]}function zl(n,e,t="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){let p=n==="days";switch(e){case 1:return p?"tomorrow":`next ${i[n][0]}`;case-1:return p?"yesterday":`last ${i[n][0]}`;case 0:return p?"today":`this ${i[n][0]}`}}let u=Object.is(e,-0)||e<0,o=Math.abs(e),a=o===1,c=i[n],m=r?a?c[1]:c[2]||c[1]:a?i[n][0]:n;return u?`${o} ${m} ago`:`in ${o} ${m}`}function Tu(n,e){let t="";for(let r of n)r.literal?t+=r.val:t+=e(r.val);return t}var Gl={D:Vr,DD:Yu,DDD:Zu,DDDD:Ju,t:Ku,tt:Qu,ttt:Xu,tttt:eo,T:to,TT:no,TTT:ro,TTTT:io,f:so,ff:oo,fff:lo,ffff:fo,F:uo,FF:ao,FFF:co,FFFF:ho},ye=class{static create(e,t={}){return new ye(e,t)}static parseFormat(e){let t=null,r="",i=!1,s=[];for(let u=0;u<e.length;u++){let o=e.charAt(u);o==="'"?(r.length>0&&s.push({literal:i,val:r}),t=null,r="",i=!i):i||o===t?r+=o:(r.length>0&&s.push({literal:!1,val:r}),r=o,t=o)}return r.length>0&&s.push({literal:i,val:r}),s}static macroTokenToFormatOpts(e){return Gl[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTime(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).format()}formatDateTimeParts(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).formatToParts()}formatInterval(e,t={}){return this.loc.dtFormatter(e.start,{...this.opts,...t}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t}).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return de(e,t);let r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(h,y)=>this.loc.extract(e,h,y),u=h=>e.isOffsetFixed&&e.offset===0&&h.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,h.format):"",o=()=>r?ql(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(h,y)=>r?Wl(e,h):s(y?{month:h}:{month:h,day:"numeric"},"month"),c=(h,y)=>r?Hl(e,h):s(y?{weekday:h}:{weekday:h,month:"long",day:"numeric"},"weekday"),m=h=>{let y=ye.macroTokenToFormatOpts(h);return y?this.formatWithSystemDefault(e,y):h},p=h=>r?Ul(e,h):s({era:h},"era"),g=h=>{switch(h){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return u({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return u({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return u({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return m(h)}};return Tu(ye.parseFormat(t),g)}formatDurationFromString(e,t){let r=a=>{switch(a[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=a=>c=>{let m=r(c);return m?this.num(a.get(m),c.length):c},s=ye.parseFormat(t),u=s.reduce((a,{literal:c,val:m})=>c?a:a.concat(m),[]),o=e.shiftTo(...u.map(r).filter(a=>a));return Tu(s,i(o))}},Ie=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},Co=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function hn(...n){let e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function mn(...n){return e=>n.reduce(([t,r,i],s)=>{let[u,o,a]=s(e,i);return[{...t,...u},o||r,a]},[{},null,1]).slice(0,2)}function pn(n,...e){if(n==null)return[null,null];for(let[t,r]of e){let i=t.exec(n);if(i)return r(i)}return[null,null]}function xo(...n){return(e,t)=>{let r={},i;for(i=0;i<n.length;i++)r[n[i]]=Ft(e[t+i]);return[r,null,t+i]}}var _o=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Yl=`(?:${_o.source}?(?:\\[(${Co.source})\\])?)?`,ss=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,So=RegExp(`${ss.source}${Yl}`),us=RegExp(`(?:T${So.source})?`),Zl=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Jl=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Kl=/(\d{4})-?(\d{3})/,Ql=xo("weekYear","weekNumber","weekDay"),Xl=xo("year","ordinal"),ec=/(\d{4})-(\d\d)-(\d\d)/,To=RegExp(`${ss.source} ?(?:${_o.source}|(${Co.source}))?`),tc=RegExp(`(?: ${To.source})?`);function cn(n,e,t){let r=n[e];return P(r)?t:Ft(r)}function nc(n,e){return[{year:cn(n,e),month:cn(n,e+1,1),day:cn(n,e+2,1)},null,e+3]}function gn(n,e){return[{hours:cn(n,e,0),minutes:cn(n,e+1,0),seconds:cn(n,e+2,0),milliseconds:ns(n[e+3])},null,e+4]}function Un(n,e){let t=!n[e]&&!n[e+1],r=Wr(n[e+1],n[e+2]),i=t?null:we.instance(r);return[{},i,e+3]}function zn(n,e){let t=n[e]?Ge.create(n[e]):null;return[{},t,e+1]}var rc=RegExp(`^T?${ss.source}$`),ic=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function sc(n){let[e,t,r,i,s,u,o,a,c]=n,m=e[0]==="-",p=a&&a[0]==="-",g=(h,y=!1)=>h!==void 0&&(y||h&&m)?-h:h;return[{years:g(Tt(t)),months:g(Tt(r)),weeks:g(Tt(i)),days:g(Tt(s)),hours:g(Tt(u)),minutes:g(Tt(o)),seconds:g(Tt(a),a==="-0"),milliseconds:g(ns(c),p)}]}var uc={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function os(n,e,t,r,i,s,u){let o={year:e.length===2?Zi(Ft(e)):Ft(e),month:Do.indexOf(t)+1,day:Ft(r),hour:Ft(i),minute:Ft(s)};return u&&(o.second=Ft(u)),n&&(o.weekday=n.length>3?Fo.indexOf(n)+1:bo.indexOf(n)+1),o}var oc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function ac(n){let[,e,t,r,i,s,u,o,a,c,m,p]=n,g=os(e,i,r,t,s,u,o),h;return a?h=uc[a]:c?h=0:h=Wr(m,p),[g,new we(h)]}function lc(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var cc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,dc=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,fc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ku(n){let[,e,t,r,i,s,u,o]=n;return[os(e,i,r,t,s,u,o),we.utcInstance]}function hc(n){let[,e,t,r,i,s,u,o]=n;return[os(e,o,t,r,i,s,u),we.utcInstance]}var mc=hn(Zl,us),pc=hn(Jl,us),gc=hn(Kl,us),Dc=hn(So),ko=mn(nc,gn,Un,zn),yc=mn(Ql,gn,Un,zn),Fc=mn(Xl,gn,Un,zn),bc=mn(gn,Un,zn);function wc(n){return pn(n,[mc,ko],[pc,yc],[gc,Fc],[Dc,bc])}function Ec(n){return pn(lc(n),[oc,ac])}function vc(n){return pn(n,[cc,ku],[dc,ku],[fc,hc])}function Cc(n){return pn(n,[ic,sc])}var xc=mn(gn);function _c(n){return pn(n,[rc,xc])}var Sc=hn(ec,tc),Tc=hn(To),kc=mn(gn,Un,zn);function Mc(n){return pn(n,[Sc,ko],[Tc,kc])}var Ic="Invalid Duration",Mo={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Oc={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Mo},Ne=146097/400,on=146097/4800,Ac={years:{quarters:4,months:12,weeks:Ne/7,days:Ne,hours:Ne*24,minutes:Ne*24*60,seconds:Ne*24*60*60,milliseconds:Ne*24*60*60*1e3},quarters:{months:3,weeks:Ne/28,days:Ne/4,hours:Ne*24/4,minutes:Ne*24*60/4,seconds:Ne*24*60*60/4,milliseconds:Ne*24*60*60*1e3/4},months:{weeks:on/7,days:on,hours:on*24,minutes:on*24*60,seconds:on*24*60*60,milliseconds:on*24*60*60*1e3},...Mo},kt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Bc=kt.slice(0).reverse();function yt(n,e,t=!1){let r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new S(r)}function Nc(n){return n<0?Math.floor(n):Math.ceil(n)}function Io(n,e,t,r,i){let s=n[i][t],u=e[t]/s,o=Math.sign(u)===Math.sign(r[i]),a=!o&&r[i]!==0&&Math.abs(u)<=1?Nc(u):Math.trunc(u);r[i]+=a,e[t]-=a*s}function Lc(n,e){Bc.reduce((t,r)=>P(e[r])?t:(t&&Io(n,e,t,e,r),r),null)}function Vc(n){let e={};for(let[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}var S=class{constructor(e){let t=e.conversionAccuracy==="longterm"||!1,r=t?Ac:Oc;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||Z.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return S.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Se(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new S({values:Pr(e,S.normalizeUnit),loc:Z.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(It(e))return S.fromMillis(e);if(S.isDuration(e))return e;if(typeof e=="object")return S.fromObject(e);throw new Se(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[r]=Cc(e);return r?S.fromObject(r,t):S.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[r]=_c(e);return r?S.fromObject(r,t):S.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Se("need to specify a reason the Duration is invalid");let r=e instanceof Ie?e:new Ie(e,t);if(ie.throwOnInvalid)throw new Pi(r);return new S({invalid:r})}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Lr(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?ye.create(this.loc,r).formatDurationFromString(this,e):Ic}toHuman(e={}){let t=kt.map(r=>{let i=this.values[r];return P(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=rs(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let r=this.shiftTo("hours","minutes","seconds","milliseconds"),i=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(i+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(i+=".SSS"));let s=r.toFormat(i);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=S.fromDurationLike(e),r={};for(let i of kt)(fn(t.values,i)||fn(this.values,i))&&(r[i]=t.get(i)+this.get(i));return yt(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let t=S.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let r of Object.keys(this.values))t[r]=go(e(this.values[r],r));return yt(this,{values:t},!0)}get(e){return this[S.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let t={...this.values,...Pr(e,S.normalizeUnit)};return yt(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){let u={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return yt(this,u)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Lc(this.matrix,e),yt(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Vc(this.normalize().shiftToAll().toObject());return yt(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(u=>S.normalizeUnit(u));let t={},r={},i=this.toObject(),s;for(let u of kt)if(e.indexOf(u)>=0){s=u;let o=0;for(let c in r)o+=this.matrix[c][u]*r[c],r[c]=0;It(i[u])&&(o+=i[u]);let a=Math.trunc(o);t[u]=a,r[u]=(o*1e3-a*1e3)/1e3;for(let c in i)kt.indexOf(c)>kt.indexOf(u)&&Io(this.matrix,i,c,t,u)}else It(i[u])&&(r[u]=i[u]);for(let u in r)r[u]!==0&&(t[s]+=u===s?r[u]:r[u]/this.matrix[s][u]);return yt(this,{values:t},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return yt(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of kt)if(!t(this.values[r],e.values[r]))return!1;return!0}},an="Invalid Interval";function $c(n,e){return!n||!n.isValid?X.invalid("missing or invalid start"):!e||!e.isValid?X.invalid("missing or invalid end"):e<n?X.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}var X=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Se("need to specify a reason the Interval is invalid");let r=e instanceof Ie?e:new Ie(e,t);if(ie.throwOnInvalid)throw new Ri(r);return new X({invalid:r})}static fromDateTimes(e,t){let r=Nn(e),i=Nn(t),s=$c(r,i);return s==null?new X({start:r,end:i}):s}static after(e,t){let r=S.fromDurationLike(t),i=Nn(e);return X.fromDateTimes(i,i.plus(r))}static before(e,t){let r=S.fromDurationLike(t),i=Nn(e);return X.fromDateTimes(i.minus(r),i)}static fromISO(e,t){let[r,i]=(e||"").split("/",2);if(r&&i){let s,u;try{s=k.fromISO(r,t),u=s.isValid}catch(c){u=!1}let o,a;try{o=k.fromISO(i,t),a=o.isValid}catch(c){a=!1}if(u&&a)return X.fromDateTimes(s,o);if(u){let c=S.fromISO(i,t);if(c.isValid)return X.after(s,c)}else if(a){let c=S.fromISO(r,t);if(c.isValid)return X.before(o,c)}}return X.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let t=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(t,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?X.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map(Nn).filter(u=>this.contains(u)).sort(),r=[],{s:i}=this,s=0;for(;i<this.e;){let u=t[s]||this.e,o=+u>+this.e?this.e:u;r.push(X.fromDateTimes(i,o)),i=o,s+=1}return r}splitBy(e){let t=S.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s,u=[];for(;r<this.e;){let o=this.start.plus(t.mapUnits(a=>a*i));s=+o>+this.e?this.e:o,u.push(X.fromDateTimes(r,s)),r=s,i+=1}return u}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:X.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return X.fromDateTimes(t,r)}static merge(e){let[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],u)=>s?s.overlaps(u)||s.abutsStart(u)?[i,s.union(u)]:[i.concat([s]),u]:[i,u],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0,i=[],s=e.map(a=>[{time:a.s,type:"s"},{time:a.e,type:"e"}]),u=Array.prototype.concat(...s),o=u.sort((a,c)=>a.time-c.time);for(let a of o)r+=a.type==="s"?1:-1,r===1?t=a.time:(t&&+t!=+a.time&&i.push(X.fromDateTimes(t,a.time)),t=null);return X.merge(i)}difference(...e){return X.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:an}toLocaleString(e=Vr,t={}){return this.isValid?ye.create(this.s.loc.clone(t),e).formatInterval(this):an}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:an}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:an}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:an}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:an}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):S.invalid(this.invalidReason)}mapEndpoints(e){return X.fromDateTimes(e(this.s),e(this.e))}},ln=class{static hasDST(e=ie.defaultZone){let t=k.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Ge.isValidZone(e)}static normalizeZone(e){return bt(e,ie.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Z.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||Z.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Z.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||Z.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Z.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Z.create(t,null,"gregory").eras(e)}static features(){return{relative:mo()}}};function Mu(n,e){let t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(S.fromMillis(r).as("days"))}function Rc(n,e,t){let r=[["years",(a,c)=>c.year-a.year],["quarters",(a,c)=>c.quarter-a.quarter+(c.year-a.year)*4],["months",(a,c)=>c.month-a.month+(c.year-a.year)*12],["weeks",(a,c)=>{let m=Mu(a,c);return(m-m%7)/7}],["days",Mu]],i={},s=n,u,o;for(let[a,c]of r)t.indexOf(a)>=0&&(u=a,i[a]=c(n,e),o=s.plus(i),o>e?(i[a]--,n=s.plus(i)):n=o);return[n,i,o,u]}function Pc(n,e,t,r){let[i,s,u,o]=Rc(n,e,t),a=e-i,c=t.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);c.length===0&&(u<e&&(u=i.plus({[o]:1})),u!==i&&(s[o]=(s[o]||0)+a/(u-i)));let m=S.fromObject(s,r);return c.length>0?S.fromMillis(a,r).shiftTo(...c).plus(m):m}var as={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Iu={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},jc=as.hanidec.replace(/[\[|\]]/g,"").split("");function qc(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(n[t].search(as.hanidec)!==-1)e+=jc.indexOf(n[t]);else for(let i in Iu){let[s,u]=Iu[i];r>=s&&r<=u&&(e+=r-s)}}return parseInt(e,10)}else return e}function He({numberingSystem:n},e=""){return new RegExp(`${as[n||"latn"]}${e}`)}var Hc="missing Intl.DateTimeFormat.formatToParts support";function H(n,e=t=>t){return{regex:n,deser:([t])=>e(qc(t))}}var Wc=String.fromCharCode(160),Oo=`[ ${Wc}]`,Ao=new RegExp(Oo,"g");function Uc(n){return n.replace(/\./g,"\\.?").replace(Ao,Oo)}function Ou(n){return n.replace(/\./g,"").replace(Ao," ").toLowerCase()}function We(n,e){return n===null?null:{regex:RegExp(n.map(Uc).join("|")),deser:([t])=>n.findIndex(r=>Ou(t)===Ou(r))+e}}function Au(n,e){return{regex:n,deser:([,t,r])=>Wr(t,r),groups:e}}function Oi(n){return{regex:n,deser:([e])=>e}}function zc(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Gc(n,e){let t=He(e),r=He(e,"{2}"),i=He(e,"{3}"),s=He(e,"{4}"),u=He(e,"{6}"),o=He(e,"{1,2}"),a=He(e,"{1,3}"),c=He(e,"{1,6}"),m=He(e,"{1,9}"),p=He(e,"{2,4}"),g=He(e,"{4,6}"),h=B=>({regex:RegExp(zc(B.val)),deser:([V])=>V,literal:!0}),C=(B=>{if(n.literal)return h(B);switch(B.val){case"G":return We(e.eras("short",!1),0);case"GG":return We(e.eras("long",!1),0);case"y":return H(c);case"yy":return H(p,Zi);case"yyyy":return H(s);case"yyyyy":return H(g);case"yyyyyy":return H(u);case"M":return H(o);case"MM":return H(r);case"MMM":return We(e.months("short",!0,!1),1);case"MMMM":return We(e.months("long",!0,!1),1);case"L":return H(o);case"LL":return H(r);case"LLL":return We(e.months("short",!1,!1),1);case"LLLL":return We(e.months("long",!1,!1),1);case"d":return H(o);case"dd":return H(r);case"o":return H(a);case"ooo":return H(i);case"HH":return H(r);case"H":return H(o);case"hh":return H(r);case"h":return H(o);case"mm":return H(r);case"m":return H(o);case"q":return H(o);case"qq":return H(r);case"s":return H(o);case"ss":return H(r);case"S":return H(a);case"SSS":return H(i);case"u":return Oi(m);case"uu":return Oi(o);case"uuu":return H(t);case"a":return We(e.meridiems(),0);case"kkkk":return H(s);case"kk":return H(p,Zi);case"W":return H(o);case"WW":return H(r);case"E":case"c":return H(t);case"EEE":return We(e.weekdays("short",!1,!1),1);case"EEEE":return We(e.weekdays("long",!1,!1),1);case"ccc":return We(e.weekdays("short",!0,!1),1);case"cccc":return We(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Au(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return Au(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return Oi(/[a-z_+-/]{1,256}?/i);default:return h(B)}})(n)||{invalidReason:Hc};return C.token=n,C}var Yc={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Zc(n,e){let{type:t,value:r}=n;if(t==="literal")return{literal:!0,val:r};let i=e[t],s=Yc[t];if(typeof s=="object"&&(s=s[i]),s)return{literal:!1,val:s}}function Jc(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function Kc(n,e,t){let r=n.match(e);if(r){let i={},s=1;for(let u in t)if(fn(t,u)){let o=t[u],a=o.groups?o.groups+1:1;!o.literal&&o.token&&(i[o.token.val[0]]=o.deser(r.slice(s,s+a))),s+=a}return[r,i]}else return[r,{}]}function Qc(n){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,r;return P(n.z)||(t=Ge.create(n.z)),P(n.Z)||(t||(t=new we(n.Z)),r=n.Z),P(n.q)||(n.M=(n.q-1)*3+1),P(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),P(n.u)||(n.S=ns(n.u)),[Object.keys(n).reduce((s,u)=>{let o=e(u);return o&&(s[o]=n[u]),s},{}),t,r]}var Ai=null;function Xc(){return Ai||(Ai=k.fromMillis(1555555555555)),Ai}function ed(n,e){if(n.literal)return n;let t=ye.macroTokenToFormatOpts(n.val),r=Lo(t,e);return r==null||r.includes(void 0)?n:r}function Bo(n,e){return Array.prototype.concat(...n.map(t=>ed(t,e)))}function No(n,e,t){let r=Bo(ye.parseFormat(t),n),i=r.map(u=>Gc(u,n)),s=i.find(u=>u.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{let[u,o]=Jc(i),a=RegExp(u,"i"),[c,m]=Kc(e,a,o),[p,g,h]=m?Qc(m):[null,null,void 0];if(fn(m,"a")&&fn(m,"H"))throw new Mt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:a,rawMatches:c,matches:m,result:p,zone:g,specificOffset:h}}}function td(n,e,t){let{result:r,zone:i,specificOffset:s,invalidReason:u}=No(n,e,t);return[r,i,s,u]}function Lo(n,e){return n?ye.create(e,n).formatDateTimeParts(Xc()).map(i=>Zc(i,n)):null}var Vo=[0,31,59,90,120,151,181,212,243,273,304,334],$o=[0,31,60,91,121,152,182,213,244,274,305,335];function Le(n,e){return new Ie("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function Ro(n,e,t){let r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function Po(n,e,t){return t+(Wn(n)?$o:Vo)[e-1]}function jo(n,e){let t=Wn(n)?$o:Vo,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function Ji(n){let{year:e,month:t,day:r}=n,i=Po(e,t,r),s=Ro(e,t,r),u=Math.floor((i-s+10)/7),o;return u<1?(o=e-1,u=Rr(o)):u>Rr(e)?(o=e+1,u=1):o=e,{weekYear:o,weekNumber:u,weekday:s,...Ur(n)}}function Bu(n){let{weekYear:e,weekNumber:t,weekday:r}=n,i=Ro(e,1,4),s=$n(e),u=t*7+r-i-3,o;u<1?(o=e-1,u+=$n(o)):u>s?(o=e+1,u-=$n(e)):o=e;let{month:a,day:c}=jo(o,u);return{year:o,month:a,day:c,...Ur(n)}}function Bi(n){let{year:e,month:t,day:r}=n,i=Po(e,t,r);return{year:e,ordinal:i,...Ur(n)}}function Nu(n){let{year:e,ordinal:t}=n,{month:r,day:i}=jo(e,t);return{year:e,month:r,day:i,...Ur(n)}}function nd(n){let e=Hr(n.weekYear),t=mt(n.weekNumber,1,Rr(n.weekYear)),r=mt(n.weekday,1,7);return e?t?r?!1:Le("weekday",n.weekday):Le("week",n.week):Le("weekYear",n.weekYear)}function rd(n){let e=Hr(n.year),t=mt(n.ordinal,1,$n(n.year));return e?t?!1:Le("ordinal",n.ordinal):Le("year",n.year)}function qo(n){let e=Hr(n.year),t=mt(n.month,1,12),r=mt(n.day,1,$r(n.year,n.month));return e?t?r?!1:Le("day",n.day):Le("month",n.month):Le("year",n.year)}function Ho(n){let{hour:e,minute:t,second:r,millisecond:i}=n,s=mt(e,0,23)||e===24&&t===0&&r===0&&i===0,u=mt(t,0,59),o=mt(r,0,59),a=mt(i,0,999);return s?u?o?a?!1:Le("millisecond",i):Le("second",r):Le("minute",t):Le("hour",e)}var Ni="Invalid DateTime",Lu=864e13;function Or(n){return new Ie("unsupported zone",`the zone "${n.name}" is not supported`)}function Li(n){return n.weekData===null&&(n.weekData=Ji(n.c)),n.weekData}function An(n,e){let t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new k({...t,...e,old:t})}function Wo(n,e,t){let r=n-e*60*1e3,i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Vu(n,e){n+=e*60*1e3;let t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function Nr(n,e,t){return Wo(is(n),e,t)}function $u(n,e){let t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,$r(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},u=S.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=is(s),[a,c]=Wo(o,t,n.zone);return u!==0&&(a+=u,c=n.zone.offset(a)),{ts:a,o:c}}function Bn(n,e,t,r,i,s){let{setZone:u,zone:o}=t;if(n&&Object.keys(n).length!==0){let a=e||o,c=k.fromObject(n,{...t,zone:a,specificOffset:s});return u?c:c.setZone(o)}else return k.invalid(new Ie("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Ar(n,e,t=!0){return n.isValid?ye.create(Z.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function Vi(n,e){let t=n.c.year>9999||n.c.year<0,r="";return t&&n.c.year>=0&&(r+="+"),r+=de(n.c.year,t?6:4),e?(r+="-",r+=de(n.c.month),r+="-",r+=de(n.c.day)):(r+=de(n.c.month),r+=de(n.c.day)),r}function Ru(n,e,t,r,i,s){let u=de(n.c.hour);return e?(u+=":",u+=de(n.c.minute),(n.c.second!==0||!t)&&(u+=":")):u+=de(n.c.minute),(n.c.second!==0||!t)&&(u+=de(n.c.second),(n.c.millisecond!==0||!r)&&(u+=".",u+=de(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?u+="Z":n.o<0?(u+="-",u+=de(Math.trunc(-n.o/60)),u+=":",u+=de(Math.trunc(-n.o%60))):(u+="+",u+=de(Math.trunc(n.o/60)),u+=":",u+=de(Math.trunc(n.o%60)))),s&&(u+="["+n.zone.ianaName+"]"),u}var Uo={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},id={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},sd={ordinal:1,hour:0,minute:0,second:0,millisecond:0},zo=["year","month","day","hour","minute","second","millisecond"],ud=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],od=["year","ordinal","hour","minute","second","millisecond"];function Pu(n){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Lr(n);return e}function ju(n,e){let t=bt(e.zone,ie.defaultZone),r=Z.fromObject(e),i=ie.now(),s,u;if(P(n.year))s=i;else{for(let c of zo)P(n[c])&&(n[c]=Uo[c]);let o=qo(n)||Ho(n);if(o)return k.invalid(o);let a=t.offset(i);[s,u]=Nr(n,a,t)}return new k({ts:s,zone:t,loc:r,o:u})}function qu(n,e,t){let r=P(t.round)?!0:t.round,i=(u,o)=>(u=rs(u,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(u,o)),s=u=>t.calendary?e.hasSame(n,u)?0:e.startOf(u).diff(n.startOf(u),u).get(u):e.diff(n,u).get(u);if(t.unit)return i(s(t.unit),t.unit);for(let u of t.units){let o=s(u);if(Math.abs(o)>=1)return i(o,u)}return i(n>e?-0:0,t.units[t.units.length-1])}function Hu(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}var k=class{constructor(e){let t=e.zone||ie.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new Ie("invalid input"):null)||(t.isValid?null:Or(t));this.ts=P(e.ts)?ie.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{let o=t.offset(this.ts);i=Vu(this.ts,o),r=Number.isNaN(i.year)?new Ie("invalid input"):null,i=r?null:i,s=r?null:o}this._zone=t,this.loc=e.loc||Z.create(),this.invalid=r,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new k({})}static local(){let[e,t]=Hu(arguments),[r,i,s,u,o,a,c]=t;return ju({year:r,month:i,day:s,hour:u,minute:o,second:a,millisecond:c},e)}static utc(){let[e,t]=Hu(arguments),[r,i,s,u,o,a,c]=t;return e.zone=we.utcInstance,ju({year:r,month:i,day:s,hour:u,minute:o,second:a,millisecond:c},e)}static fromJSDate(e,t={}){let r=Ol(e)?e.valueOf():NaN;if(Number.isNaN(r))return k.invalid("invalid input");let i=bt(t.zone,ie.defaultZone);return i.isValid?new k({ts:r,zone:i,loc:Z.fromObject(t)}):k.invalid(Or(i))}static fromMillis(e,t={}){if(It(e))return e<-Lu||e>Lu?k.invalid("Timestamp out of range"):new k({ts:e,zone:bt(t.zone,ie.defaultZone),loc:Z.fromObject(t)});throw new Se(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(It(e))return new k({ts:e*1e3,zone:bt(t.zone,ie.defaultZone),loc:Z.fromObject(t)});throw new Se("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let r=bt(t.zone,ie.defaultZone);if(!r.isValid)return k.invalid(Or(r));let i=ie.now(),s=P(t.specificOffset)?r.offset(i):t.specificOffset,u=Pr(e,Pu),o=!P(u.ordinal),a=!P(u.year),c=!P(u.month)||!P(u.day),m=a||c,p=u.weekYear||u.weekNumber,g=Z.fromObject(t);if((m||o)&&p)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&o)throw new Mt("Can't mix ordinal dates with month/day");let h=p||u.weekday&&!m,y,C,B=Vu(i,s);h?(y=ud,C=id,B=Ji(B)):o?(y=od,C=sd,B=Bi(B)):(y=zo,C=Uo);let V=!1;for(let $ of y){let A=u[$];P(A)?V?u[$]=C[$]:u[$]=B[$]:V=!0}let Fe=h?nd(u):o?rd(u):qo(u),G=Fe||Ho(u);if(G)return k.invalid(G);let b=h?Bu(u):o?Nu(u):u,[I,J]=Nr(b,s,r),_=new k({ts:I,zone:r,o:J,loc:g});return u.weekday&&m&&e.weekday!==_.weekday?k.invalid("mismatched weekday",`you can't specify both a weekday of ${u.weekday} and a date of ${_.toISO()}`):_}static fromISO(e,t={}){let[r,i]=wc(e);return Bn(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[r,i]=Ec(e);return Bn(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[r,i]=vc(e);return Bn(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(P(e)||P(t))throw new Se("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=r,u=Z.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[o,a,c,m]=td(u,e,t);return m?k.invalid(m):Bn(o,a,r,`format ${t}`,e,c)}static fromString(e,t,r={}){return k.fromFormat(e,t,r)}static fromSQL(e,t={}){let[r,i]=Mc(e);return Bn(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Se("need to specify a reason the DateTime is invalid");let r=e instanceof Ie?e:new Ie(e,t);if(ie.throwOnInvalid)throw new $i(r);return new k({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let r=Lo(e,Z.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return Bo(ye.parseFormat(e),Z.fromObject(t)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Li(this).weekYear:NaN}get weekNumber(){return this.isValid?Li(this).weekNumber:NaN}get weekday(){return this.isValid?Li(this).weekday:NaN}get ordinal(){return this.isValid?Bi(this.c).ordinal:NaN}get monthShort(){return this.isValid?ln.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ln.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ln.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ln.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Wn(this.year)}get daysInMonth(){return $r(this.year,this.month)}get daysInYear(){return this.isValid?$n(this.year):NaN}get weeksInWeekYear(){return this.isValid?Rr(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:r,calendar:i}=ye.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(we.instance(e),t)}toLocal(){return this.setZone(ie.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=bt(e,ie.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){let s=e.offset(this.ts),u=this.toObject();[i]=Nr(u,s,e)}return An(this,{ts:i,zone:e})}else return k.invalid(Or(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return An(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=Pr(e,Pu),r=!P(t.weekYear)||!P(t.weekNumber)||!P(t.weekday),i=!P(t.ordinal),s=!P(t.year),u=!P(t.month)||!P(t.day),o=s||u,a=t.weekYear||t.weekNumber;if((o||i)&&a)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&i)throw new Mt("Can't mix ordinal dates with month/day");let c;r?c=Bu({...Ji(this.c),...t}):P(t.ordinal)?(c={...this.toObject(),...t},P(t.day)&&(c.day=Math.min($r(c.year,c.month),c.day))):c=Nu({...Bi(this.c),...t});let[m,p]=Nr(c,this.o,this.zone);return An(this,{ts:m,o:p})}plus(e){if(!this.isValid)return this;let t=S.fromDurationLike(e);return An(this,$u(this,t))}minus(e){if(!this.isValid)return this;let t=S.fromDurationLike(e).negate();return An(this,$u(this,t))}startOf(e){if(!this.isValid)return this;let t={},r=S.normalizeUnit(e);switch(r){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(r==="weeks"&&(t.weekday=1),r==="quarters"){let i=Math.ceil(this.month/3);t.month=(i-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?ye.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Ni}toLocaleString(e=Vr,t={}){return this.isValid?ye.create(this.loc.clone(t),e).formatDateTime(this):Ni}toLocaleParts(e={}){return this.isValid?ye.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let u=e==="extended",o=Vi(this,u);return o+="T",o+=Ru(this,u,t,r,i,s),o}toISODate({format:e="extended"}={}){return this.isValid?Vi(this,e==="extended"):null}toISOWeekDate(){return Ar(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:u="extended"}={}){return this.isValid?(i?"T":"")+Ru(this,u==="extended",t,e,r,s):null}toRFC2822(){return Ar(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ar(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Vi(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),Ar(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():Ni}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return S.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=Al(t).map(S.normalizeUnit),u=e.valueOf()>this.valueOf(),o=u?this:e,a=u?e:this,c=Pc(o,a,s,i);return u?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(k.now(),e,t)}until(e){return this.isValid?X.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t)<=r&&r<=i.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||k.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),qu(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?qu(e.base||k.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(k.isDateTime))throw new Se("min requires all arguments be DateTimes");return Su(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(k.isDateTime))throw new Se("max requires all arguments be DateTimes");return Su(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){let{locale:i=null,numberingSystem:s=null}=r,u=Z.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return No(u,e,t)}static fromStringExplain(e,t,r={}){return k.fromFormatExplain(e,t,r)}static get DATE_SHORT(){return Vr}static get DATE_MED(){return Yu}static get DATE_MED_WITH_WEEKDAY(){return gl}static get DATE_FULL(){return Zu}static get DATE_HUGE(){return Ju}static get TIME_SIMPLE(){return Ku}static get TIME_WITH_SECONDS(){return Qu}static get TIME_WITH_SHORT_OFFSET(){return Xu}static get TIME_WITH_LONG_OFFSET(){return eo}static get TIME_24_SIMPLE(){return to}static get TIME_24_WITH_SECONDS(){return no}static get TIME_24_WITH_SHORT_OFFSET(){return ro}static get TIME_24_WITH_LONG_OFFSET(){return io}static get DATETIME_SHORT(){return so}static get DATETIME_SHORT_WITH_SECONDS(){return uo}static get DATETIME_MED(){return oo}static get DATETIME_MED_WITH_SECONDS(){return ao}static get DATETIME_MED_WITH_WEEKDAY(){return Dl}static get DATETIME_FULL(){return lo}static get DATETIME_FULL_WITH_SECONDS(){return co}static get DATETIME_HUGE(){return fo}static get DATETIME_HUGE_WITH_SECONDS(){return ho}};function Nn(n){if(k.isDateTime(n))return n;if(n&&n.valueOf&&It(n.valueOf()))return k.fromJSDate(n);if(n&&typeof n=="object")return k.fromObject(n);throw new Se(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var ls={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},ad={allowHtml:!0};({...ls,...ad});var Pn=class{constructor(e){this.value=e,this.successful=!0}map(e){return new Pn(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,t){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},jn=class{constructor(e){this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new jn(e(this.error))}bimap(e,t){return this.mapErr(t)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},jr;(function(n){function e(s){return new Pn(s)}n.success=e;function t(s){return new jn(s)}n.failure=t;function r(s,u,o){return s.successful?u.successful?o(s.value,u.value):t(u.error):t(s.error)}n.flatMap2=r;function i(s,u,o){return r(s,u,(a,c)=>e(o(a,c)))}n.map2=i})(jr||(jr={}));var ld=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},d={exports:{}};(function(n,e){(function(t,r){n.exports=r()})(typeof self!="undefined"?self:ld,function(){return function(t){var r={};function i(s){if(r[s])return r[s].exports;var u=r[s]={i:s,l:!1,exports:{}};return t[s].call(u.exports,u,u.exports,i),u.l=!0,u.exports}return i.m=t,i.c=r,i.d=function(s,u,o){i.o(s,u)||Object.defineProperty(s,u,{configurable:!1,enumerable:!0,get:o})},i.r=function(s){Object.defineProperty(s,"__esModule",{value:!0})},i.n=function(s){var u=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(u,"a",u),u},i.o=function(s,u){return Object.prototype.hasOwnProperty.call(s,u)},i.p="",i(i.s=0)}([function(t,r,i){function s(l){if(!(this instanceof s))return new s(l);this._=l}var u=s.prototype;function o(l,f){for(var D=0;D<l;D++)f(D)}function a(l,f,D){return function(F,w){o(w.length,function(E){F(w[E],E,w)})}(function(F,w,E){f=l(f,F,w,E)},D),f}function c(l,f){return a(function(D,F,w,E){return D.concat([l(F,w,E)])},[],f)}function m(l,f){var D={v:0,buf:f};return o(l,function(){var F;D={v:D.v<<1|(F=D.buf,F[0]>>7),buf:function(w){var E=a(function(v,L,Q,Ce){return v.concat(Q===Ce.length-1?Buffer.from([L,0]).readUInt16BE(0):Ce.readUInt16BE(Q))},[],w);return Buffer.from(c(function(v){return(v<<1&65535)>>8},E))}(D.buf)}}),D}function p(){return typeof Buffer!="undefined"}function g(){if(!p())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function h(l){g();var f=a(function(E,v){return E+v},0,l);if(f%8!=0)throw new Error("The bits ["+l.join(", ")+"] add up to "+f+" which is not an even number of bytes; the total should be divisible by 8");var D,F=f/8,w=(D=function(E){return E>48},a(function(E,v){return E||(D(v)?v:E)},null,l));if(w)throw new Error(w+" bit range requested exceeds 48 bit (6 byte) Number max.");return new s(function(E,v){var L=F+v;return L>E.length?$(v,F.toString()+" bytes"):_(L,a(function(Q,Ce){var be=m(Ce,Q.buf);return{coll:Q.coll.concat(be.v),buf:be.buf}},{coll:[],buf:E.slice(v,L)},l).coll)})}function y(l,f){return new s(function(D,F){return g(),F+f>D.length?$(F,f+" bytes for "+l):_(F+f,D.slice(F,F+f))})}function C(l,f){if(typeof(D=f)!="number"||Math.floor(D)!==D||f<0||f>6)throw new Error(l+" requires integer length in range [0, 6].");var D}function B(l){return C("uintBE",l),y("uintBE("+l+")",l).map(function(f){return f.readUIntBE(0,l)})}function V(l){return C("uintLE",l),y("uintLE("+l+")",l).map(function(f){return f.readUIntLE(0,l)})}function Fe(l){return C("intBE",l),y("intBE("+l+")",l).map(function(f){return f.readIntBE(0,l)})}function G(l){return C("intLE",l),y("intLE("+l+")",l).map(function(f){return f.readIntLE(0,l)})}function b(l){return l instanceof s}function I(l){return{}.toString.call(l)==="[object Array]"}function J(l){return p()&&Buffer.isBuffer(l)}function _(l,f){return{status:!0,index:l,value:f,furthest:-1,expected:[]}}function $(l,f){return I(f)||(f=[f]),{status:!1,index:-1,value:null,furthest:l,expected:f}}function A(l,f){if(!f||l.furthest>f.furthest)return l;var D=l.furthest===f.furthest?function(F,w){if(function(){if(s._supportsSet!==void 0)return s._supportsSet;var at=typeof Set!="undefined";return s._supportsSet=at,at}()&&Array.from){for(var E=new Set(F),v=0;v<w.length;v++)E.add(w[v]);var L=Array.from(E);return L.sort(),L}for(var Q={},Ce=0;Ce<F.length;Ce++)Q[F[Ce]]=!0;for(var be=0;be<w.length;be++)Q[w[be]]=!0;var ot=[];for(var ke in Q)({}).hasOwnProperty.call(Q,ke)&&ot.push(ke);return ot.sort(),ot}(l.expected,f.expected):f.expected;return{status:l.status,index:l.index,value:l.value,furthest:f.furthest,expected:D}}var K={};function rt(l,f){if(J(l))return{offset:f,line:-1,column:-1};l in K||(K[l]={});for(var D=K[l],F=0,w=0,E=0,v=f;v>=0;){if(v in D){F=D[v].line,E===0&&(E=D[v].lineStart);break}(l.charAt(v)===`
`||l.charAt(v)==="\r"&&l.charAt(v+1)!==`
`)&&(w++,E===0&&(E=v+1)),v--}var L=F+w,Q=f-E;return D[f]={line:L,lineStart:E},{offset:f,line:L+1,column:Q+1}}function Te(l){if(!b(l))throw new Error("not a parser: "+l)}function wt(l,f){return typeof l=="string"?l.charAt(f):l[f]}function it(l){if(typeof l!="number")throw new Error("not a number: "+l)}function Ze(l){if(typeof l!="function")throw new Error("not a function: "+l)}function st(l){if(typeof l!="string")throw new Error("not a string: "+l)}var Fn=2,Qn=3,$e=8,bn=5*$e,Xn=4*$e,wn="  ";function xe(l,f){return new Array(f+1).join(l)}function Je(l,f,D){var F=f-l.length;return F<=0?l:xe(D,F)+l}function ws(l,f,D,F){return{from:l-f>0?l-f:0,to:l+D>F?F:l+D}}function ha(l,f){var D,F,w,E,v,L=f.index,Q=L.offset,Ce=1;if(Q===l.length)return"Got the end of the input";if(J(l)){var be=Q-Q%$e,ot=Q-be,ke=ws(be,bn,Xn+$e,l.length),at=c(function(fe){return c(function($t){return Je($t.toString(16),2,"0")},fe)},function(fe,$t){var Rt=fe.length,Ct=[],Pt=0;if(Rt<=$t)return[fe.slice()];for(var jt=0;jt<Rt;jt++)Ct[Pt]||Ct.push([]),Ct[Pt].push(fe[jt]),(jt+1)%$t==0&&Pt++;return Ct}(l.slice(ke.from,ke.to).toJSON().data,$e));E=function(fe){return fe.from===0&&fe.to===1?{from:fe.from,to:fe.to}:{from:fe.from/$e,to:Math.floor(fe.to/$e)}}(ke),F=be/$e,D=3*ot,ot>=4&&(D+=1),Ce=2,w=c(function(fe){return fe.length<=4?fe.join(" "):fe.slice(0,4).join(" ")+"  "+fe.slice(4).join(" ")},at),(v=(8*(E.to>0?E.to-1:E.to)).toString(16).length)<2&&(v=2)}else{var Vt=l.split(/\r\n|[\n\r\u2028\u2029]/);D=L.column-1,F=L.line-1,E=ws(F,Fn,Qn,Vt.length),w=Vt.slice(E.from,E.to),v=E.to.toString().length}var va=F-E.from;return J(l)&&(v=(8*(E.to>0?E.to-1:E.to)).toString(16).length)<2&&(v=2),a(function(fe,$t,Rt){var Ct,Pt=Rt===va,jt=Pt?"> ":wn;return Ct=J(l)?Je((8*(E.from+Rt)).toString(16),v,"0"):Je((E.from+Rt+1).toString(),v," "),[].concat(fe,[jt+Ct+" | "+$t],Pt?[wn+xe(" ",v)+" | "+Je("",D," ")+xe("^",Ce)]:[])},[],w).join(`
`)}function Es(l,f){return[`
`,"-- PARSING FAILED "+xe("-",50),`

`,ha(l,f),`

`,(D=f.expected,D.length===1?`Expected:

`+D[0]:`Expected one of the following: 

`+D.join(", ")),`
`].join("");var D}function vs(l){return l.flags!==void 0?l.flags:[l.global?"g":"",l.ignoreCase?"i":"",l.multiline?"m":"",l.unicode?"u":"",l.sticky?"y":""].join("")}function er(){for(var l=[].slice.call(arguments),f=l.length,D=0;D<f;D+=1)Te(l[D]);return s(function(F,w){for(var E,v=new Array(f),L=0;L<f;L+=1){if(!(E=A(l[L]._(F,w),E)).status)return E;v[L]=E.value,w=E.index}return A(_(w,v),E)})}function Et(){var l=[].slice.call(arguments);if(l.length===0)throw new Error("seqMap needs at least one argument");var f=l.pop();return Ze(f),er.apply(null,l).map(function(D){return f.apply(null,D)})}function tr(){var l=[].slice.call(arguments),f=l.length;if(f===0)return nr("zero alternates");for(var D=0;D<f;D+=1)Te(l[D]);return s(function(F,w){for(var E,v=0;v<l.length;v+=1)if((E=A(l[v]._(F,w),E)).status)return E;return E})}function Cs(l,f){return ni(l,f).or(vt([]))}function ni(l,f){return Te(l),Te(f),Et(l,f.then(l).many(),function(D,F){return[D].concat(F)})}function En(l){st(l);var f="'"+l+"'";return s(function(D,F){var w=F+l.length,E=D.slice(F,w);return E===l?_(w,E):$(F,f)})}function ut(l,f){(function(w){if(!(w instanceof RegExp))throw new Error("not a regexp: "+w);for(var E=vs(w),v=0;v<E.length;v++){var L=E.charAt(v);if(L!=="i"&&L!=="m"&&L!=="u"&&L!=="s")throw new Error('unsupported regexp flag "'+L+'": '+w)}})(l),arguments.length>=2?it(f):f=0;var D=function(w){return RegExp("^(?:"+w.source+")",vs(w))}(l),F=""+l;return s(function(w,E){var v=D.exec(w.slice(E));if(v){if(0<=f&&f<=v.length){var L=v[0],Q=v[f];return _(E+L.length,Q)}return $(E,"valid match group (0 to "+v.length+") in "+F)}return $(E,F)})}function vt(l){return s(function(f,D){return _(D,l)})}function nr(l){return s(function(f,D){return $(D,l)})}function rr(l){if(b(l))return s(function(f,D){var F=l._(f,D);return F.index=D,F.value="",F});if(typeof l=="string")return rr(En(l));if(l instanceof RegExp)return rr(ut(l));throw new Error("not a string, regexp, or parser: "+l)}function xs(l){return Te(l),s(function(f,D){var F=l._(f,D),w=f.slice(D,F.index);return F.status?$(D,'not "'+w+'"'):_(D,null)})}function ir(l){return Ze(l),s(function(f,D){var F=wt(f,D);return D<f.length&&l(F)?_(D+1,F):$(D,"a character/byte matching "+l)})}function _s(l,f){arguments.length<2&&(f=l,l=void 0);var D=s(function(F,w){return D._=f()._,D._(F,w)});return l?D.desc(l):D}function ri(){return nr("fantasy-land/empty")}u.parse=function(l){if(typeof l!="string"&&!J(l))throw new Error(".parse must be called with a string or Buffer as its argument");var f,D=this.skip(ii)._(l,0);return f=D.status?{status:!0,value:D.value}:{status:!1,index:rt(l,D.furthest),expected:D.expected},delete K[l],f},u.tryParse=function(l){var f=this.parse(l);if(f.status)return f.value;var D=Es(l,f),F=new Error(D);throw F.type="ParsimmonError",F.result=f,F},u.assert=function(l,f){return this.chain(function(D){return l(D)?vt(D):nr(f)})},u.or=function(l){return tr(this,l)},u.trim=function(l){return this.wrap(l,l)},u.wrap=function(l,f){return Et(l,this,f,function(D,F){return F})},u.thru=function(l){return l(this)},u.then=function(l){return Te(l),er(this,l).map(function(f){return f[1]})},u.many=function(){var l=this;return s(function(f,D){for(var F=[],w=void 0;;){if(!(w=A(l._(f,D),w)).status)return A(_(D,F),w);if(D===w.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");D=w.index,F.push(w.value)}})},u.tieWith=function(l){return st(l),this.map(function(f){if(function(w){if(!I(w))throw new Error("not an array: "+w)}(f),f.length){st(f[0]);for(var D=f[0],F=1;F<f.length;F++)st(f[F]),D+=l+f[F];return D}return""})},u.tie=function(){return this.tieWith("")},u.times=function(l,f){var D=this;return arguments.length<2&&(f=l),it(l),it(f),s(function(F,w){for(var E=[],v=void 0,L=void 0,Q=0;Q<l;Q+=1){if(L=A(v=D._(F,w),L),!v.status)return L;w=v.index,E.push(v.value)}for(;Q<f&&(L=A(v=D._(F,w),L),v.status);Q+=1)w=v.index,E.push(v.value);return A(_(w,E),L)})},u.result=function(l){return this.map(function(){return l})},u.atMost=function(l){return this.times(0,l)},u.atLeast=function(l){return Et(this.times(l),this.many(),function(f,D){return f.concat(D)})},u.map=function(l){Ze(l);var f=this;return s(function(D,F){var w=f._(D,F);return w.status?A(_(w.index,l(w.value)),w):w})},u.contramap=function(l){Ze(l);var f=this;return s(function(D,F){var w=f.parse(l(D.slice(F)));return w.status?_(F+D.length,w.value):w})},u.promap=function(l,f){return Ze(l),Ze(f),this.contramap(l).map(f)},u.skip=function(l){return er(this,l).map(function(f){return f[0]})},u.mark=function(){return Et(vn,this,vn,function(l,f,D){return{start:l,value:f,end:D}})},u.node=function(l){return Et(vn,this,vn,function(f,D,F){return{name:l,value:D,start:f,end:F}})},u.sepBy=function(l){return Cs(this,l)},u.sepBy1=function(l){return ni(this,l)},u.lookahead=function(l){return this.skip(rr(l))},u.notFollowedBy=function(l){return this.skip(xs(l))},u.desc=function(l){I(l)||(l=[l]);var f=this;return s(function(D,F){var w=f._(D,F);return w.status||(w.expected=l),w})},u.fallback=function(l){return this.or(vt(l))},u.ap=function(l){return Et(l,this,function(f,D){return f(D)})},u.chain=function(l){var f=this;return s(function(D,F){var w=f._(D,F);return w.status?A(l(w.value)._(D,w.index),w):w})},u.concat=u.or,u.empty=ri,u.of=vt,u["fantasy-land/ap"]=u.ap,u["fantasy-land/chain"]=u.chain,u["fantasy-land/concat"]=u.concat,u["fantasy-land/empty"]=u.empty,u["fantasy-land/of"]=u.of,u["fantasy-land/map"]=u.map;var vn=s(function(l,f){return _(f,rt(l,f))}),ma=s(function(l,f){return f>=l.length?$(f,"any character/byte"):_(f+1,wt(l,f))}),pa=s(function(l,f){return _(l.length,l.slice(f))}),ii=s(function(l,f){return f<l.length?$(f,"EOF"):_(f,null)}),ga=ut(/[0-9]/).desc("a digit"),Da=ut(/[0-9]*/).desc("optional digits"),ya=ut(/[a-z]/i).desc("a letter"),Fa=ut(/[a-z]*/i).desc("optional letters"),ba=ut(/\s*/).desc("optional whitespace"),wa=ut(/\s+/).desc("whitespace"),Ss=En("\r"),Ts=En(`
`),ks=En(`\r
`),Ms=tr(ks,Ts,Ss).desc("newline"),Ea=tr(Ms,ii);s.all=pa,s.alt=tr,s.any=ma,s.cr=Ss,s.createLanguage=function(l){var f={};for(var D in l)({}).hasOwnProperty.call(l,D)&&function(F){f[F]=_s(function(){return l[F](f)})}(D);return f},s.crlf=ks,s.custom=function(l){return s(l(_,$))},s.digit=ga,s.digits=Da,s.empty=ri,s.end=Ea,s.eof=ii,s.fail=nr,s.formatError=Es,s.index=vn,s.isParser=b,s.lazy=_s,s.letter=ya,s.letters=Fa,s.lf=Ts,s.lookahead=rr,s.makeFailure=$,s.makeSuccess=_,s.newline=Ms,s.noneOf=function(l){return ir(function(f){return l.indexOf(f)<0}).desc("none of '"+l+"'")},s.notFollowedBy=xs,s.of=vt,s.oneOf=function(l){for(var f=l.split(""),D=0;D<f.length;D++)f[D]="'"+f[D]+"'";return ir(function(F){return l.indexOf(F)>=0}).desc(f)},s.optWhitespace=ba,s.Parser=s,s.range=function(l,f){return ir(function(D){return l<=D&&D<=f}).desc(l+"-"+f)},s.regex=ut,s.regexp=ut,s.sepBy=Cs,s.sepBy1=ni,s.seq=er,s.seqMap=Et,s.seqObj=function(){for(var l,f={},D=0,F=(l=arguments,Array.prototype.slice.call(l)),w=F.length,E=0;E<w;E+=1){var v=F[E];if(!b(v)){if(I(v)&&v.length===2&&typeof v[0]=="string"&&b(v[1])){var L=v[0];if(Object.prototype.hasOwnProperty.call(f,L))throw new Error("seqObj: duplicate key "+L);f[L]=!0,D++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(D===0)throw new Error("seqObj expects at least one named parser, found zero");return s(function(Q,Ce){for(var be,ot={},ke=0;ke<w;ke+=1){var at,Vt;if(I(F[ke])?(at=F[ke][0],Vt=F[ke][1]):(at=null,Vt=F[ke]),!(be=A(Vt._(Q,Ce),be)).status)return be;at&&(ot[at]=be.value),Ce=be.index}return A(_(Ce,ot),be)})},s.string=En,s.succeed=vt,s.takeWhile=function(l){return Ze(l),s(function(f,D){for(var F=D;F<f.length&&l(wt(f,F));)F++;return _(F,f.slice(D,F))})},s.test=ir,s.whitespace=wa,s["fantasy-land/empty"]=ri,s["fantasy-land/of"]=vt,s.Binary={bitSeq:h,bitSeqObj:function(l){g();var f={},D=0,F=c(function(E){if(I(E)){var v=E;if(v.length!==2)throw new Error("["+v.join(", ")+"] should be length 2, got length "+v.length);if(st(v[0]),it(v[1]),Object.prototype.hasOwnProperty.call(f,v[0]))throw new Error("duplicate key in bitSeqObj: "+v[0]);return f[v[0]]=!0,D++,v}return it(E),[null,E]},l);if(D<1)throw new Error("bitSeqObj expects at least one named pair, got ["+l.join(", ")+"]");var w=c(function(E){return E[0]},F);return h(c(function(E){return E[1]},F)).map(function(E){return a(function(v,L){return L[0]!==null&&(v[L[0]]=L[1]),v},{},c(function(v,L){return[v,E[L]]},w))})},byte:function(l){if(g(),it(l),l>255)throw new Error("Value specified to byte constructor ("+l+"=0x"+l.toString(16)+") is larger in value than a single byte.");var f=(l>15?"0x":"0x0")+l.toString(16);return s(function(D,F){var w=wt(D,F);return w===l?_(F+1,w):$(F,f)})},buffer:function(l){return y("buffer",l).map(function(f){return Buffer.from(f)})},encodedString:function(l,f){return y("string",f).map(function(D){return D.toString(l)})},uintBE:B,uint8BE:B(1),uint16BE:B(2),uint32BE:B(4),uintLE:V,uint8LE:V(1),uint16LE:V(2),uint32LE:V(4),intBE:Fe,int8BE:Fe(1),int16BE:Fe(2),int32BE:Fe(4),intLE:G,int8LE:G(1),int16LE:G(2),int32LE:G(4),floatBE:y("floatBE",4).map(function(l){return l.readFloatBE(0)}),floatLE:y("floatLE",4).map(function(l){return l.readFloatLE(0)}),doubleBE:y("doubleBE",8).map(function(l){return l.readDoubleBE(0)}),doubleLE:y("doubleLE",8).map(function(l){return l.readDoubleLE(0)})},t.exports=s}])})})(d);var cs=()=>/(?:[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?))/g;function Go(n){return n==null?n:n.shiftToAll().normalize()}function Wu(n){return n.includes("/")&&(n=n.substring(n.lastIndexOf("/")+1)),n.endsWith(".md")&&(n=n.substring(0,n.length-3)),n}d.exports.alt(d.exports.regex(new RegExp(cs(),"")),d.exports.regex(/[0-9\p{Letter}_-]+/u).map(n=>n.toLocaleLowerCase()),d.exports.whitespace.map(n=>"-"),d.exports.any.map(n=>"")).many().map(n=>n.join(""));var cd=d.exports.alt(d.exports.regex(new RegExp(cs(),"")),d.exports.regex(/[0-9\p{Letter}_-]+/u),d.exports.whitespace.map(n=>" "),d.exports.any.map(n=>" ")).many().map(n=>n.join("").split(/\s+/).join(" ").trim());function dd(n){return cd.tryParse(n)}function fd(n){return n=Go(n),n=S.fromObject(Object.fromEntries(Object.entries(n.toObject()).filter(([,e])=>e>0))),n.toHuman()}var qn;(function(n){function e(b,I=ls,J=!1){let _=t(b);if(!_)return I.renderNullAs;switch(_.type){case"null":return I.renderNullAs;case"string":return _.value;case"number":case"boolean":return""+_.value;case"html":return _.value.outerHTML;case"widget":return _.value.markdown();case"link":return _.value.markdown();case"function":return"<function>";case"array":let $="";return J&&($+="["),$+=_.value.map(A=>e(A,I,!0)).join(", "),J&&($+="]"),$;case"object":return"{ "+Object.entries(_.value).map(A=>A[0]+": "+e(A[1],I,!0)).join(", ")+" }";case"date":return _.value.second==0&&_.value.hour==0&&_.value.minute==0?_.value.toFormat(I.defaultDateFormat):_.value.toFormat(I.defaultDateTimeFormat);case"duration":return fd(_.value)}}n.toString=e;function t(b){return g(b)?{type:"null",value:b}:c(b)?{type:"number",value:b}:a(b)?{type:"string",value:b}:y(b)?{type:"boolean",value:b}:p(b)?{type:"duration",value:b}:m(b)?{type:"date",value:b}:B(b)?{type:"widget",value:b}:h(b)?{type:"array",value:b}:C(b)?{type:"link",value:b}:G(b)?{type:"function",value:b}:V(b)?{type:"html",value:b}:Fe(b)?{type:"object",value:b}:void 0}n.wrapValue=t;function r(b,I){if(Fe(b)){let J={};for(let[_,$]of Object.entries(b))J[_]=r($,I);return J}else if(h(b)){let J=[];for(let _ of b)J.push(r(_,I));return J}else return I(b)}n.mapLeaves=r;function i(b,I,J){var _,$;if(b===void 0&&(b=null),I===void 0&&(I=null),b===null&&I===null)return 0;if(b===null)return-1;if(I===null)return 1;let A=t(b),K=t(I);if(A===void 0&&K===void 0)return 0;if(A===void 0)return-1;if(K===void 0)return 1;if(A.type!=K.type)return A.type.localeCompare(K.type);if(A.value===K.value)return 0;switch(A.type){case"string":return A.value.localeCompare(K.value);case"number":return A.value<K.value?-1:A.value==K.value?0:1;case"null":return 0;case"boolean":return A.value==K.value?0:A.value?1:-1;case"link":let rt=A.value,Te=K.value,wt=J!=null?J:xe=>xe,it=wt(rt.path).localeCompare(wt(Te.path));if(it!=0)return it;let Ze=rt.type.localeCompare(Te.type);return Ze!=0?Ze:rt.subpath&&!Te.subpath?1:!rt.subpath&&Te.subpath?-1:!rt.subpath&&!Te.subpath?0:((_=rt.subpath)!==null&&_!==void 0?_:"").localeCompare(($=Te.subpath)!==null&&$!==void 0?$:"");case"date":return A.value<K.value?-1:A.value.equals(K.value)?0:1;case"duration":return A.value<K.value?-1:A.value.equals(K.value)?0:1;case"array":let st=A.value,Fn=K.value;for(let xe=0;xe<Math.min(st.length,Fn.length);xe++){let Je=i(st[xe],Fn[xe]);if(Je!=0)return Je}return st.length-Fn.length;case"object":let Qn=A.value,$e=K.value,bn=Array.from(Object.keys(Qn)),Xn=Array.from(Object.keys($e));bn.sort(),Xn.sort();let wn=i(bn,Xn);if(wn!=0)return wn;for(let xe of bn){let Je=i(Qn[xe],$e[xe]);if(Je!=0)return Je}return 0;case"widget":case"html":case"function":return 0}}n.compareValue=i;function s(b){var I;return(I=t(b))===null||I===void 0?void 0:I.type}n.typeOf=s;function u(b){let I=t(b);if(!I)return!1;switch(I.type){case"number":return I.value!=0;case"string":return I.value.length>0;case"boolean":return I.value;case"link":return!!I.value.path;case"date":return I.value.toMillis()!=0;case"duration":return I.value.as("seconds")!=0;case"object":return Object.keys(I.value).length>0;case"array":return I.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}n.isTruthy=u;function o(b){if(b==null)return b;if(n.isArray(b))return[].concat(b.map(I=>o(I)));if(n.isObject(b)){let I={};for(let[J,_]of Object.entries(b))I[J]=o(_);return I}else return b}n.deepCopy=o;function a(b){return typeof b=="string"}n.isString=a;function c(b){return typeof b=="number"}n.isNumber=c;function m(b){return b instanceof k}n.isDate=m;function p(b){return b instanceof S}n.isDuration=p;function g(b){return b==null}n.isNull=g;function h(b){return Array.isArray(b)}n.isArray=h;function y(b){return typeof b=="boolean"}n.isBoolean=y;function C(b){return b instanceof De}n.isLink=C;function B(b){return b instanceof Hn}n.isWidget=B;function V(b){return typeof HTMLElement!="undefined"?b instanceof HTMLElement:!1}n.isHtml=V;function Fe(b){return typeof b=="object"&&!V(b)&&!B(b)&&!h(b)&&!p(b)&&!m(b)&&!C(b)&&b!==void 0&&!g(b)}n.isObject=Fe;function G(b){return typeof b=="function"}n.isFunction=G})(qn||(qn={}));var Uu;(function(n){function e(i){return qn.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}n.isElementGroup=e;function t(i){for(let s of i)if(!e(s))return!1;return!0}n.isGrouping=t;function r(i){if(t(i)){let s=0;for(let u of i)s+=r(u.rows);return s}else return i.length}n.count=r})(Uu||(Uu={}));var De=class{constructor(e){Object.assign(this,e)}static file(e,t=!1,r){return new De({path:e,embed:t,display:r,subpath:void 0,type:"file"})}static infer(e,t=!1,r){if(e.includes("#^")){let i=e.split("#^");return De.block(i[0],i[1],t,r)}else if(e.includes("#")){let i=e.split("#");return De.header(i[0],i[1],t,r)}else return De.file(e,t,r)}static header(e,t,r,i){return new De({path:e,embed:r,display:i,subpath:dd(t),type:"header"})}static block(e,t,r,i){return new De({path:e,embed:r,display:i,subpath:t,type:"block"})}static fromObject(e){return new De(e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new De(Object.assign({},this,{path:e}))}withDisplay(e){return new De(Object.assign({},this,{display:e}))}withHeader(e){return De.header(this.path,e,this.embed,this.display)}toFile(){return De.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new De(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new De(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+Wu(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var e,t;let r=this.path.replace("|","\\|");return this.type=="header"?r+"#"+((e=this.subpath)===null||e===void 0?void 0:e.replace("|","\\|")):this.type=="block"?r+"#^"+((t=this.subpath)===null||t===void 0?void 0:t.replace("|","\\|")):r}fileName(){return Wu(this.path).replace(".md","")}},Hn=class{constructor(e){this.$widget=e}},Ki=class extends Hn{constructor(e,t){super("dataview:list-pair"),this.key=e,this.value=t}markdown(){return`${qn.toString(this.key)}: ${qn.toString(this.value)}`}},Qi=class extends Hn{constructor(e,t){super("dataview:external-link"),this.url=e,this.display=t}markdown(){var e;return`[${(e=this.display)!==null&&e!==void 0?e:this.url}](${this.url})`}},zu;(function(n){function e(u,o){return new Ki(u,o)}n.listPair=e;function t(u,o){return new Qi(u,o)}n.externalLink=t;function r(u){return u.$widget==="dataview:list-pair"}n.isListPair=r;function i(u){return u.$widget==="dataview:external-link"}n.isExternalLink=i;function s(u){return r(u)||i(u)}n.isBuiltin=s})(zu||(zu={}));var re;(function(n){function e(g){return{type:"variable",name:g}}n.variable=e;function t(g){return{type:"literal",value:g}}n.literal=t;function r(g,h,y){return{type:"binaryop",left:g,op:h,right:y}}n.binaryOp=r;function i(g,h){return{type:"index",object:g,index:h}}n.index=i;function s(g){let h=g.split("."),y=n.variable(h[0]);for(let C=1;C<h.length;C++)y=n.index(y,n.literal(h[C]));return y}n.indexVariable=s;function u(g,h){return{type:"lambda",arguments:g,value:h}}n.lambda=u;function o(g,h){return{type:"function",func:g,arguments:h}}n.func=o;function a(g){return{type:"list",values:g}}n.list=a;function c(g){return{type:"object",values:g}}n.object=c;function m(g){return{type:"negated",child:g}}n.negate=m;function p(g){return g=="<="||g=="<"||g==">"||g==">="||g=="!="||g=="="}n.isCompareOp=p,n.NULL=n.literal(null)})(re||(re={}));var et;(function(n){function e(m){return{type:"tag",tag:m}}n.tag=e;function t(m){return{type:"csv",path:m}}n.csv=t;function r(m){return{type:"folder",folder:m}}n.folder=r;function i(m,p){return{type:"link",file:m,direction:p?"incoming":"outgoing"}}n.link=i;function s(m,p,g){return{type:"binaryop",left:m,op:p,right:g}}n.binaryOp=s;function u(m,p){return{type:"binaryop",left:m,op:"&",right:p}}n.and=u;function o(m,p){return{type:"binaryop",left:m,op:"|",right:p}}n.or=o;function a(m){return{type:"negate",child:m}}n.negate=a;function c(){return{type:"empty"}}n.empty=c})(et||(et={}));var Gu=new RegExp(cs(),""),Xi={year:S.fromObject({years:1}),years:S.fromObject({years:1}),yr:S.fromObject({years:1}),yrs:S.fromObject({years:1}),month:S.fromObject({months:1}),months:S.fromObject({months:1}),mo:S.fromObject({months:1}),mos:S.fromObject({months:1}),week:S.fromObject({weeks:1}),weeks:S.fromObject({weeks:1}),wk:S.fromObject({weeks:1}),wks:S.fromObject({weeks:1}),w:S.fromObject({weeks:1}),day:S.fromObject({days:1}),days:S.fromObject({days:1}),d:S.fromObject({days:1}),hour:S.fromObject({hours:1}),hours:S.fromObject({hours:1}),hr:S.fromObject({hours:1}),hrs:S.fromObject({hours:1}),h:S.fromObject({hours:1}),minute:S.fromObject({minutes:1}),minutes:S.fromObject({minutes:1}),min:S.fromObject({minutes:1}),mins:S.fromObject({minutes:1}),m:S.fromObject({minutes:1}),second:S.fromObject({seconds:1}),seconds:S.fromObject({seconds:1}),sec:S.fromObject({seconds:1}),secs:S.fromObject({seconds:1}),s:S.fromObject({seconds:1})},es={now:()=>k.local(),today:()=>k.local().startOf("day"),yesterday:()=>k.local().startOf("day").minus(S.fromObject({days:1})),tomorrow:()=>k.local().startOf("day").plus(S.fromObject({days:1})),sow:()=>k.local().startOf("week"),"start-of-week":()=>k.local().startOf("week"),eow:()=>k.local().endOf("week"),"end-of-week":()=>k.local().endOf("week"),soy:()=>k.local().startOf("year"),"start-of-year":()=>k.local().startOf("year"),eoy:()=>k.local().endOf("year"),"end-of-year":()=>k.local().endOf("year"),som:()=>k.local().startOf("month"),"start-of-month":()=>k.local().startOf("month"),eom:()=>k.local().endOf("month"),"end-of-month":()=>k.local().endOf("month")},ts=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function hd(n){let e=-1;for(;(e=n.indexOf("|",e+1))>=0;)if(!(e>0&&n[e-1]=="\\"))return[n.substring(0,e).replace(/\\\|/g,"|"),n.substring(e+1)];return[n.replace(/\\\|/g,"|"),void 0]}function md(n){let[e,t]=hd(n);return De.infer(e,!1,t)}function Ln(n,e,t){return d.exports.seqMap(n,d.exports.seq(d.exports.optWhitespace,e,d.exports.optWhitespace,n).many(),(r,i)=>{if(i.length==0)return r;let s=t(r,i[0][1],i[0][3]);for(let u=1;u<i.length;u++)s=t(s,i[u][1],i[u][3]);return s})}function pd(n,...e){return d.exports.custom((t,r)=>(i,s)=>{let u=n._(i,s);if(!u.status)return u;for(let o of e){let a=o(u.value)._(i,u.index);if(!a.status)return u;u=a}return u})}var Ue=d.exports.createLanguage({number:n=>d.exports.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:n=>d.exports.string('"').then(d.exports.alt(n.escapeCharacter,d.exports.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(d.exports.string('"')).desc("string"),escapeCharacter:n=>d.exports.string("\\").then(d.exports.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:n=>d.exports.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:n=>d.exports.seqMap(d.exports.string("#"),d.exports.alt(d.exports.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,t)=>e+t.join("")).desc("tag ('#hello/stuff')"),identifier:n=>d.exports.seqMap(d.exports.alt(d.exports.regexp(/\p{Letter}/u),d.exports.regexp(Gu).desc("text")),d.exports.alt(d.exports.regexp(/[0-9\p{Letter}_-]/u),d.exports.regexp(Gu).desc("text")).many(),(e,t)=>e+t.join("")).desc("variable identifier"),link:n=>d.exports.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>md(e)).desc("file link"),embedLink:n=>d.exports.seqMap(d.exports.string("!").atMost(1),n.link,(e,t)=>(e.length>0&&(t.embed=!0),t)).desc("file link"),binaryPlusMinus:n=>d.exports.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:n=>d.exports.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:n=>d.exports.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:n=>d.exports.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:n=>d.exports.seqMap(d.exports.regexp(/\d{4}/),d.exports.string("-"),d.exports.regexp(/\d{2}/),(e,t,r)=>k.fromObject({year:Number.parseInt(e),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:n=>d.exports.alt(...Object.keys(es).sort((e,t)=>t.length-e.length).map(d.exports.string)),date:n=>pd(n.rootDate,e=>d.exports.seqMap(d.exports.string("-"),d.exports.regexp(/\d{2}/),(t,r)=>e.set({day:Number.parseInt(r)})),e=>d.exports.seqMap(d.exports.string("T"),d.exports.regexp(/\d{2}/),(t,r)=>e.set({hour:Number.parseInt(r)})),e=>d.exports.seqMap(d.exports.string(":"),d.exports.regexp(/\d{2}/),(t,r)=>e.set({minute:Number.parseInt(r)})),e=>d.exports.seqMap(d.exports.string(":"),d.exports.regexp(/\d{2}/),(t,r)=>e.set({second:Number.parseInt(r)})),e=>d.exports.alt(d.exports.seqMap(d.exports.string("."),d.exports.regexp(/\d{3}/),(t,r)=>e.set({millisecond:Number.parseInt(r)})),d.exports.succeed(e)),e=>d.exports.alt(d.exports.seqMap(d.exports.string("+").or(d.exports.string("-")),d.exports.regexp(/\d{1,2}(:\d{2})?/),(t,r)=>e.setZone("UTC"+t+r,{keepLocalTime:!0})),d.exports.seqMap(d.exports.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),d.exports.seqMap(d.exports.string("["),d.exports.regexp(/[0-9A-Za-z+-\/]+/u),d.exports.string("]"),(t,r,i)=>e.setZone(r,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:n=>d.exports.alt(n.dateShorthand.map(e=>es[e]()),n.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:n=>d.exports.alt(...Object.keys(Xi).sort((e,t)=>t.length-e.length).map(d.exports.string)),duration:n=>d.exports.seqMap(n.number,d.exports.optWhitespace,n.durationType,(e,t,r)=>Xi[r].mapUnits(i=>i*e)).sepBy1(d.exports.string(",").trim(d.exports.optWhitespace).or(d.exports.optWhitespace)).map(e=>e.reduce((t,r)=>t.plus(r))).desc("duration like 4hr2min"),rawNull:n=>d.exports.string("null"),tagSource:n=>n.tag.map(e=>et.tag(e)),csvSource:n=>d.exports.seqMap(d.exports.string("csv(").skip(d.exports.optWhitespace),n.string,d.exports.string(")"),(e,t,r)=>et.csv(t)),linkIncomingSource:n=>n.link.map(e=>et.link(e.path,!0)),linkOutgoingSource:n=>d.exports.seqMap(d.exports.string("outgoing(").skip(d.exports.optWhitespace),n.link,d.exports.string(")"),(e,t,r)=>et.link(t.path,!1)),folderSource:n=>n.string.map(e=>et.folder(e)),parensSource:n=>d.exports.seqMap(d.exports.string("("),d.exports.optWhitespace,n.source,d.exports.optWhitespace,d.exports.string(")"),(e,t,r,i,s)=>r),negateSource:n=>d.exports.seqMap(d.exports.alt(d.exports.string("-"),d.exports.string("!")),n.atomSource,(e,t)=>et.negate(t)),atomSource:n=>d.exports.alt(n.parensSource,n.negateSource,n.linkOutgoingSource,n.linkIncomingSource,n.folderSource,n.tagSource,n.csvSource),binaryOpSource:n=>Ln(n.atomSource,n.binaryBooleanOp.map(e=>e),et.binaryOp),source:n=>n.binaryOpSource,variableField:n=>n.identifier.chain(e=>ts.includes(e.toUpperCase())?d.exports.fail("Variable fields cannot be a keyword ("+ts.join(" or ")+")"):d.exports.succeed(re.variable(e))).desc("variable"),numberField:n=>n.number.map(e=>re.literal(e)).desc("number"),stringField:n=>n.string.map(e=>re.literal(e)).desc("string"),boolField:n=>n.bool.map(e=>re.literal(e)).desc("boolean"),dateField:n=>d.exports.seqMap(d.exports.string("date("),d.exports.optWhitespace,n.datePlus,d.exports.optWhitespace,d.exports.string(")"),(e,t,r,i,s)=>re.literal(r)).desc("date"),durationField:n=>d.exports.seqMap(d.exports.string("dur("),d.exports.optWhitespace,n.duration,d.exports.optWhitespace,d.exports.string(")"),(e,t,r,i,s)=>re.literal(r)).desc("duration"),nullField:n=>n.rawNull.map(e=>re.NULL),linkField:n=>n.link.map(e=>re.literal(e)),listField:n=>n.field.sepBy(d.exports.string(",").trim(d.exports.optWhitespace)).wrap(d.exports.string("[").skip(d.exports.optWhitespace),d.exports.optWhitespace.then(d.exports.string("]"))).map(e=>re.list(e)).desc("list ('[1, 2, 3]')"),objectField:n=>d.exports.seqMap(n.identifier.or(n.string),d.exports.string(":").trim(d.exports.optWhitespace),n.field,(e,t,r)=>({name:e,value:r})).sepBy(d.exports.string(",").trim(d.exports.optWhitespace)).wrap(d.exports.string("{").skip(d.exports.optWhitespace),d.exports.optWhitespace.then(d.exports.string("}"))).map(e=>{let t={};for(let r of e)t[r.name]=r.value;return re.object(t)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:n=>d.exports.alt(n.date,n.duration.map(e=>Go(e)),n.string,n.tag,n.embedLink,n.bool,n.number,n.rawNull),inlineFieldList:n=>n.atomInlineField.sepBy(d.exports.string(",").trim(d.exports.optWhitespace).lookahead(n.atomInlineField)),inlineField:n=>d.exports.alt(d.exports.seqMap(n.atomInlineField,d.exports.string(",").trim(d.exports.optWhitespace),n.inlineFieldList,(e,t,r)=>[e].concat(r)),n.atomInlineField),atomField:n=>d.exports.alt(n.embedLink.map(e=>re.literal(e)),n.negatedField,n.linkField,n.listField,n.objectField,n.lambdaField,n.parensField,n.boolField,n.numberField,n.stringField,n.dateField,n.durationField,n.nullField,n.variableField),indexField:n=>d.exports.seqMap(n.atomField,d.exports.alt(n.dotPostfix,n.indexPostfix,n.functionPostfix).many(),(e,t)=>{let r=e;for(let i of t)switch(i.type){case"dot":r=re.index(r,re.literal(i.field));break;case"index":r=re.index(r,i.field);break;case"function":r=re.func(r,i.fields);break}return r}),negatedField:n=>d.exports.seqMap(d.exports.string("!"),n.indexField,(e,t)=>re.negate(t)).desc("negated field"),parensField:n=>d.exports.seqMap(d.exports.string("("),d.exports.optWhitespace,n.field,d.exports.optWhitespace,d.exports.string(")"),(e,t,r,i,s)=>r),lambdaField:n=>d.exports.seqMap(n.identifier.sepBy(d.exports.string(",").trim(d.exports.optWhitespace)).wrap(d.exports.string("(").trim(d.exports.optWhitespace),d.exports.string(")").trim(d.exports.optWhitespace)),d.exports.string("=>").trim(d.exports.optWhitespace),n.field,(e,t,r)=>({type:"lambda",arguments:e,value:r})),dotPostfix:n=>d.exports.seqMap(d.exports.string("."),n.identifier,(e,t)=>({type:"dot",field:t})),indexPostfix:n=>d.exports.seqMap(d.exports.string("["),d.exports.optWhitespace,n.field,d.exports.optWhitespace,d.exports.string("]"),(e,t,r,i,s)=>({type:"index",field:r})),functionPostfix:n=>d.exports.seqMap(d.exports.string("("),d.exports.optWhitespace,n.field.sepBy(d.exports.string(",").trim(d.exports.optWhitespace)),d.exports.optWhitespace,d.exports.string(")"),(e,t,r,i,s)=>({type:"function",fields:r})),binaryMulDivField:n=>Ln(n.indexField,n.binaryMulDiv,re.binaryOp),binaryPlusMinusField:n=>Ln(n.binaryMulDivField,n.binaryPlusMinus,re.binaryOp),binaryCompareField:n=>Ln(n.binaryPlusMinusField,n.binaryCompareOp,re.binaryOp),binaryBooleanField:n=>Ln(n.binaryCompareField,n.binaryBooleanOp,re.binaryOp),binaryOpField:n=>n.binaryBooleanField,field:n=>n.binaryOpField});function gd(n){try{return jr.success(Ue.field.tryParse(n))}catch(e){return jr.failure(""+e)}}var qr;(function(n){function e(r,i){return{name:r,field:i}}n.named=e;function t(r,i){return{field:r,direction:i}}n.sortBy=t})(qr||(qr={}));function Dd(n){return d.exports.custom((e,t)=>(r,i)=>{let s=n._(r,i);return s.status?Object.assign({},s,{value:[s.value,r.substring(i,s.index)]}):s})}function yd(n){return n.split(/[\r\n]+/).map(e=>e.trim()).join("")}var Fd=d.exports.createLanguage({queryType:n=>d.exports.alt(d.exports.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:n=>d.exports.seqMap(Ue.field.skip(d.exports.whitespace),d.exports.regexp(/AS/i).skip(d.exports.whitespace),Ue.identifier.or(Ue.string),(e,t,r)=>qr.named(r,e)),namedField:n=>d.exports.alt(n.explicitNamedField,Dd(Ue.field).map(([e,t])=>qr.named(yd(t),e))),sortField:n=>d.exports.seqMap(Ue.field.skip(d.exports.optWhitespace),d.exports.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,t)=>{let r=t.length==0?"ascending":t[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:e,direction:r}}),headerClause:n=>n.queryType.skip(d.exports.whitespace).chain(e=>{switch(e){case"table":return d.exports.seqMap(d.exports.regexp(/WITHOUT\s+ID/i).skip(d.exports.optWhitespace).atMost(1),d.exports.sepBy(n.namedField,d.exports.string(",").trim(d.exports.optWhitespace)),(t,r)=>({type:"table",fields:r,showId:t.length==0}));case"list":return d.exports.seqMap(d.exports.regexp(/WITHOUT\s+ID/i).skip(d.exports.optWhitespace).atMost(1),Ue.field.atMost(1),(t,r)=>({type:"list",format:r.length==1?r[0]:void 0,showId:t.length==0}));case"task":return d.exports.succeed({type:"task"});case"calendar":return d.exports.seqMap(n.namedField,t=>({type:"calendar",showId:!0,field:t}));default:return d.exports.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:n=>d.exports.seqMap(d.exports.regexp(/FROM/i),d.exports.whitespace,Ue.source,(e,t,r)=>r),whereClause:n=>d.exports.seqMap(d.exports.regexp(/WHERE/i),d.exports.whitespace,Ue.field,(e,t,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:n=>d.exports.seqMap(d.exports.regexp(/SORT/i),d.exports.whitespace,n.sortField.sepBy1(d.exports.string(",").trim(d.exports.optWhitespace)),(e,t,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:n=>d.exports.seqMap(d.exports.regexp(/LIMIT/i),d.exports.whitespace,Ue.field,(e,t,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:n=>d.exports.seqMap(d.exports.regexp(/FLATTEN/i).skip(d.exports.whitespace),n.namedField,(e,t)=>({type:"flatten",field:t})).desc("FLATTEN <value> [AS <name>]"),groupByClause:n=>d.exports.seqMap(d.exports.regexp(/GROUP BY/i).skip(d.exports.whitespace),n.namedField,(e,t)=>({type:"group",field:t})).desc("GROUP BY <value> [AS <name>]"),clause:n=>d.exports.alt(n.fromClause,n.whereClause,n.sortByClause,n.limitClause,n.groupByClause,n.flattenClause),query:n=>d.exports.seqMap(n.headerClause.trim(d.exports.optWhitespace),n.fromClause.trim(d.exports.optWhitespace).atMost(1),n.clause.trim(d.exports.optWhitespace).many(),(e,t,r)=>({header:e,source:t.length==0?et.folder(""):t[0],operations:r,settings:ls}))}),bd=n=>{var e;return n?(e=n.plugins.plugins.dataview)===null||e===void 0?void 0:e.api:window.DataviewAPI},wd=n=>n.plugins.enabledPlugins.has("dataview");tt.DATE_SHORTHANDS=es;tt.DURATION_TYPES=Xi;tt.EXPRESSION=Ue;tt.KEYWORDS=ts;tt.QUERY_LANGUAGE=Fd;tt.getAPI=bd;tt.isPluginEnabled=wd;tt.parseField=gd});var oa=gt(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.stringifyFrontmatter=void 0;var Bd=require("obsidian");function Nd(n){return`---
${(0,Bd.stringifyYaml)(n)}---`}Jr.stringifyFrontmatter=Nd});var Ds=gt(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.numberToString=se.equalOrIncludes=se.isFalsy=se.isTruthy=se.arrayEquals=se.mod=se.clamp=se.removeFileExtension=se.isPath=se.getFileName=void 0;function Ld(n){var e;return(e=n.split("/").at(-1))!==null&&e!==void 0?e:n}se.getFileName=Ld;function Vd(n){return n.split("/").length>1}se.isPath=Vd;function $d(n){let e=n.split(".");if(e.length===1)return n;{let t=e[0];for(let r=1;r<e.length-1;r++)t+="."+e[r];return t}}se.removeFileExtension=$d;function Rd(n,e,t){return Math.min(Math.max(n,e),t)}se.clamp=Rd;function Pd(n,e){return(n%e+e)%e}se.mod=Pd;function jd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}se.arrayEquals=jd;function qd(n){return!!n}se.isTruthy=qd;function Hd(n){return!n}se.isFalsy=Hd;function Wd(n,e){return n===e||n.includes(e)||e.includes(n)}se.equalOrIncludes=Wd;function Ud(n){return n+""}se.numberToString=Ud});var aa=gt(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});yn.ParserUtils=yn.EnclosingPair=void 0;var Nt=Ds(),Ye=ur(),ys=class{constructor(e,t){if((0,Nt.isFalsy)(e))throw new Ye.OPDUtilsParsingError("opening string must not be empty");this.openingEqualsClosing=(0,Nt.isFalsy)(t)||e===t,this.openingEqualsClosing?(this._openingString=e,this._closingString=e):(this._openingString=e,this._closingString=t)}get openingString(){return this._openingString}get closingString(){return this.openingEqualsClosing?this._openingString:this._closingString}overlaps(e){return(0,Nt.equalOrIncludes)(this.openingString,e.openingString)||(0,Nt.equalOrIncludes)(this.openingString,e.closingString)||(0,Nt.equalOrIncludes)(this.closingString,e.openingString)||(0,Nt.equalOrIncludes)(this.closingString,e.closingString)}equals(e){return(0,Nt.isFalsy)(e)?!1:this.openingString===e.openingString&&this.closingString===e.closingString}toString(){return JSON.stringify(this)}};yn.EnclosingPair=ys;var ee=class{static split(e,t,r){if(!e)throw new Ye.OPDUtilsParsingError("string must not be empty");if(!t)throw new Ye.OPDUtilsParsingError("separator must not be empty");let i="",s=[];if(r){let u=ee.numberOfOccurrences(e,r.openingString),o=ee.numberOfOccurrences(e,r.closingString),a=0;e:for(let c=0;c<e.length;c++)if(a===0&&ee.isStringAt(e,t,c)?(s.push(i),i="",c+=t.length-1):i+=e[c],r.openingEqualsClosing){if(ee.isStringAt(e,r.openingString,c)){if(!(a%2===0&&u===1))if(a%2===0){a+=1;for(let m=1;m<r.openingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}else{a-=1;for(let m=1;m<r.closingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}u-=1}}else if(ee.isStringAt(e,r.openingString,c)){if(u<=o){a+=1;for(let m=1;m<r.openingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}u-=1}else if(ee.isStringAt(e,r.closingString,c)){if(a>0){a-=1;for(let m=1;m<r.closingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}o-=1}}else for(let u=0;u<e.length;u++)ee.isStringAt(e,t,u)?(s.push(i),i="",u+=t.length-1):i+=e[u];return s.push(i),s}static removeInBetween(e,t){if(!e)throw new Ye.OPDUtilsParsingError("string must not be empty");let r=ee.numberOfOccurrences(e,t.openingString),i=ee.numberOfOccurrences(e,t.closingString),s=0,u="";for(let o=0;o<e.length;o++){if(t.openingEqualsClosing){if(ee.isStringAt(e,t.openingString,o)){if(!(s%2===0&&r===1)){if(s%2===0){if(s+=1,o+=t.openingString.length,o>=e.length)break}else if(s-=1,o+=t.closingString.length,o>=e.length)break}r-=1}}else if(ee.isStringAt(e,t.openingString,o)){if(r<=i&&(s+=1,o+=t.openingString.length,o>=e.length))break;r-=1}else if(ee.isStringAt(e,t.closingString,o)){if(s>0&&(s-=1,o+=t.closingString.length,o>=e.length))break;i-=1}s===0&&(u+=e[o])}return u}static getInBetween(e,t){if(!e)throw new Ye.OPDUtilsParsingError("string must not be empty");let r=ee.numberOfOccurrences(e,t.openingString),i=ee.numberOfOccurrences(e,t.closingString),s=0,u="",o=[];e:for(let a=0;a<e.length;a++)if(t.openingEqualsClosing)if(ee.isStringAt(e,t.openingString,a)){if(!(s%2===0&&r===1))if(s%2===0){s+=1,u+=e[a];for(let c=1;c<t.openingString.length;c++)if(a+=1,u+=e[a],a>=e.length)break e}else{s-=1,u+=e[a];for(let c=1;c<t.closingString.length;c++)if(a+=1,u+=e[a],a>e.length)break e;o.push(u),u=""}r-=1}else s>=1&&(u+=e[a]);else if(ee.isStringAt(e,t.openingString,a)){if(r<=i){s+=1,u+=e[a];for(let c=1;c<t.openingString.length;c++)if(a+=1,u+=e[a],a>=e.length)break e}r-=1}else if(ee.isStringAt(e,t.closingString,a)){if(s>0){s-=1,u+=e[a];for(let c=1;c<t.closingString.length;c++)if(a+=1,u+=e[a],a>e.length)break e;s===0&&(o.push(u),u="")}i-=1}else s>=1&&(u+=e[a]);return o.length===0?"":o.length===1?o[0].substring(t.openingString.length,o[0].length-t.closingString.length):o.map(a=>a.substring(t.openingString.length,a.length-t.closingString.length))}static isStringAt(e,t,r){if(r<0)throw new Ye.OPDUtilsParsingError("index must be greater than 0");if(r>=e.length)throw new Ye.OPDUtilsParsingError("index out of bounds of string");if(!e)throw new Ye.OPDUtilsParsingError("string must not be empty");if(!t)throw new Ye.OPDUtilsParsingError("sub string must not be empty");for(let i=0;i<t.length;i++)if(e[i+r]!==t[i])return!1;return!0}static contains(e,t){return ee.numberOfOccurrences(e,t)>0}static numberOfOccurrences(e,t){if(!e)throw new Ye.OPDUtilsParsingError("string must not be empty");if(!t)throw new Ye.OPDUtilsParsingError("sub string must not be empty");let r=0;for(let i=0;i<e.length;i++)ee.isStringAt(e,t,i)&&(r+=1);return r}};yn.ParserUtils=ee});var la=gt(nt=>{"use strict";var zd=nt&&nt.__createBinding||(Object.create?function(n,e,t,r){r===void 0&&(r=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,r,i)}:function(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}),Kr=nt&&nt.__exportStar||function(n,e){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&zd(e,n,t)};Object.defineProperty(nt,"__esModule",{value:!0});Kr(aa(),nt);Kr(xn(),nt);Kr(ur(),nt);Kr(Ds(),nt)});var ca=gt(Lt=>{"use strict";var Gd=Lt&&Lt.__awaiter||function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(u){u(s)})}return new(t||(t=Promise))(function(s,u){function o(m){try{c(r.next(m))}catch(p){u(p)}}function a(m){try{c(r.throw(m))}catch(p){u(p)}}function c(m){m.done?s(m.value):i(m.value).then(o,a)}c((r=r.apply(n,e||[])).next())})};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Internal=void 0;var Yd=require("obsidian"),Fs=oa(),Kn=la(),Zd;(function(n){n.frontMatterRexExpPattern="^(---)\\n[\\s\\S]*?\\n---";function e(g){let y=new RegExp(n.frontMatterRexExpPattern).exec(g);if(!y)return{};let C=y[0];return C?(C=C.substring(4),C=C.substring(0,C.length-3),t(C)):{}}n.getMetaDataFromFileContent=e;function t(g){if(!g)return{};let h=(0,Yd.parseYaml)(g);return h||{}}n.getMetaDataFromYAML=t;function r(g,h){var y;let C=(y=h.app.metadataCache.getFileCache(g))===null||y===void 0?void 0:y.frontmatter;if(C)C=Object.assign({},C),delete C.position;else return{};return C}n.getMetadataFromFileCache=r;function i(g){return g.replace(new RegExp(n.frontMatterRexExpPattern),"")}n.removeFrontmatter=i;function s(g,h,y){return Gd(this,void 0,void 0,function*(){let C=yield y.app.vault.cachedRead(h);C=i(C),C.startsWith(`

`)?C=`${(0,Fs.stringifyFrontmatter)(g)}${C}`:C.startsWith(`

`)?C=`${(0,Fs.stringifyFrontmatter)(g)}
${C}`:C=`${(0,Fs.stringifyFrontmatter)(g)}

${C}`,yield y.app.vault.modify(h,C)})}n.updateFrontmatter=s;function u(g,h){return o(g,h)!==void 0}n.hasField=u;function o(g,h){return(0,Kn.traverseObject)(g,h)}n.getField=o;function a(g,h){let{parent:y,child:C}=(0,Kn.traverseObjectToParent)(g,h);if(y.value===void 0)throw Error(`The parent of "${g}" does not exist in Object, can not delete child from non existing parent`);if(Array.isArray(y.value)){let B=Number.parseInt(C.key);if(Number.isNaN(B))return h;y.value.splice(B,1)}else delete y.value[C.key];return h}n.deleteField=a;function c(g,h,y){let{parent:C,child:B}=(0,Kn.traverseObjectToParent)(g,y);if(C.value===void 0)throw Error(`The parent of "${g}" does not exist in Object, please create the parent first`);if(B.value===void 0)throw Error(`Field with key "${g}" does not exist in Object`);return C.value[B.key]=h,y}n.updateField=c;function m(g,h,y){let{parent:C,child:B}=(0,Kn.traverseObjectToParent)(g,y);if(C.value===void 0)throw Error(`The parent of "${g}" does not exist in Object, please create the parent first`);if(B.value!==void 0)throw Error(`Field with key "${g}" does already exist in Object`);return C.value[B.key]=h,y}n.insertField=m;function p(g,h,y){let{parent:C,child:B}=(0,Kn.traverseObjectToParent)(g,y);if(C.value===void 0)throw Error(`The parent of "${g}" does not exist in Object, please create the parent first`);return C.value[B.key]=h,y}n.updateOrInsertField=p})(Zd=Lt.Internal||(Lt.Internal={}))});var Kd={};ka(Kd,{default:()=>ti});module.exports=Ma(Kd);var fa=require("obsidian");var Be=require("obsidian");var $s=require("obsidian");var Aa=require("obsidian"),As=Cn(xn());function li(n){var e;return(e=n.split("/").at(-1))!=null?e:n}function Bs(n){return n.split("/").length>1}function _n(n){let e=n.split(".");if(e.length===1)return n;{let t=e[0];for(let r=1;r<e.length-1;r++)t+="."+e[r];return t}}function Ht(n,e){return(n%e+e)%e}function Ns(n,e){if(n.length!==e.length)return!1;for(let t of n)if(!e.contains(t))return!1;return!0}function Ls(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function Re(n){return!!n}function or(n){return!n}function Sn(n,e){return n===e||n.includes(e)||e.includes(n)}function ci(n){return n+""}function Vs(n,e){var s;if(n[0]==="")throw new Error("can not traverse to parent on self reference");let t=n.slice(0,-1),r=(s=n.at(-1))!=null?s:"",i=(0,As.traverseObjectByPath)(t,e);return{parent:{key:t,value:i},child:{key:r,value:i[r]}}}function Wt(n){return app.vault.adapter.getResourcePath(n)}var Ba=["January","February","March","April","May","June","July","August","September","October","November","December"],Ut=[{index:0,name:"Sunday",shortName:"Su"},{index:1,name:"Monday",shortName:"Mo"},{index:2,name:"Tuesday",shortName:"Tu"},{index:3,name:"Wednesday",shortName:"We"},{index:4,name:"Thursday",shortName:"Th"},{index:5,name:"Friday",shortName:"Fr"},{index:6,name:"Saturday",shortName:"Sa"}],di=Ut[1];function fi(n){di=n}function hi(n){return Ba[n]}function Rs(n,e){let t=(0,$s.moment)(new Date(e,n)).daysInMonth(),r=new Array(42).fill(void 0),i=Na(new Date(e,n,1));for(let s=0;s<t;s++)r[s+i]=s+1;return r=r[r.length-7]?r:r.slice(0,-7),r=r[r.length-7]?r:r.slice(0,-7),r}function Na(n){return Ht(n.getDay()-di.index,7)}function mi(){let n=Ut.map(e=>({index:Ht(e.index-di.index,7),name:e.name,shortName:e.shortName})).sort((e,t)=>e.index-t.index);return console.log(n),n.map(e=>e.shortName)}function Ps(){let n=0;return()=>++n}var Ke={devMode:!1,ignoreCodeBlockRestrictions:!1,preferredDateFormat:"YYYY-MM-DD",useUsDateInputOrder:!1,firstWeekday:Ut[1],syncInterval:200,minSyncInterval:50,maxSyncInterval:1e3,inputTemplates:""},ar=class extends Be.PluginSettingTab{constructor(t,r){super(t,r);this.plugin=r}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Meta Bind Plugin Settings"}),new Be.Setting(t).setName("Sync interval").setDesc(`The interval in milli-seconds between disk writes. Changing this number is not recommended except if your hard drive is exceptionally slow. Standard: ${Ke.syncInterval}; Minimum: ${Ke.minSyncInterval}; Maximum: ${Ke.maxSyncInterval}`).addText(i=>{i.setValue(this.plugin.settings.syncInterval.toString()),i.onChange(s=>{this.plugin.settings.syncInterval=Number.parseInt(s),Number.isNaN(this.plugin.settings.syncInterval)&&(this.plugin.settings.syncInterval=Ke.syncInterval),this.plugin.settings.syncInterval<Ke.minSyncInterval&&(this.plugin.settings.syncInterval=Ke.minSyncInterval),this.plugin.settings.syncInterval>Ke.maxSyncInterval&&(this.plugin.settings.syncInterval=Ke.maxSyncInterval),this.plugin.saveSettings()})}),new Be.Setting(t).setName("Date format").setDesc("The date format to be used by this plugin. Changing this setting will break the parsing of existing date inputs. Here is a list of all available date tokes https://momentjs.com/docs/#/displaying/.").addText(i=>{i.setValue(this.plugin.settings.preferredDateFormat),i.onChange(s=>{this.plugin.settings.preferredDateFormat=s,this.plugin.saveSettings()})}),new Be.Setting(t).setName("Use US date input field order").setDesc("When enabled the month input is before the day input.").addToggle(i=>{i.setValue(this.plugin.settings.useUsDateInputOrder),i.onChange(s=>{this.plugin.settings.useUsDateInputOrder=s,this.plugin.saveSettings()})}),new Be.Setting(t).setName("First Weekday").setDesc("Specify the first weekday for the datepicker.").addDropdown(i=>{for(let s of Ut)i.addOption(s.name,s.name);i.setValue(this.plugin.settings.firstWeekday.name),i.onChange(s=>{let u=Ut.find(o=>o.name===s);this.plugin.settings.firstWeekday=u,this.plugin.saveSettings()})}),new Be.Setting(t).setName("Templates").setDesc("You can specify templates here, and access them using `INPUT[template_name][overrides (optional)]` in your notes.");let r=new Be.TextAreaComponent(t);r.setValue(this.plugin.settings.inputTemplates),r.setPlaceholder("template_name -> INPUT[input_type(argument(value)):bind_target]"),r.inputEl.style.width="100%",r.inputEl.style.height="200px",r.onChange(i=>{this.plugin.settings.inputTemplates=i,this.plugin.saveSettings()}),new Be.Setting(t).setName("Dev Mode").setDesc("Enable dev mode. Not recommended unless you want to debug this plugin.").addToggle(i=>{i.setValue(this.plugin.settings.devMode),i.onChange(s=>{this.plugin.settings.devMode=s,this.plugin.saveSettings()})}),new Be.Setting(t).setName("Disable Code Block Restrictions").setDesc("Disable restrictions on which input fields can be created in which code blocks. Not recommended unless you know what you are doing.").addToggle(i=>{i.setValue(this.plugin.settings.ignoreCodeBlockRestrictions),i.onChange(s=>{this.plugin.settings.ignoreCodeBlockRestrictions=s,this.plugin.saveSettings()})})}};var ua=require("obsidian");var U=class{constructor(e){this.renderChild=e,this.onValueChange=t=>{this.renderChild.readSignal.set(t)},this.renderChild.writeSignal.registerListener({callback:t=>{this.isEqualValue(t)||this.setValue(t)}})}};U.allowBlock=!0,U.allowInline=!0;var js=require("obsidian");var M=class extends Error{constructor(e){super(`[MB_INTERNAL_ERROR - please report this error here https://github.com/mProjectsCode/obsidian-meta-bind-plugin/issues] ${e}`)}},j=class extends Error{constructor(e){super(`[MB_PARSING_ERROR] ${e}`)}},ct=class extends Error{constructor(e){super(`[MB_BIND_TARGET_ERROR] ${e}`)}},Ee=class extends Error{constructor(e){super(`[MB_VALUE_ERROR] ${e}`)}},Pe=class extends Error{constructor(e){super(`[MB_ARGUMENT_ERROR] ${e}`)}};var zt=class extends U{getValue(){if(!this.toggleComponent)throw new M("toggle input component is undefined");return this.toggleComponent.getValue()}setValue(t){if(!this.toggleComponent)throw new M("toggle input component is undefined");t!=null&&typeof t=="boolean"?this.toggleComponent.setValue(t):(console.warn(new Ee(`invalid value '${t}' at toggleInputField ${this.renderChild.uuid}`)),this.toggleComponent.setValue(!1))}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return!1}getHtmlElement(){if(!this.toggleComponent)throw new M("toggle input component is undefined");return this.toggleComponent.toggleEl}render(t){console.debug(`meta-bind | ToggleInputField >> render ${this.renderChild.uuid}`);let r=new js.ToggleComponent(t);r.setValue(this.renderChild.getInitialValue()),r.onChange(this.onValueChange),this.toggleComponent=r}destroy(){}};var qs=require("obsidian");var Gt=class extends U{getValue(){if(!this.textComponent)throw new M("text input component is undefined");return this.textComponent.getValue()}setValue(t){if(!this.textComponent)throw new M("text input component is undefined");t!=null&&typeof t=="string"?this.textComponent.setValue(t):(console.warn(new Ee(`invalid value '${t}' at textInputField ${this.renderChild.uuid}`)),this.textComponent.setValue(""))}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return""}getHtmlElement(){if(!this.textComponent)throw new M("text input component is undefined");return this.textComponent.inputEl}render(t){console.debug(`meta-bind | TextInputField >> render ${this.renderChild.uuid}`);let r=new qs.TextComponent(t);r.setValue(this.renderChild.getInitialValue()),r.onChange(this.onValueChange),this.textComponent=r}destroy(){}};var Hs=require("obsidian");var Dt=class{constructor(e,t){if(or(e))throw new M("opening string must not be empty");this.openingEqualsClosing=or(t)||e===t,this.openingEqualsClosing?(this._openingString=e,this._closingString=e):(this._openingString=e,this._closingString=t)}get openingString(){return this._openingString}get closingString(){return this.openingEqualsClosing?this._openingString:this._closingString}overlaps(e){return Sn(this.openingString,e.openingString)||Sn(this.openingString,e.closingString)||Sn(this.closingString,e.openingString)||Sn(this.closingString,e.closingString)}equals(e){return or(e)?!1:this.openingString===e.openingString&&this.closingString===e.closingString}toString(){return JSON.stringify(this)}},R=class{static split(e,t,r){if(!e)throw new M("string must not be empty");if(!t)throw new M("separator must not be empty");let i="",s=[];if(r){let u=R.numberOfOccurrences(e,r.openingString),o=R.numberOfOccurrences(e,r.closingString),a=0;e:for(let c=0;c<e.length;c++)if(a===0&&R.isStringAt(e,t,c)?(s.push(i),i="",c+=t.length-1):i+=e[c],r.openingEqualsClosing){if(R.isStringAt(e,r.openingString,c)){if(!(a%2===0&&u===1))if(a%2===0){a+=1;for(let m=1;m<r.openingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}else{a-=1;for(let m=1;m<r.closingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}u-=1}}else if(R.isStringAt(e,r.openingString,c)){if(u<=o){a+=1;for(let m=1;m<r.openingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}u-=1}else if(R.isStringAt(e,r.closingString,c)){if(a>0){a-=1;for(let m=1;m<r.closingString.length;m++)if(c+=1,i+=e[c],c>=e.length)break e}o-=1}}else for(let u=0;u<e.length;u++)R.isStringAt(e,t,u)?(s.push(i),i="",u+=t.length-1):i+=e[u];return s.push(i),s}static removeInBetween(e,t){if(!e)throw new M("string must not be empty");let r=R.numberOfOccurrences(e,t.openingString),i=R.numberOfOccurrences(e,t.closingString),s=0,u="";for(let o=0;o<e.length;o++){if(t.openingEqualsClosing){if(R.isStringAt(e,t.openingString,o)){if(!(s%2===0&&r===1)){if(s%2===0){if(s+=1,o+=t.openingString.length,o>=e.length)break}else if(s-=1,o+=t.closingString.length,o>=e.length)break}r-=1}}else if(R.isStringAt(e,t.openingString,o)){if(r<=i&&(s+=1,o+=t.openingString.length,o>=e.length))break;r-=1}else if(R.isStringAt(e,t.closingString,o)){if(s>0&&(s-=1,o+=t.closingString.length,o>=e.length))break;i-=1}s===0&&(u+=e[o])}return u}static getInBetween(e,t){if(!e)throw new M("string must not be empty");let r=R.numberOfOccurrences(e,t.openingString),i=R.numberOfOccurrences(e,t.closingString),s=0,u="",o=[];e:for(let a=0;a<e.length;a++)if(t.openingEqualsClosing)if(R.isStringAt(e,t.openingString,a)){if(!(s%2===0&&r===1))if(s%2===0){s+=1,u+=e[a];for(let c=1;c<t.openingString.length;c++)if(a+=1,u+=e[a],a>=e.length)break e}else{s-=1,u+=e[a];for(let c=1;c<t.closingString.length;c++)if(a+=1,u+=e[a],a>e.length)break e;o.push(u),u=""}r-=1}else s>=1&&(u+=e[a]);else if(R.isStringAt(e,t.openingString,a)){if(r<=i){s+=1,u+=e[a];for(let c=1;c<t.openingString.length;c++)if(a+=1,u+=e[a],a>=e.length)break e}r-=1}else if(R.isStringAt(e,t.closingString,a)){if(s>0){s-=1,u+=e[a];for(let c=1;c<t.closingString.length;c++)if(a+=1,u+=e[a],a>e.length)break e;s===0&&(o.push(u),u="")}i-=1}else s>=1&&(u+=e[a]);return o.length===0?"":o.length===1?o[0].substring(t.openingString.length,o[0].length-t.closingString.length):o.map(a=>a.substring(t.openingString.length,a.length-t.closingString.length))}static isStringAt(e,t,r){if(r<0)throw new M("index must be greater than 0");if(r>=e.length)throw new M("index out of bounds of string");if(!e)throw new M("string must not be empty");if(!t)throw new M("sub string must not be empty");for(let i=0;i<t.length;i++)if(e[i+r]!==t[i])return!1;return!0}static contains(e,t){return R.numberOfOccurrences(e,t)>0}static numberOfOccurrences(e,t){if(!e)throw new M("string must not be empty");if(!t)throw new M("sub string must not be empty");let r=0;for(let i=0;i<e.length;i++)R.isStringAt(e,t,i)&&(r+=1);return r}};var ue=class{constructor(){this.identifier="invalid";this.allowedInputFields=[];this.requiresValue=!1;this.allowMultiple=!1}isAllowed(e){return this.allowedInputFields.length===0?!0:this.allowedInputFields.contains(e)}getAllowedInputFieldsAsString(){return this.allowedInputFields.length===0?"all":this.allowedInputFields.join(", ")}};var lr=class extends ue{constructor(){super(...arguments);this.identifier="class";this.allowedInputFields=[];this.value=[];this.requiresValue=!0;this.allowMultiple=!0}parseValue(t){this.value=t.split(" ")}};var cr=class extends ue{constructor(){super(...arguments);this.identifier="addLabels";this.allowedInputFields=["slider"];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(t){typeof t=="boolean"?this.value=t:typeof t=="string"&&(this.value=t.toLowerCase()==="true")}};var dr=class extends ue{constructor(){super(...arguments);this.identifier="minValue";this.allowedInputFields=["slider"];this.value=0;this.requiresValue=!0;this.allowMultiple=!1}parseValue(t){if(this.value=Number.parseInt(t),Number.isNaN(this.value))throw new j("value of argument 'minValue' must be of type number")}};var fr=class extends ue{constructor(){super(...arguments);this.identifier="maxValue";this.allowedInputFields=["slider"];this.value=100;this.requiresValue=!0;this.allowMultiple=!1}parseValue(t){if(this.value=Number.parseInt(t),Number.isNaN(this.value))throw new j("value of argument 'maxValue' must be of type number")}};var hr=class extends ue{constructor(){super(...arguments);this.identifier="option";this.allowedInputFields=["select","multi_select","suggester","imageSuggester"];this.value="";this.requiresValue=!0;this.allowMultiple=!0}parseValue(t){this.value=t}};var mr=class extends ue{constructor(){super(...arguments);this.identifier="title";this.allowedInputFields=[];this.value="";this.requiresValue=!0;this.allowMultiple=!1}parseValue(t){this.value=t}};var pr=class extends ue{constructor(){super(...arguments);this.identifier="alignRight";this.allowedInputFields=["date_picker"];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(t){this.value=t.toLowerCase()==="true"}};var gr=class extends ue{constructor(){super(...arguments);this.identifier="optionQuery";this.allowedInputFields=["suggester","imageSuggester"];this.value="";this.requiresValue=!0;this.allowMultiple=!0}parseValue(t){this.value=t}};var Dr=class extends ue{constructor(){super(...arguments);this.identifier="showcase";this.allowedInputFields=[];this.value=!0;this.requiresValue=!1;this.allowMultiple=!1}parseValue(t){this.value=t.toLowerCase()==="true"}};var yr=class{static createInputFieldArgument(e){if(e==="class")return new lr;if(e==="addLabels")return new cr;if(e==="minValue")return new dr;if(e==="maxValue")return new fr;if(e==="option")return new hr;if(e==="title")return new mr;if(e==="alignRight")return new pr;if(e==="optionQuery")return new gr;if(e==="showcase")return new Dr;throw new j(`unknown argument '${e}'`)}};var Yt=class{constructor(){this.arguments=[]}add(e){this.arguments.push(e)}validate(){let e={};for(let t of Object.values(oe))e[t]=0;for(let t of this.arguments)if(e[t.identifier]+=1,e[t.identifier]>1&&!t.allowMultiple)throw new j(`argument '${t.identifier}' does not allow duplicates`)}mergeByOverride(e){for(let t of e.arguments)t.allowMultiple||(this.arguments=this.arguments.filter(r=>r.identifier!==t.identifier)),this.arguments.push(t);return this.validate(),this}mergeByThrow(e){for(let t of e.arguments){if(!t.allowMultiple&&this.arguments.filter(r=>r.identifier===t.identifier).length>0)throw new j("can not merge InputFieldArgumentContainers, since arguments overlap");this.arguments.push(t)}return this.validate(),this}};var je=(y=>(y.TOGGLE="toggle",y.SLIDER="slider",y.TEXT="text",y.TEXT_AREA="text_area",y.SELECT="select",y.MULTI_SELECT="multi_select",y.DATE="date",y.TIME="time",y.DATE_PICKER="date_picker",y.NUMBER="number",y.SUGGESTER="suggester",y.EDITOR="editor",y.IMAGE_SUGGESTER="imageSuggester",y.INVALID="invalid",y))(je||{}),oe=(m=>(m.CLASS="class",m.ADD_LABELS="addLabels",m.MIN_VALUE="minValue",m.MAX_VALUE="maxValue",m.OPTION="option",m.TITLE="title",m.ALIGN_RIGHT="alignRight",m.OPTION_QUERY="optionQuery",m.SHOWCASE="showcase",m.INVALID="invalid",m))(oe||{}),Fr=class{constructor(){this.roundBracesPair=new Dt("(",")");this.squareBracesPair=new Dt("[","]");this.curlyBracesPair=new Dt("{","}");this.allBracesPairs=[this.roundBracesPair,this.squareBracesPair,this.curlyBracesPair];this.templates=[]}parseDeclaration(e,t,r){e.inputFieldType=this.getInputFieldType(e.inputFieldType);try{if(Re(r)&&this.applyTemplate(e,r),e.inputFieldType==="invalid")throw new j("unknown input field type");e.argumentContainer.mergeByOverride(this.parseArguments(e.inputFieldType,t))}catch(i){i instanceof Error&&(e.error=i,console.warn(i))}return e}parseString(e){var r;let t={};try{let i=!1,s="";t.fullDeclaration=e;let u=R.getInBetween(e,this.squareBracesPair);if(Array.isArray(u))if(u.length===2)i=!0,s=u[0],t.declaration=u[1];else throw new j("invalid input field declaration");else t.declaration=u;let o=t.declaration?R.split(t.declaration,":",this.squareBracesPair):[""];t.bindTarget=(r=o[1])!=null?r:"",t.isBound=Re(t.bindTarget);let a=o[0];if(a){let c=R.removeInBetween(a,this.roundBracesPair);t.inputFieldType=this.getInputFieldType(c);let m=R.getInBetween(a,this.roundBracesPair);m?t.argumentContainer=this.parseArgumentString(t.inputFieldType,m):t.argumentContainer=new Yt}else t.inputFieldType="invalid",t.argumentContainer=new Yt;if(i&&this.applyTemplate(t,s),t.inputFieldType==="invalid")throw new j("unknown input field type")}catch(i){i instanceof Error&&(t.error=i,console.warn(i))}return t}parseTemplates(e){this.templates=[];let t=e?R.split(e,`
`,this.squareBracesPair):[];t=t.map(r=>r.trim()).filter(r=>r.length>0);for(let r of t){let i=R.split(r,"->",this.squareBracesPair);if(i=i.map(s=>s.trim()),i.length===1)throw new j("Invalid template syntax");i.length===2&&this.templates.push({identifier:i[0],template:this.parseString(i[1])})}console.log("meta-bind | InputFieldDeclarationParser >> parsed templates",this.templates)}parseArgumentString(e,t){let r=R.split(t,",",this.roundBracesPair);r=r.map(s=>s.trim());let i=[];for(let s of r){let u=this.extractInputFieldArgumentIdentifier(s),o=this.getInputFieldArgumentType(u),a=this.extractInputFieldArgumentValue(s);if(o==="invalid")throw new j(`unknown argument '${u}'`);i.push({type:o,value:a})}return this.parseArguments(e,i)}parseArguments(e,t){let r=new Yt;if(t){for(let i of t){let s=yr.createInputFieldArgument(i.type);if(!s.isAllowed(e))throw new j(`argument '${i.type}' is only applicable to '${s.getAllowedInputFieldsAsString()}' input fields`);if(s.requiresValue){if(!i.value)throw new j(`argument '${i.type}' requires a non empty value`);s.parseValue(i.value)}r.add(s)}r.validate()}return r}extractInputFieldArgumentIdentifier(e){return R.removeInBetween(e,this.roundBracesPair)}extractInputFieldArgumentValue(e){return R.getInBetween(e,this.roundBracesPair)}getInputFieldArgumentType(e){for(let t of Object.entries(oe))if(t[1]===e)return t[1];return"invalid"}getInputFieldType(e){for(let t of Object.entries(je))if(t[1]===e)return t[1];return"invalid"}applyTemplate(e,t){var i;if(!t)return;let r=(i=this.templates.find(s=>s.identifier===t))==null?void 0:i.template;if(!r)throw new j(`unknown template name '${t}'`);e.bindTarget=e.bindTarget||r.bindTarget,e.isBound=e.isBound||r.isBound,e.inputFieldType=(e.inputFieldType==="invalid"?r.inputFieldType:e.inputFieldType)||r.inputFieldType,e.argumentContainer=r.argumentContainer.mergeByOverride(e.argumentContainer)}};var Zt=class extends U{constructor(t){var r,i,s,u;super(t);this.minValue=(i=(r=t.getArgument("minValue"))==null?void 0:r.value)!=null?i:0,this.maxValue=(u=(s=t.getArgument("maxValue"))==null?void 0:s.value)!=null?u:100}getValue(){if(!this.sliderComponent)throw new M("slider input component is undefined");return this.sliderComponent.getValue()}setValue(t){if(!this.sliderComponent)throw new M("slider input component is undefined");t!=null&&typeof t=="number"?t>=this.minValue&&t<=this.maxValue&&this.sliderComponent.setValue(t):(console.warn(new Ee(`invalid value '${t}' at sliderInputField ${this.renderChild.uuid}`)),this.sliderComponent.setValue(this.getDefaultValue()))}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return this.minValue}getHtmlElement(){if(!this.sliderComponent)throw new M("slider input component is undefined");return this.sliderComponent.sliderEl}render(t){console.debug(`meta-bind | SliderInputField >> render ${this.renderChild.uuid}`),t.removeClass("meta-bind-plugin-input-wrapper"),t.addClass("meta-bind-plugin-flex-input-wrapper");let r=this.renderChild.getArgument("addLabels");r&&r.value===!0&&t.createSpan({text:this.minValue.toString(),cls:"meta-bind-plugin-slider-input-label"});let i=new Hs.SliderComponent(t);i.setLimits(this.minValue,this.maxValue,1),i.setValue(this.renderChild.getInitialValue()),i.onChange(this.onValueChange),i.setDynamicTooltip(),i.sliderEl.addClass("meta-bind-plugin-slider-input"),r&&r.value===!0&&t.createSpan({text:this.maxValue.toString(),cls:"meta-bind-plugin-slider-input-label"}),this.sliderComponent=i}destroy(){}};var Ws=require("obsidian");var Jt=class extends U{getValue(){if(!this.textAreaComponent)throw new M("text area input component is undefined");return this.textAreaComponent.getValue()}setValue(t){if(!this.textAreaComponent)throw new M("text area input component is undefined");t!=null&&typeof t=="string"?this.textAreaComponent.setValue(t):(console.warn(new Ee(`invalid value '${t}' at textAreaInputField ${this.renderChild.uuid}`)),this.textAreaComponent.setValue(""))}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return""}getHtmlElement(){if(!this.textAreaComponent)throw new M("text area input component is undefined");return this.textAreaComponent.inputEl}render(t){console.debug(`meta-bind | TextAreaInputField >> render ${this.renderChild.uuid}`);let r=new Ws.TextAreaComponent(t);r.setValue(this.renderChild.getInitialValue()),r.onChange(this.onValueChange),this.textAreaComponent=r}destroy(){}};var br=class{constructor(e,t,r,i,s=!1){this.value=e,this.id=r,this.active=s,this.highlighted=!1,this.selectInputField=i,this.cssClass="meta-bind-plugin-select-input-element",this.activeClass="meta-bind-plugin-select-input-element-selected",this.hoverClass="meta-bind-plugin-select-input-element-hover",this.element=t.createDiv({cls:this.cssClass}),this.element.id=this.getHTMLId(),this.element.on("click","#"+this.getHTMLId(),()=>{this.selectInputField.allowMultiSelect||this.selectInputField.disableAllOtherElements(this.id),this.setActive(!this.active,!0)}),this.element.on("mouseenter","#"+this.getHTMLId(),()=>{this.setHighlighted(!0)}),this.element.on("mouseleave","#"+this.getHTMLId(),()=>{this.setHighlighted(!1)})}getHTMLId(){return`meta-bind-select-input-element-${this.selectInputField.renderChild.uuid}-${this.id}`}isHighlighted(){return this.highlighted}setHighlighted(e){this.highlighted=e,this.highlighted?(this.addClass(this.hoverClass),this.selectInputField.deHighlightAllOtherElements(this.id)):this.removeClass(this.hoverClass)}isActive(){return this.active}setActive(e,t=!0){this.active=e,this.update(t)}update(e){this.active?this.addClass(this.activeClass):this.removeClass(this.activeClass),e&&this.selectInputField.onChange()}addClass(e){this.element.hasClass(e)||this.element.addClass(e)}removeClass(e){this.element.hasClass(e)&&this.element.removeClass(e)}render(){this.element.createEl("div",{text:this.value})}};var dt=class extends U{constructor(t){super(t);this.elements=[],this.allowMultiSelect=!1}getHtmlElement(){if(!this.container)throw new M("select input container is undefined");return this.container}getValue(){var t,r;return(r=(t=this.elements.filter(i=>i.isActive()).first())==null?void 0:t.value)!=null?r:""}setValue(t){for(let r of this.elements)t===r.value?r.setActive(!0,!1):r.setActive(!1,!1)}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return""}onChange(){this.onValueChange(this.getValue())}render(t){console.debug(`meta-bind | SelectInputField >> render ${this.renderChild.uuid}`),this.container=t;let r=this.renderChild.getArguments("option"),i=0;for(let s of r){let u=new br(s.value,t,i,this,!1);this.elements.push(u),u.render(),i+=1}this.setValue(this.renderChild.getInitialValue())}destroy(){}disableAllOtherElements(t){for(let r of this.elements)r.id!==t&&r.setActive(!1,!1)}deHighlightAllOtherElements(t){for(let r of this.elements)r.id!==t&&r.setHighlighted(!1)}activateHighlighted(){for(let t of this.elements)t.isHighlighted()&&(t.setActive(!t.isActive()),this.allowMultiSelect||this.disableAllOtherElements(t.id))}highlightUp(){var t,r;for(let i of this.elements)if(i.isHighlighted()){(t=this.getPreviousSelectModalElement(i))==null||t.setHighlighted(!0);return}(r=this.elements.at(-1))==null||r.setHighlighted(!0)}highlightDown(){var t,r;for(let i of this.elements)if(i.isHighlighted()){(t=this.getNextSelectModalElement(i))==null||t.setHighlighted(!0);return}(r=this.elements.at(0))==null||r.setHighlighted(!0)}getNextSelectModalElement(t){let r=t.id+1;return r=Ht(r,this.elements.length),this.elements.filter(i=>i.id===r).at(0)}getPreviousSelectModalElement(t){let r=t.id-1;return r=Ht(r,this.elements.length),this.elements.filter(i=>i.id===r).at(0)}};dt.allowInline=!1;var Kt=class extends dt{constructor(e){super(e),this.allowMultiSelect=!0}getValue(){return this.elements.filter(e=>e.isActive()).map(e=>e.value)}setValue(e){if(!e||e.length===0){for(let t of this.elements)t.setActive(!1,!1);return}e:for(let t of this.elements){for(let r of e)if(r===t.value){t.setActive(!0,!1);continue e}t.setActive(!1,!1)}}isEqualValue(e){return Array.isArray(e)?Ns(this.getValue(),e):!1}getDefaultValue(){return[]}};var xt=require("obsidian");var pi=require("obsidian"),q=class{static stringify(e){return e.format(this.dateFormat)}static parse(e){return(0,pi.moment)(e,q.dateFormat)}static getDefaultDate(){return(0,pi.moment)(new Date)}static getDefaultDay(){return new Date().getDate()}static getDefaultMonth(){return 1}static getDefaultYear(){return new Date().getFullYear()}};var Qt=class extends U{constructor(t){super(t);this.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"};this.date=q.getDefaultDate(),this.days={};for(let r=1;r<=31;r++)this.days[r.toString()]=r.toString()}getHtmlElement(){if(!this.container)throw new M("toggle input container is undefined");return this.container}getValue(){return q.stringify(this.date)}setValue(t){if(!this.monthComponent)throw new M("date input month component is undefined");if(!this.dayComponent)throw new M("date input day component is undefined");if(!this.yearComponent)throw new M("date input hour component is undefined");this.date=q.parse(t),this.date||(console.warn(new Ee(`invalid value '${t}' at dateInputField ${this.renderChild.uuid}`)),this.date=q.getDefaultDate()),this.date.isValid()||(this.date=q.getDefaultDate(),this.onValueChange(this.getValue())),this.monthComponent.setValue(this.date.month().toString()),this.dayComponent.setValue(this.date.date().toString()),this.yearComponent.setValue(this.date.year().toString())}isEqualValue(t){return t==this.getValue()}getDefaultValue(){return q.stringify(q.getDefaultDate())}render(t){var i;console.debug(`meta-bind | DateInputField >> render ${this.renderChild.uuid}`),this.date=(i=q.parse(this.renderChild.getInitialValue()))!=null?i:q.getDefaultDate(),this.date.isValid()||(this.date=q.getDefaultDate(),this.onValueChange(this.getValue()));let r=this.renderChild.plugin.settings.useUsDateInputOrder;t.removeClass("meta-bind-plugin-input-wrapper"),t.addClass("meta-bind-plugin-flex-input-wrapper","meta-bind-plugin-input-element-group"),r?(this.monthComponent=new xt.DropdownComponent(t),this.monthComponent.addOptions(this.months),this.monthComponent.setValue(this.date.month().toString()),this.monthComponent.onChange(this.onMonthChange.bind(this)),this.dayComponent=new xt.DropdownComponent(t),this.dayComponent.addOptions(this.days),this.dayComponent.setValue(this.date.date().toString()),this.dayComponent.onChange(this.onDayChange.bind(this)),this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element")):(this.dayComponent=new xt.DropdownComponent(t),this.dayComponent.addOptions(this.days),this.dayComponent.setValue(this.date.date().toString()),this.dayComponent.onChange(this.onDayChange.bind(this)),this.monthComponent=new xt.DropdownComponent(t),this.monthComponent.addOptions(this.months),this.monthComponent.setValue(this.date.month().toString()),this.monthComponent.onChange(this.onMonthChange.bind(this)),this.dayComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.monthComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element")),this.yearComponent=new xt.TextComponent(t),this.yearComponent.setValue(this.date.year().toString()),this.yearComponent.onChange(this.onYearChange.bind(this)),this.yearComponent.inputEl.addClass("meta-bind-plugin-date-input-year-input"),this.yearComponent.inputEl.addClass("meta-bind-plugin-input-element-group-element"),this.yearComponent.inputEl.type="number",this.yearComponent.inputEl.max="9999",this.container=t}destroy(){}onMonthChange(t){var i;this.date.month(t);let r=this.clampDay(this.date.date());(i=this.dayComponent)==null||i.setValue(r.toString()),this.date.date(r),this.onValueChange(this.getValue())}onDayChange(t){var s;let r=Number.parseInt(t),i=this.clampDay(r);i!==r&&((s=this.dayComponent)==null||s.setValue(i.toString())),this.date.date(i),this.onValueChange(this.getValue())}onYearChange(t){let r=Number.parseInt(t);this.date.year(Number.isNaN(r)?q.getDefaultYear():r),this.onValueChange(this.getValue())}clampDay(t){return Number.isNaN(t)?q.getDefaultDay():t<1?1:t>this.date.daysInMonth()?this.date.daysInMonth():t}};var Di=require("obsidian");var gi=class{constructor(){this._hour=he.getDefaultHour(),this._minute=he.getDefaultHour()}getHour(){return this._hour}setHour(e){if(e<0||e>24){this._hour=he.getDefaultHour();return}this._hour=e}getMinute(){return this._minute}setMinute(e){if(e<0||e>59){this._minute=he.getDefaultMinute();return}this._minute=e}getUniformHour(){return("00"+this.getHour().toString()).slice(-2)}getUniformMinute(){return("00"+this.getMinute().toString()).slice(-2)}setHourFromString(e){let t=Number.parseInt(e);this.setHour(Number.isNaN(t)?he.getDefaultHour():t)}setMinuteFromString(e){let t=Number.parseInt(e);this.setMinute(Number.isNaN(t)?he.getDefaultMinute():t)}},he=class{static parse(e){let t=he.getDefaultTime(),r=e.split(":");if(r.length===2)return t.setHourFromString(r[0]),t.setMinuteFromString(r[1]),t}static stringify(e){return`${e.getUniformHour()}:${e.getUniformMinute()}`}static getDefaultTime(){return new gi}static getDefaultHour(){return 0}static getDefaultMinute(){return 0}};var Xt=class extends U{constructor(t){super(t);this.time=he.getDefaultTime(),this.hours={};for(let r=0;r<=24;r++)this.hours[r.toString()]=r.toString();this.minutes={};for(let r=0;r<=59;r++)this.minutes[r.toString()]=r.toString()}getHtmlElement(){if(!this.container)throw new M("time input container is undefined");return this.container}getValue(){return he.stringify(this.time)}setValue(t){if(!this.hourComponent)throw new M("time input hour component is undefined");if(!this.minuteComponent)throw new M("time input minute component is undefined");this.time=he.parse(t),this.time||(console.warn(new Ee(`invalid value '${t}' at timeInputField ${this.renderChild.uuid}`)),this.time=he.getDefaultTime()),this.hourComponent.setValue(this.time.getHour().toString()),this.minuteComponent.setValue(this.time.getMinute().toString())}isEqualValue(t){return t==this.getValue()}getDefaultValue(){return he.stringify(he.getDefaultTime())}render(t){var r;console.debug(`meta-bind | TimeInputField >> render ${this.renderChild.uuid}`),this.time=(r=he.parse(this.renderChild.getInitialValue()))!=null?r:he.getDefaultTime(),t.removeClass("meta-bind-plugin-input-wrapper"),t.addClass("meta-bind-plugin-flex-input-wrapper","meta-bind-plugin-input-element-group"),this.hourComponent=new Di.DropdownComponent(t),this.hourComponent.addOptions(this.hours),this.hourComponent.setValue(this.time.getHour().toString()),this.hourComponent.onChange(this.onHourChange.bind(this)),this.minuteComponent=new Di.DropdownComponent(t),this.minuteComponent.addOptions(this.minutes),this.minuteComponent.setValue(this.time.getMinute().toString()),this.minuteComponent.onChange(this.onMinuteChange.bind(this)),this.hourComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.minuteComponent.selectEl.addClass("meta-bind-plugin-input-element-group-element"),this.container=t}destroy(){}onHourChange(t){var r;(r=this.time)==null||r.setHourFromString(t),this.onValueChange(this.getValue())}onMinuteChange(t){var r;(r=this.time)==null||r.setMinuteFromString(t),this.onValueChange(this.getValue())}};function W(){}function Ei(n){return n()}function Us(){return Object.create(null)}function me(n){n.forEach(Ei)}function vr(n){return typeof n=="function"}function ae(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}var wr;function rn(n,e){return wr||(wr=document.createElement("a")),wr.href=e,n===wr.href}function zs(n){return Object.keys(n).length===0}var Gs=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global,kn=class{constructor(e){this.options=e,this._listeners="WeakMap"in Gs?new WeakMap:void 0}observe(e,t){return this._listeners.set(e,t),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!==null&&e!==void 0?e:this._observer=new ResizeObserver(t=>{var r;for(let i of t)kn.entries.set(i.target,i),(r=this._listeners.get(i.target))===null||r===void 0||r(i)})}};kn.entries="WeakMap"in Gs?new WeakMap:void 0;var Ys=!1;function La(){Ys=!0}function Va(){Ys=!1}function O(n,e){n.appendChild(e)}function pe(n,e,t){let r=$a(n);if(!r.getElementById(e)){let i=N("style");i.id=e,i.textContent=t,Ra(r,i)}}function $a(n){if(!n)return document;let e=n.getRootNode?n.getRootNode():n.ownerDocument;return e&&e.host?e:n.ownerDocument}function Ra(n,e){return O(n.head||n,e),e.sheet}function Y(n,e,t){n.insertBefore(e,t||null)}function z(n){n.parentNode&&n.parentNode.removeChild(n)}function Cr(n,e){for(let t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function N(n){return document.createElement(n)}function ge(n){return document.createTextNode(n)}function le(){return ge(" ")}function xr(){return ge("")}function ne(n,e,t,r){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}function T(n,e,t){t==null?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function Pa(n){return Array.from(n.childNodes)}function _e(n,e){e=""+e,n.data!==e&&(n.data=e)}function vi(n,e){n.value=e==null?"":e}function St(n,e,t){n.classList[t?"add":"remove"](e)}function ja(n,e,{bubbles:t=!1,cancelable:r=!1}={}){let i=document.createEvent("CustomEvent");return i.initCustomEvent(n,t,r,e),i}var Mn;function Tn(n){Mn=n}function Zs(){if(!Mn)throw new Error("Function called outside component initialization");return Mn}function In(n){Zs().$$.on_mount.push(n)}function On(){let n=Zs();return(e,t,{cancelable:r=!1}={})=>{let i=n.$$.callbacks[e];if(i){let s=ja(e,t,{cancelable:r});return i.slice().forEach(u=>{u.call(n,s)}),!s.defaultPrevented}return!0}}var tn=[];var ft=[],nn=[],Fi=[],qa=Promise.resolve(),bi=!1;function Ha(){bi||(bi=!0,qa.then(Ks))}function wi(n){nn.push(n)}function Js(n){Fi.push(n)}var yi=new Set,en=0;function Ks(){if(en!==0)return;let n=Mn;do{try{for(;en<tn.length;){let e=tn[en];en++,Tn(e),Wa(e.$$)}}catch(e){throw tn.length=0,en=0,e}for(Tn(null),tn.length=0,en=0;ft.length;)ft.pop()();for(let e=0;e<nn.length;e+=1){let t=nn[e];yi.has(t)||(yi.add(t),t())}nn.length=0}while(tn.length);for(;Fi.length;)Fi.pop()();bi=!1,yi.clear(),Tn(n)}function Wa(n){if(n.fragment!==null){n.update(),me(n.before_update);let e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(wi)}}function Ua(n){let e=[],t=[];nn.forEach(r=>n.indexOf(r)===-1?e.push(r):t.push(r)),t.forEach(r=>r()),nn=e}var Er=new Set,_t;function _r(){_t={r:0,c:[],p:_t}}function Sr(){_t.r||me(_t.c),_t=_t.p}function ve(n,e){n&&n.i&&(Er.delete(n),n.i(e))}function Me(n,e,t,r){if(n&&n.o){if(Er.has(n))return;Er.add(n),_t.c.push(()=>{Er.delete(n),r&&(t&&n.d(1),r())}),n.o(e)}else r&&r()}function Qs(n,e){n.d(1),e.delete(n.key)}function Xs(n,e,t,r,i,s,u,o,a,c,m,p){let g=n.length,h=s.length,y=g,C={};for(;y--;)C[n[y].key]=y;let B=[],V=new Map,Fe=new Map,G=[];for(y=h;y--;){let _=p(i,s,y),$=t(_),A=u.get($);A?r&&G.push(()=>A.p(_,e)):(A=c($,_),A.c()),V.set($,B[y]=A),$ in C&&Fe.set($,Math.abs(y-C[$]))}let b=new Set,I=new Set;function J(_){ve(_,1),_.m(o,m),u.set(_.key,_),m=_.first,h--}for(;g&&h;){let _=B[h-1],$=n[g-1],A=_.key,K=$.key;_===$?(m=_.first,g--,h--):V.has(K)?!u.has(A)||b.has(A)?J(_):I.has(K)?g--:Fe.get(A)>Fe.get(K)?(I.add(A),J(_)):(b.add(K),g--):(a($,u),g--)}for(;g--;){let _=n[g];V.has(_.key)||a(_,u)}for(;h;)J(B[h-1]);return me(G),B}var za=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Xh=new Set([...za]);function eu(n,e,t){let r=n.$$.props[e];r!==void 0&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function ht(n){n&&n.c()}function Qe(n,e,t,r){let{fragment:i,after_update:s}=n.$$;i&&i.m(e,t),r||wi(()=>{let u=n.$$.on_mount.map(Ei).filter(vr);n.$$.on_destroy?n.$$.on_destroy.push(...u):me(u),n.$$.on_mount=[]}),s.forEach(wi)}function qe(n,e){let t=n.$$;t.fragment!==null&&(Ua(t.after_update),me(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ga(n,e){n.$$.dirty[0]===-1&&(tn.push(n),Ha(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function ce(n,e,t,r,i,s,u,o=[-1]){let a=Mn;Tn(n);let c=n.$$={fragment:null,ctx:[],props:s,update:W,not_equal:i,bound:Us(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Us(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};u&&u(c.root);let m=!1;if(c.ctx=t?t(n,e.props||{},(p,g,...h)=>{let y=h.length?h[0]:g;return c.ctx&&i(c.ctx[p],c.ctx[p]=y)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](y),m&&Ga(n,p)),g}):[],c.update(),m=!0,me(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){La();let p=Pa(e.target);c.fragment&&c.fragment.l(p),p.forEach(z)}else c.fragment&&c.fragment.c();e.intro&&ve(n.$$.fragment),Qe(n,e.target,e.anchor,e.customElement),Va(),Ks()}Tn(a)}var Ya;typeof HTMLElement=="function"&&(Ya=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:n}=this.$$;this.$$.on_disconnect=n.map(Ei).filter(vr);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(n,e,t){this[n]=t}disconnectedCallback(){me(this.$$.on_disconnect)}$destroy(){qe(this,1),this.$destroy=W}$on(n,e){if(!vr(e))return W;let t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),()=>{let r=t.indexOf(e);r!==-1&&t.splice(r,1)}}$set(n){this.$$set&&!zs(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}});var te=class{$destroy(){qe(this,1),this.$destroy=W}$on(e,t){if(!vr(t))return W;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let i=r.indexOf(t);i!==-1&&r.splice(i,1)}}$set(e){this.$$set&&!zs(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ru=require("obsidian");var nu=require("obsidian");function Za(n){pe(n,"svelte-1elx65w",".icon-wrapper.svelte-1elx65w{display:inline-block;position:relative;width:18px;height:18px}")}function tu(n){let e;return{c(){e=N("div"),T(e,"class","icon-wrapper svelte-1elx65w")},m(t,r){Y(t,e,r),n[2](e)},p:W,d(t){t&&z(e),n[2](null)}}}function Ja(n){let e,t=n[0].length>0&&tu(n);return{c(){t&&t.c(),e=xr()},m(r,i){t&&t.m(r,i),Y(r,e,i)},p(r,[i]){r[0].length>0?t?t.p(r,i):(t=tu(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:W,o:W,d(r){t&&t.d(r),r&&z(e)}}}function Ka(n,e,t){let{iconName:r=""}=e,i;In(()=>{(0,nu.setIcon)(i,r)});function s(u){ft[u?"unshift":"push"](()=>{i=u,t(1,i)})}return n.$$set=u=>{"iconName"in u&&t(0,r=u.iconName)},[r,i,s]}var Ci=class extends te{constructor(e){super(),ce(this,e,Ka,Ja,ae,{iconName:0},Za)}},Tr=Ci;function Qa(n){pe(n,"svelte-1urcwq2",".date-picker-input.svelte-1urcwq2{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:5px 5px 5px 7px;cursor:pointer;position:relative;color:var(--text-normal);display:inline-flex;align-items:center;gap:5px}.date-picker-text.svelte-1urcwq2{display:inline-block}")}function Xa(n){let e,t,r,i=n[0].format(n[1])+"",s,u,o,a,c,m;return o=new Tr({props:{iconName:"calendar"}}),{c(){e=N("div"),t=N("div"),r=N("span"),s=ge(i),u=le(),ht(o.$$.fragment),T(t,"class","date-picker-text svelte-1urcwq2"),T(e,"class","date-picker-input svelte-1urcwq2")},m(p,g){Y(p,e,g),O(e,t),O(t,r),O(r,s),O(e,u),Qe(o,e,null),a=!0,c||(m=[ne(e,"click",n[2]),ne(e,"keydown",n[3])],c=!0)},p(p,[g]){(!a||g&3)&&i!==(i=p[0].format(p[1])+"")&&_e(s,i)},i(p){a||(ve(o.$$.fragment,p),a=!0)},o(p){Me(o.$$.fragment,p),a=!1},d(p){p&&z(e),qe(o),c=!1,me(m)}}}function el(n,e,t){let{showDatePicker:r}=e,{selectedDate:i=(0,ru.moment)()}=e,{dateFormat:s="dddd, MMMM Do YYYY"}=e;function u(c){t(0,i=c)}function o(c){r()}function a(c){c.key===" "&&r()}return n.$$set=c=>{"showDatePicker"in c&&t(4,r=c.showDatePicker),"selectedDate"in c&&t(0,i=c.selectedDate),"dateFormat"in c&&t(1,s=c.dateFormat)},[i,s,o,a,r,u]}var xi=class extends te{constructor(e){super(),ce(this,e,el,Xa,ae,{showDatePicker:4,selectedDate:0,dateFormat:1,updateValue:5},Qa)}get updateValue(){return this.$$.ctx[5]}},iu=xi;var hu=require("obsidian");var lu=require("obsidian");function tl(n){pe(n,"svelte-1ouugmg",".calendar.svelte-1ouugmg{margin-top:10px}.calendar-header.svelte-1ouugmg{display:flex;justify-content:space-around;flex-wrap:wrap;gap:var(--size-4-1);background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);margin-bottom:var(--size-4-1);;}.calendar-content.svelte-1ouugmg{display:grid;flex-wrap:wrap;grid-template-columns:repeat(7, 1fr);gap:var(--size-4-1)}.cell.svelte-1ouugmg{min-width:40px;padding:var(--size-4-2);display:flex;justify-content:center;align-items:center;border-radius:var(--meta-bind-plugin-border-radius)}.content-cell.svelte-1ouugmg{cursor:pointer}.cell-text.svelte-1ouugmg{margin:auto;text-align:center}.selected.svelte-1ouugmg{background:var(--interactive-accent)}.highlight.svelte-1ouugmg:hover{background:var(--interactive-hover)}.selected.highlight.svelte-1ouugmg:hover{background:var(--interactive-accent-hover)}")}function su(n,e,t){let r=n.slice();return r[10]=e[t],r}function uu(n,e,t){let r=n.slice();return r[13]=e[t],r}function ou(n){let e,t,r=n[13]+"",i,s;return{c(){e=N("div"),t=N("span"),i=ge(r),s=le(),T(t,"class","cell-text svelte-1ouugmg"),T(e,"class","cell header-cell svelte-1ouugmg")},m(u,o){Y(u,e,o),O(e,t),O(t,i),O(e,s)},p:W,d(u){u&&z(e)}}}function au(n,e){let t,r,i=(e[10]||"")+"",s,u,o,a;function c(){return e[6](e[10])}function m(...p){return e[7](e[10],...p)}return{key:n,first:null,c(){t=N("div"),r=N("span"),s=ge(i),u=le(),T(r,"class","cell-text svelte-1ouugmg"),T(t,"class","cell svelte-1ouugmg"),St(t,"highlight",e[10]),St(t,"content-cell",e[10]),St(t,"selected",e[0].year()===e[2]&&e[0].month()===e[1]&&e[0].date()===e[10]),this.first=t},m(p,g){Y(p,t,g),O(t,r),O(r,s),O(t,u),o||(a=[ne(t,"click",c),ne(t,"keydown",m)],o=!0)},p(p,g){e=p,g&8&&i!==(i=(e[10]||"")+"")&&_e(s,i),g&8&&St(t,"highlight",e[10]),g&8&&St(t,"content-cell",e[10]),g&15&&St(t,"selected",e[0].year()===e[2]&&e[0].month()===e[1]&&e[0].date()===e[10])},d(p){p&&z(t),o=!1,me(a)}}}function nl(n){let e,t,r,i,s=[],u=new Map,o=mi(),a=[];for(let p=0;p<o.length;p+=1)a[p]=ou(uu(n,o,p));let c=n[3],m=p=>Ps();for(let p=0;p<c.length;p+=1){let g=su(n,c,p),h=m(g);u.set(h,s[p]=au(h,g))}return{c(){e=N("div"),t=N("div");for(let p=0;p<a.length;p+=1)a[p].c();r=le(),i=N("div");for(let p=0;p<s.length;p+=1)s[p].c();T(t,"class","calendar-header svelte-1ouugmg"),T(i,"class","calendar-content svelte-1ouugmg"),T(e,"class","calendar svelte-1ouugmg")},m(p,g){Y(p,e,g),O(e,t);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(t,null);O(e,r),O(e,i);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(i,null)},p(p,[g]){if(g&0){o=mi();let h;for(h=0;h<o.length;h+=1){let y=uu(p,o,h);a[h]?a[h].p(y,g):(a[h]=ou(y),a[h].c(),a[h].m(t,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=o.length}g&63&&(c=p[3],s=Xs(s,g,m,1,p,c,u,i,Qs,au,null,su))},i:W,o:W,d(p){p&&z(e),Cr(a,p);for(let g=0;g<s.length;g+=1)s[g].d()}}}function rl(n,e,t){let r=On(),{selectedDate:i}=e,{month:s}=e,{year:u}=e,o;function a(h){r("dateChange",(0,lu.moment)(new Date(u,s,h)))}function c(h){h&&a(h)}function m(h,y){h.key===" "&&c(y)}let p=h=>c(h),g=(h,y)=>m(y,h);return n.$$set=h=>{"selectedDate"in h&&t(0,i=h.selectedDate),"month"in h&&t(1,s=h.month),"year"in h&&t(2,u=h.year)},n.$$.update=()=>{if(n.$$.dirty&6){e:t(3,o=Rs(s,u))}},[i,s,u,o,c,m,p,g]}var _i=class extends te{constructor(e){super(),ce(this,e,rl,nl,ae,{selectedDate:0,month:1,year:2},tl)}},cu=_i;var du=require("obsidian");function il(n){pe(n,"svelte-1nlxj7b",".date-picker.svelte-1nlxj7b{display:block;padding:var(--size-4-4)}.date-picker-header.svelte-1nlxj7b{display:flex;gap:var(--size-4-2);align-items:center;justify-content:space-around}.date-picker-header-text.svelte-1nlxj7b{flex:1;text-align:center;display:flex;gap:var(--size-4-2);align-items:center;justify-content:center;width:min-content}.date-picker-header-text-year.svelte-1nlxj7b{width:60px;padding:var(--size-4-2)}.date-picker-header-text-month.svelte-1nlxj7b{height:min-content}.month-switch-button.svelte-1nlxj7b{margin:0}")}function sl(n){let e,t,r,i,s,u,o=hi(n[1])+"",a,c,m,p,g,h,y,C,B,V,Fe;return C=new cu({props:{month:n[1],year:n[2],selectedDate:n[0]}}),C.$on("dateChange",n[6]),{c(){e=N("div"),t=N("div"),r=N("button"),r.textContent="Prev",i=le(),s=N("div"),u=N("span"),a=ge(o),c=le(),m=N("input"),g=le(),h=N("button"),h.textContent="Next",y=le(),ht(C.$$.fragment),T(r,"class","month-switch-button svelte-1nlxj7b"),T(u,"class","date-picker-header-text-month svelte-1nlxj7b"),T(m,"class","date-picker-header-text-year svelte-1nlxj7b"),T(m,"type","number"),m.value=p=n[2].toString(),T(s,"class","date-picker-header-text svelte-1nlxj7b"),T(h,"class","month-switch-button svelte-1nlxj7b"),T(t,"class","date-picker-header svelte-1nlxj7b"),T(e,"class","date-picker svelte-1nlxj7b")},m(G,b){Y(G,e,b),O(e,t),O(t,r),O(t,i),O(t,s),O(s,u),O(u,a),O(s,c),O(s,m),O(t,g),O(t,h),O(e,y),Qe(C,e,null),B=!0,V||(Fe=[ne(r,"click",n[4]),ne(m,"input",n[5]),ne(h,"click",n[3])],V=!0)},p(G,[b]){(!B||b&2)&&o!==(o=hi(G[1])+"")&&_e(a,o),(!B||b&4&&p!==(p=G[2].toString())&&m.value!==p)&&(m.value=p);let I={};b&2&&(I.month=G[1]),b&4&&(I.year=G[2]),b&1&&(I.selectedDate=G[0]),C.$set(I)},i(G){B||(ve(C.$$.fragment,G),B=!0)},o(G){Me(C.$$.fragment,G),B=!1},d(G){G&&z(e),qe(C),V=!1,me(Fe)}}}function ul(n,e,t){let r=On(),{selectedDate:i=(0,du.moment)()}=e,{dateChangeCallback:s}=e,u,o,a,c;function m(){if(o===11){t(1,o=0),t(2,a+=1);return}t(1,o=o+1)}function p(){if(o===0){t(1,o=11),t(2,a-=1);return}t(1,o-=1)}function g(y){let C=y.target.value,B=Number.parseInt(C);Number.isNaN(B)||t(2,a=B)}function h(y){c=!1,t(0,i=y.detail),s(y.detail)}return n.$$set=y=>{"selectedDate"in y&&t(0,i=y.selectedDate),"dateChangeCallback"in y&&t(7,s=y.dateChangeCallback)},n.$$.update=()=>{if(n.$$.dirty&1){e:console.log("update date picker",i),u=i.date(),t(1,o=i.month()),t(2,a=i.year())}},[i,o,a,m,p,g,h,s]}var Si=class extends te{constructor(e){super(),ce(this,e,ul,sl,ae,{selectedDate:0,dateChangeCallback:7},il)}},fu=Si;var kr=class extends hu.Modal{constructor(t,r){super(t);this.opener=r}onOpen(){let{contentEl:t}=this;new fu({target:t,props:{selectedDate:this.opener.date,dateChangeCallback:r=>this.opener.datePickerValueChanged(r)}})}};var sn=class extends U{constructor(t){super(t);this.date=q.getDefaultDate()}getValue(){return q.stringify(this.date)}setValue(t){var r,i;this.date=(r=q.parse(t))!=null?r:q.getDefaultDate(),this.date.isValid()||(this.date=q.getDefaultDate(),this.onValueChange(this.getValue())),(i=this.component)==null||i.$set({selectedDate:this.date})}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return q.stringify(q.getDefaultDate())}getHtmlElement(){if(!this.container)throw new M("");return this.container}datePickerValueChanged(t){var r,i;this.date=t,(r=this.component)==null||r.updateValue(this.date),(i=this.modal)==null||i.close(),this.date.isValid()&&this.onValueChange(this.getValue())}showDatePicker(){this.modal=new kr(this.renderChild.plugin.app,this),this.modal.open()}render(t){var r;console.debug(`meta-bind | DatePickerInputField >> render ${this.renderChild.uuid}`),this.container=t,this.date=(r=q.parse(this.renderChild.getInitialValue()))!=null?r:q.getDefaultDate(),this.date.isValid()||(this.date=q.getDefaultDate(),this.onValueChange(this.getValue())),this.component=new iu({target:t,props:{dateFormat:this.renderChild.plugin.settings.preferredDateFormat,showDatePicker:()=>this.showDatePicker(),selectedDate:this.date}})}destroy(){var t;(t=this.component)==null||t.$destroy()}};var mu=require("obsidian");var un=class extends U{getValue(){if(!this.numberComponent)throw new M("number input component is undefined");let t=parseFloat(this.numberComponent.getValue());return isNaN(t)?0:t}setValue(t){if(!this.numberComponent)throw new M("number input component is undefined");t!=null&&(typeof t=="number"||typeof t=="string")?this.numberComponent.setValue(ci(t)):(console.warn(new Ee(`invalid value '${t}' at numberInputField ${this.renderChild.uuid}`)),this.numberComponent.setValue(this.getDefaultValue()))}isEqualValue(t){return this.getValue()==t}getDefaultValue(){return 0}getHtmlElement(){if(!this.numberComponent)throw new M("number input component is undefined");return this.numberComponent.inputEl}render(t){console.debug(`meta-bind | NumberInputField >> render ${this.renderChild.uuid}`);let r=new mu.TextComponent(t);r.inputEl.type="number",r.setValue(ci(this.renderChild.getInitialValue())),r.onChange(i=>{let s=parseFloat(i);this.onValueChange(isNaN(s)?0:s)}),this.numberComponent=r}destroy(){}};function pu(n){if(!n)throw new j("invalid link, link is empty");let e={};e.isEmbed=n.startsWith("!");let t=R.getInBetween(n,new Dt("[[","]]"));if(!t)throw new j("invalid link, link is empty");if(typeof t!="string")throw new j("invalid link, link format is invalid");let r=t.split("|");if(r.length===2)e.alias=r[1];else if(r.length>2)throw new j("invalid link, link may only contain a maximum of one '|'");let i=r[0].split("#");if(i.length===1)e.target=i[0];else if(i.length===2)e.target=i[0],e.block=i[1];else throw new j("invalid link, link target may only contain a maximum of one '#'");return e}function gu(n){return(n.startsWith("![[")||n.startsWith("[["))&&n.endsWith("]]")}function ol(n){let e,t=n[1]()+"",r,i,s;return{c(){e=N("a"),r=ge(t),T(e,"data-href",i=n[1]()),T(e,"href",s=n[1]()),T(e,"class","internal-link"),T(e,"target","_blank"),T(e,"rel","noopener")},m(u,o){Y(u,e,o),O(e,r)},p:W,d(u){u&&z(e)}}}function al(n){let e,t=n[0].alias+"",r,i,s,u;return{c(){e=N("a"),r=ge(t),T(e,"data-href",i=n[1]()),T(e,"href",s=n[1]()),T(e,"class","internal-link"),T(e,"target","_blank"),T(e,"rel","noopener"),T(e,"aria-label",u=n[1]()),T(e,"aria-label-position","top")},m(o,a){Y(o,e,a),O(e,r)},p(o,a){a&1&&t!==(t=o[0].alias+"")&&_e(r,t)},d(o){o&&z(e)}}}function ll(n){let e;function t(s,u){return s[0].alias?al:ol}let r=t(n,-1),i=r(n);return{c(){i.c(),e=xr()},m(s,u){i.m(s,u),Y(s,e,u)},p(s,[u]){r===(r=t(s,u))&&i?i.p(s,u):(i.d(1),i=r(s),i&&(i.c(),i.m(e.parentNode,e)))},i:W,o:W,d(s){i.d(s),s&&z(e)}}}function cl(n,e,t){let{mdLink:r}=e;function i(){return r.block?`${r.target}#${r.block}`:r.target}return n.$$set=s=>{"mdLink"in s&&t(0,r=s.mdLink)},[r,i]}var Ti=class extends te{constructor(e){super(),ce(this,e,cl,ll,ae,{mdLink:0})}},Du=Ti;function dl(n){pe(n,"svelte-1r8vm9q",".suggest-input.svelte-1r8vm9q{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:5px 5px 5px 7px;cursor:pointer;position:relative;color:var(--text-normal);display:inline-flex;align-items:center;gap:5px}.suggest-text.svelte-1r8vm9q{display:inline-block}")}function fl(n){let e,t;return{c(){e=N("span"),t=ge(n[1])},m(r,i){Y(r,e,i),O(e,t)},p(r,i){i&2&&_e(t,r[1])},i:W,o:W,d(r){r&&z(e)}}}function hl(n){let e,t,r;function i(u){n[7](u)}let s={};return n[0]!==void 0&&(s.mdLink=n[0]),e=new Du({props:s}),ft.push(()=>eu(e,"mdLink",i)),{c(){ht(e.$$.fragment)},m(u,o){Qe(e,u,o),r=!0},p(u,o){let a={};!t&&o&1&&(t=!0,a.mdLink=u[0],Js(()=>t=!1)),e.$set(a)},i(u){r||(ve(e.$$.fragment,u),r=!0)},o(u){Me(e.$$.fragment,u),r=!1},d(u){qe(e,u)}}}function ml(n){let e,t,r,i,s,u,o,a,c,m=[hl,fl],p=[];function g(h,y){return h[2]?0:1}return r=g(n,-1),i=p[r]=m[r](n),u=new Tr({props:{iconName:"list"}}),{c(){e=N("div"),t=N("div"),i.c(),s=le(),ht(u.$$.fragment),T(t,"class","suggest-text svelte-1r8vm9q"),T(e,"class","suggest-input svelte-1r8vm9q")},m(h,y){Y(h,e,y),O(e,t),p[r].m(t,null),O(e,s),Qe(u,e,null),o=!0,a||(c=[ne(e,"click",n[3]),ne(e,"keydown",n[4])],a=!0)},p(h,[y]){let C=r;r=g(h,y),r===C?p[r].p(h,y):(_r(),Me(p[C],1,1,()=>{p[C]=null}),Sr(),i=p[r],i?i.p(h,y):(i=p[r]=m[r](h),i.c()),ve(i,1),i.m(t,null))},i(h){o||(ve(i),ve(u.$$.fragment,h),o=!0)},o(h){Me(i),Me(u.$$.fragment,h),o=!1},d(h){h&&z(e),p[r].d(),qe(u),a=!1,me(c)}}}function pl(n,e,t){let{showSuggest:r}=e,i,s,u=!1;function o(p){if(t(2,u=gu(p)),u)try{t(0,i=pu(p))}catch(g){console.warn(g)}else t(1,s=p)}function a(p){p.target instanceof HTMLAnchorElement||r()}function c(p){p.key===" "&&r()}function m(p){i=p,t(0,i)}return n.$$set=p=>{"showSuggest"in p&&t(5,r=p.showSuggest)},[i,s,u,a,c,r,o,m]}var ki=class extends te{constructor(e){super(),ce(this,e,pl,ml,ae,{showSuggest:5,updateValue:6},dl)}get updateValue(){return this.$$.ctx[6]}},yu=ki;var ds=Cn(Yo());var Zo=require("obsidian"),zr=class extends Zo.FuzzySuggestModal{constructor(t,r,i){super(t);this.options=r,this.onSelect=i}getItemText(t){return t.displayValue}getItems(){return this.options}onChooseItem(t,r){this.onSelect(t)}};var Jo=require("obsidian");var Dn=class extends U{constructor(t){super(t);if(this.value="",this.options=[],this.needsDataview()&&!(0,ds.getAPI)(this.renderChild.plugin.app))throw new Pe("dataview needs to be installed and enabled to use suggest option queries")}getValue(){return this.value}setValue(t){var r;this.value=t,(r=this.component)==null||r.updateValue(t)}isEqualValue(t){return this.value==t}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}needsDataview(){return this.renderChild.getArguments("optionQuery").length>0}async getOptions(){this.options=[];let t=this.renderChild.getArguments("option"),r=this.renderChild.getArguments("optionQuery");for(let i of t)this.options.push({value:i.value,displayValue:i.value});if(r.length>0){let i=(0,ds.getAPI)(this.renderChild.plugin.app);if(!i){new Jo.Notice("meta-bind | dataview needs to be installed and enabled to use suggest option queries");return}for(let s of r)(await i.pages(s.value,this.renderChild.filePath)).forEach(o=>{try{let a=o.file;this.options.push({value:`[[${a.path}|${a.name}]]`,displayValue:`file: ${a.name}`})}catch(a){console.warn("meta-bind | error while computing suggest options",a)}})}}async showSuggest(){await this.getOptions(),new zr(this.renderChild.plugin.app,this.options,t=>{this.setValue(t.value),this.onValueChange(t.value)}).open()}render(t){console.debug(`meta-bind | SuggestInputField >> render ${this.renderChild.uuid}`),this.container=t,this.value=this.renderChild.getInitialValue(),this.component=new yu({target:t,props:{showSuggest:()=>this.showSuggest()}}),this.component.updateValue(this.value)}destroy(){var t;(t=this.component)==null||t.$destroy()}};var Ko=require("obsidian");function Ed(n){pe(n,"svelte-1ycn1rm",".editor-input.svelte-1ycn1rm.svelte-1ycn1rm{background:var(--background-secondary);width:100%;height:500px;padding:0;position:relative;margin-left:0}.editor-input.svelte-1ycn1rm>textarea.svelte-1ycn1rm{background:var(--background-secondary);border:none;padding:var(--size-4-4) var(--size-4-8);margin:0;position:absolute;inset:0;resize:none}.editor-input.svelte-1ycn1rm>div.svelte-1ycn1rm{padding:var(--size-4-4) var(--size-4-8);position:absolute;inset:0}")}function vd(n){let e,t,r,i,s,u;return{c(){e=N("div"),t=N("textarea"),r=le(),i=N("div"),T(t,"class","svelte-1ycn1rm"),T(i,"class","svelte-1ycn1rm"),T(e,"class","editor-input card svelte-1ycn1rm")},m(o,a){Y(o,e,a),O(e,t),n[9](t),vi(t,n[0]),O(e,r),O(e,i),n[12](i),s||(u=[ne(t,"input",n[10]),ne(t,"focusout",n[11]),ne(e,"click",n[13])],s=!0)},p(o,[a]){a&1&&vi(t,o[0])},i:W,o:W,d(o){o&&z(e),n[9](null),n[12](null),s=!1,me(u)}}}function Cd(n,e,t){let{onValueChange:r}=e,{editorInput:i}=e,{value:s}=e,u,o;In(()=>{u.toggleVisibility(!0),o.toggleVisibility(!1)});function a(V){t(0,s=V),c()}function c(){t(1,u.innerHTML="",u),Ko.MarkdownRenderer.renderMarkdown(s,u,i.renderChild.filePath,i.renderChild)}function m(V){u.toggleVisibility(!0),o.toggleVisibility(!1),c()}function p(V){console.log("focus in"),u.toggleVisibility(!1),o.toggleVisibility(!0),o.focus()}function g(V){ft[V?"unshift":"push"](()=>{o=V,t(2,o)})}function h(){s=this.value,t(0,s)}let y=V=>m(V);function C(V){ft[V?"unshift":"push"](()=>{u=V,t(1,u)})}let B=V=>p(V);return n.$$set=V=>{"onValueChange"in V&&t(5,r=V.onValueChange),"editorInput"in V&&t(6,i=V.editorInput),"value"in V&&t(0,s=V.value)},n.$$.update=()=>{if(n.$$.dirty&33){e:r(s)&&c()}},[s,u,o,m,p,r,i,a,c,g,h,y,C,B]}var fs=class extends te{constructor(e){super(),ce(this,e,Cd,vd,ae,{onValueChange:5,editorInput:6,value:0,updateValue:7,render:8},Ed)}get updateValue(){return this.$$.ctx[7]}get render(){return this.$$.ctx[8]}},Qo=fs;var At=class extends U{constructor(t){super(t);this.value=""}getValue(){return this.value}setValue(t){var r;this.value=t,(r=this.component)==null||r.updateValue(t)}isEqualValue(t){return this.value==t}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}render(t){console.debug(`meta-bind | EditorInputField >> render ${this.renderChild.uuid}`),this.container=t,this.value=this.renderChild.getInitialValue(),this.component=new Qo({target:t,props:{onValueChange:this.onValueChange.bind(this),editorInput:this,value:this.value}}),this.component.render()}destroy(){var t;(t=this.component)==null||t.$destroy()}};At.allowInlineCodeBlock=!1;function xd(n){pe(n,"svelte-1f4vrw6",".image-suggest-input.svelte-1f4vrw6{background:var(--background-secondary);border-radius:var(--meta-bind-plugin-border-radius);border:var(--meta-bind-plugin-border-width) solid var(--background-modifier-border);padding:var(--size-4-2);width:100%}.image-suggest-image.svelte-1f4vrw6{width:100%}.image-suggest-footer.svelte-1f4vrw6{display:flex;flex-direction:row;color:var(--text-normal);align-items:baseline}.image-suggest-footer-text.svelte-1f4vrw6{flex:1;margin-left:var(--size-4-2)}")}function Xo(n){let e,t;return{c(){e=N("img"),T(e,"class","image-suggest-image svelte-1f4vrw6"),rn(e.src,t=Wt(n[0]))||T(e,"src",t),T(e,"alt",n[0])},m(r,i){Y(r,e,i)},p(r,i){i&1&&!rn(e.src,t=Wt(r[0]))&&T(e,"src",t),i&1&&T(e,"alt",r[0])},d(r){r&&z(e)}}}function _d(n){let e,t,r,i,s=(n[0]||"no image selected")+"",u,o,a,c,m,p=n[0]&&Xo(n);return{c(){e=N("div"),p&&p.c(),t=le(),r=N("div"),i=N("span"),u=ge(s),o=le(),a=N("button"),a.textContent="change image",T(i,"class","image-suggest-footer-text svelte-1f4vrw6"),T(a,"class","btn btn-active"),T(r,"class","image-suggest-footer svelte-1f4vrw6"),T(e,"class","image-suggest-input svelte-1f4vrw6")},m(g,h){Y(g,e,h),p&&p.m(e,null),O(e,t),O(e,r),O(r,i),O(i,u),O(r,o),O(r,a),c||(m=[ne(a,"click",n[1]),ne(a,"keydown",n[2])],c=!0)},p(g,[h]){g[0]?p?p.p(g,h):(p=Xo(g),p.c(),p.m(e,t)):p&&(p.d(1),p=null),h&1&&s!==(s=(g[0]||"no image selected")+"")&&_e(u,s)},i:W,o:W,d(g){g&&z(e),p&&p.d(),c=!1,me(m)}}}function Sd(n,e,t){let{showSuggest:r}=e,i;function s(a){t(0,i=a)}function u(a){r()}function o(a){a.key===" "&&r()}return n.$$set=a=>{"showSuggest"in a&&t(3,r=a.showSuggest)},[i,u,o,r,s]}var hs=class extends te{constructor(e){super(),ce(this,e,Sd,_d,ae,{showSuggest:3,updateValue:4},xd)}get updateValue(){return this.$$.ctx[4]}},ea=hs;var Ve=require("obsidian");var sa=require("obsidian");function Td(n){pe(n,"svelte-1cuz7a4",".image-card-image.svelte-1cuz7a4{width:100%}.image-card-text.svelte-1cuz7a4{display:block;margin:var(--size-4-2);margin-bottom:var(--size-4-4)}")}function kd(n){let e,t,r,i,s,u,o,a;return{c(){e=N("div"),t=N("img"),i=le(),s=N("span"),u=ge(n[0]),T(t,"class","image-card-image svelte-1cuz7a4"),rn(t.src,r=Wt(n[0]))||T(t,"src",r),T(t,"alt",n[0]),T(s,"class","image-card-text svelte-1cuz7a4"),T(e,"class","image-card svelte-1cuz7a4")},m(c,m){Y(c,e,m),O(e,t),O(e,i),O(e,s),O(s,u),o||(a=ne(e,"click",n[2]),o=!0)},p(c,[m]){m&1&&!rn(t.src,r=Wt(c[0]))&&T(t,"src",r),m&1&&T(t,"alt",c[0]),m&1&&_e(u,c[0])},i:W,o:W,d(c){c&&z(e),o=!1,a()}}}function Md(n,e,t){let{image:r}=e,{onSelect:i}=e,s=()=>i(r);return n.$$set=u=>{"image"in u&&t(0,r=u.image),"onSelect"in u&&t(1,i=u.onSelect)},[r,i,s]}var ms=class extends te{constructor(e){super(),ce(this,e,Md,kd,ae,{image:0,onSelect:1},Td)}},ta=ms;function Id(n){pe(n,"svelte-1f80gwc",".image-card-grid.svelte-1f80gwc{display:grid;grid-template-columns:repeat(auto-fit, minmax(min(500px, 100%), 1fr));gap:var(--size-4-4)}")}function na(n,e,t){let r=n.slice();return r[2]=e[t],r}function ra(n){let e,t;return e=new ta({props:{image:n[2],onSelect:n[1]}}),{c(){ht(e.$$.fragment)},m(r,i){Qe(e,r,i),t=!0},p(r,i){let s={};i&1&&(s.image=r[2]),i&2&&(s.onSelect=r[1]),e.$set(s)},i(r){t||(ve(e.$$.fragment,r),t=!0)},o(r){Me(e.$$.fragment,r),t=!1},d(r){qe(e,r)}}}function Od(n){let e,t,r=n[0],i=[];for(let u=0;u<r.length;u+=1)i[u]=ra(na(n,r,u));let s=u=>Me(i[u],1,1,()=>{i[u]=null});return{c(){e=N("div");for(let u=0;u<i.length;u+=1)i[u].c();T(e,"class","image-card-grid svelte-1f80gwc")},m(u,o){Y(u,e,o);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(u,[o]){if(o&3){r=u[0];let a;for(a=0;a<r.length;a+=1){let c=na(u,r,a);i[a]?(i[a].p(c,o),ve(i[a],1)):(i[a]=ra(c),i[a].c(),ve(i[a],1),i[a].m(e,null))}for(_r(),a=r.length;a<i.length;a+=1)s(a);Sr()}},i(u){if(!t){for(let o=0;o<r.length;o+=1)ve(i[o]);t=!0}},o(u){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)Me(i[o]);t=!1},d(u){u&&z(e),Cr(i,u)}}}function Ad(n,e,t){let{options:r}=e,{onSelect:i}=e;return n.$$set=s=>{"options"in s&&t(0,r=s.options),"onSelect"in s&&t(1,i=s.onSelect)},[r,i]}var ps=class extends te{constructor(e){super(),ce(this,e,Ad,Od,ae,{options:0,onSelect:1},Id)}},ia=ps;var Gr=class extends sa.Modal{constructor(t,r,i){super(t);this.options=r,this.onSelect=i}onOpen(){this.modalEl.style.width="100%",new ia({target:this.contentEl,props:{options:this.options,onSelect:t=>{this.onSelect(t),this.close()}}})}};var Bt=class extends U{constructor(t){super(t);this.value="",this.options=[]}getValue(){return this.value}setValue(t){var r;t=t!=null?t:this.getDefaultValue(),this.value=t,(r=this.component)==null||r.updateValue(t)}isEqualValue(t){return this.value==t}getDefaultValue(){return""}getHtmlElement(){if(!this.container)throw new M("");return this.container}isImageExtension(t){return["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"].contains(t)}async getOptions(){let t=this.renderChild.getArguments("optionQuery"),r=[];for(let s of t){let u=s.value;if(u.startsWith('"')&&u.endsWith('"'))u=u.substring(1,u.length-1);else{let a=new Pe("expected suggest option query for image suggester to start and end with double quotation marks");new Ve.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}let o=this.renderChild.plugin.app.vault.getAbstractFileByPath(u);if(o==null){let a=new Pe(`expected suggest option query ${u} for image suggester to exist`);new Ve.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}if(!(o instanceof Ve.TFolder)){let a=new Pe(`expected suggest option query ${s.value} for image suggester to be a folder`);new Ve.Notice(`meta-bind | ${a.message}`),console.warn(a);continue}for(let a of o.children)a instanceof Ve.TFile&&this.isImageExtension(a.extension)&&r.push(a.path)}let i=this.renderChild.getArguments("option");for(let s of i){let u=this.renderChild.plugin.app.vault.getAbstractFileByPath(s.value);if(!u){let o=new Pe(`expected suggest option ${s.value} for image suggester to exist`);new Ve.Notice(`meta-bind | ${o.message}`),console.warn(o);continue}if(!(u instanceof Ve.TFile)){let o=new Pe(`expected suggest option ${s.value} for image suggester to be a file`);new Ve.Notice(`meta-bind | ${o.message}`),console.warn(o);continue}if(!this.isImageExtension(u.extension)){let o=new Pe(`expected suggest option ${s.value} for image suggester to be an image file`);new Ve.Notice(`meta-bind | ${o.message}`),console.warn(o);continue}r.push(s.value)}this.options=r}async showSuggest(){await this.getOptions(),new Gr(this.renderChild.plugin.app,this.options,t=>{this.setValue(t),this.onValueChange(t)}).open()}render(t){console.debug(`meta-bind | SuggestInputField >> render ${this.renderChild.uuid}`),this.container=t,this.value=this.renderChild.getInitialValue(),this.component=new ea({target:t,props:{showSuggest:()=>this.showSuggest()}}),this.component.updateValue(this.value)}destroy(){var t;(t=this.component)==null||t.$destroy()}};Bt.allowInline=!1;var Yr=class{static createInputField(e,t){if(e!=="invalid"&&Yr.checkRenderChildTypeAllowed(e,t.renderChildType,t.inputFieldMarkdownRenderChild.plugin),e==="toggle")return new zt(t.inputFieldMarkdownRenderChild);if(e==="slider")return new Zt(t.inputFieldMarkdownRenderChild);if(e==="text")return new Gt(t.inputFieldMarkdownRenderChild);if(e==="text_area")return new Jt(t.inputFieldMarkdownRenderChild);if(e==="select")return new dt(t.inputFieldMarkdownRenderChild);if(e==="multi_select")return new Kt(t.inputFieldMarkdownRenderChild);if(e==="date")return new Qt(t.inputFieldMarkdownRenderChild);if(e==="time")return new Xt(t.inputFieldMarkdownRenderChild);if(e==="date_picker")return new sn(t.inputFieldMarkdownRenderChild);if(e==="number")return new un(t.inputFieldMarkdownRenderChild);if(e==="suggester")return new Dn(t.inputFieldMarkdownRenderChild);if(e==="editor")return new At(t.inputFieldMarkdownRenderChild);if(e==="imageSuggester")return new Bt(t.inputFieldMarkdownRenderChild)}static checkRenderChildTypeAllowed(e,t,r){if(r.settings.ignoreCodeBlockRestrictions)return;let i=Yr.allowCodeBlockMap[e];if(t==="block"&&!i.block)throw new j(`'${e}' is not allowed as code block`);if(t==="inline"&&!i.inline)throw new j(`'${e}' is not allowed as inline code block`)}},Gn=Yr;Gn.allowCodeBlockMap={["toggle"]:{block:zt.allowBlock,inline:zt.allowInline},["slider"]:{block:Zt.allowBlock,inline:Zt.allowInline},["text"]:{block:Gt.allowBlock,inline:Gt.allowInline},["text_area"]:{block:Jt.allowBlock,inline:Jt.allowInline},["select"]:{block:dt.allowBlock,inline:dt.allowInline},["multi_select"]:{block:Kt.allowBlock,inline:Kt.allowInline},["date"]:{block:Qt.allowBlock,inline:Qt.allowInline},["time"]:{block:Xt.allowBlock,inline:Xt.allowInline},["date_picker"]:{block:sn.allowBlock,inline:sn.allowInline},["number"]:{block:un.allowBlock,inline:un.allowInline},["suggester"]:{block:Dn.allowBlock,inline:Dn.allowInline},["editor"]:{block:At.allowBlock,inline:At.allowInline},["imageSuggester"]:{block:Bt.allowBlock,inline:Bt.allowInline}};var Zr=Cn(xn());var gs=class{constructor(){this.listeners=[]}registerListener(e){let t=e;return t.uuid=self.crypto.randomUUID(),this.listeners.push(t),t}unregisterListener(e){this.unregisterListenerById(e.uuid)}unregisterListenerById(e){this.listeners=this.listeners.filter(t=>t.uuid!==e)}notifyListeners(e){for(let t of this.listeners)t.callback(e)}},Zn=class extends gs{constructor(t){super();this.value=t}get(){return this.value}set(t){this.value=t,this.notifyListeners(t)}};var Yn=(t=>(t.INLINE="inline",t.BLOCK="block",t))(Yn||{}),Jn=class extends ua.MarkdownRenderChild{constructor(t,r,i,s,u,o){super(t);if(i.error?this.error=i.error instanceof Error?i.error.message:i.error:this.error="",this.filePath=u,this.uuid=o,this.plugin=s,this.renderChildType=r,this.fullDeclaration=i.fullDeclaration,this.inputFieldDeclaration=i,this.writeSignal=new Zn(void 0),this.readSignal=new Zn(void 0),!this.error)try{this.inputFieldDeclaration.isBound&&this.parseBindTarget(),this.inputField=Gn.createInputField(this.inputFieldDeclaration.inputFieldType,{renderChildType:r,inputFieldMarkdownRenderChild:this})}catch(a){this.error=a.message,console.warn(a)}}parseBindTarget(){if(!this.inputFieldDeclaration)throw new M("inputFieldDeclaration is undefined, can not parse bind target");let t=this.inputFieldDeclaration.bindTarget.split("#"),r,i;if(t.length===1)r=this.filePath,i=this.inputFieldDeclaration.bindTarget;else if(t.length===2)r=t[0],i=t[1];else throw new ct("bind target may only contain one '#' to specify the metadata field");try{this.bindTargetMetadataPath=(0,Zr.parsePath)(i)}catch(u){if(u instanceof Error)throw new ct(`bind target parsing error: ${u==null?void 0:u.message}`)}let s=this.plugin.getFilesByName(r);if(s.length===0)throw new ct("bind target file not found");if(s.length===1)this.bindTargetFile=s[0];else throw new ct("bind target resolves to multiple files, please also specify the file path")}registerSelfToMetadataManager(){var t,r;if(!(!((t=this.inputFieldDeclaration)!=null&&t.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((r=this.bindTargetMetadataPath)==null?void 0:r.length)===0))return this.metadataManagerReadSignalListener=this.readSignal.registerListener({callback:this.updateMetadataManager.bind(this)}),this.plugin.metadataManager.register(this.bindTargetFile,this.writeSignal,this.bindTargetMetadataPath,this.uuid)}unregisterSelfFromMetadataManager(){var t,r;!((t=this.inputFieldDeclaration)!=null&&t.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((r=this.bindTargetMetadataPath)==null?void 0:r.length)===0||(this.metadataManagerReadSignalListener&&this.readSignal.unregisterListener(this.metadataManagerReadSignalListener),this.plugin.metadataManager.unregister(this.bindTargetFile,this.uuid))}updateMetadataManager(t){var r,i;!((r=this.inputFieldDeclaration)!=null&&r.isBound)||!this.bindTargetFile||!this.bindTargetMetadataPath||((i=this.bindTargetMetadataPath)==null?void 0:i.length)===0||this.plugin.metadataManager.updatePropertyInMetadataFileCache(t,this.bindTargetMetadataPath,this.bindTargetFile,this.uuid)}getInitialValue(){var t,r,i;if(((t=this.inputFieldDeclaration)==null?void 0:t.isBound)&&this.bindTargetMetadataPath){let s=(0,Zr.traverseObjectByPath)(this.bindTargetMetadataPath,(r=this.metadataCache)==null?void 0:r.metadata);return console.debug(`meta-bind | InputFieldMarkdownRenderChild >> setting initial value to ${s} (typeof ${typeof s}) for input field ${this.uuid}`),s!=null?s:(i=this.inputField)==null?void 0:i.getDefaultValue()}}getArguments(t){if(this.inputFieldDeclaration.error)throw new M("inputFieldDeclaration has errors, can not retrieve arguments");return this.inputFieldDeclaration.argumentContainer.arguments.filter(r=>r.identifier===t)}getArgument(t){return this.getArguments(t).at(0)}addCardContainer(){return this.renderChildType==="block"&&(Re(this.getArgument("showcase"))||Re(this.getArgument("title"))||this.inputFieldDeclaration.inputFieldType==="select"||this.inputFieldDeclaration.inputFieldType==="multi_select")}hasValidBindTarget(){var t,r;return Re((t=this.inputFieldDeclaration)==null?void 0:t.isBound)&&Re(this.bindTargetFile)&&Re(this.bindTargetMetadataPath)&&((r=this.bindTargetMetadataPath)==null?void 0:r.length)!==0}async onload(){console.log("meta-bind | InputFieldMarkdownRenderChild >> load",this),this.containerEl.addClass("meta-bind-plugin-input");let t=createDiv();if(t.addClass("meta-bind-plugin-input-wrapper"),this.error){this.renderError(this.error);return}if(!this.inputField){this.renderError(new M("input field is undefined and error is empty").message);return}this.hasValidBindTarget()&&(this.metadataCache=this.registerSelfToMetadataManager()),this.plugin.registerInputFieldMarkdownRenderChild(this),this.inputField.render(t);let r=this.getArguments("class");r&&this.inputField.getHtmlElement().addClasses(r.map(u=>u.value).flat()),this.containerEl.empty();let i=this.getArgument("showcase"),s=this.getArgument("title");if(this.addCardContainer()){let u=this.containerEl.createDiv({cls:"meta-bind-plugin-card"});s&&u.createEl("h3",{text:s.value}),u.appendChild(t),i&&u.createEl("code",{text:` ${this.fullDeclaration} `})}else this.containerEl.appendChild(t)}renderError(t){if(this.containerEl.empty(),this.renderChildType==="block"){let r=this.containerEl.createDiv({cls:"meta-bind-plugin-card"});r.createEl("code",{text:` ${this.fullDeclaration} `}),r.createEl("span",{text:t,cls:"meta-bind-plugin-error"})}else this.containerEl.createEl("code",{text:` ${this.fullDeclaration}`}),this.containerEl.createEl("code",{text:`-> ${t}`,cls:"meta-bind-plugin-error"})}onunload(){var t;console.log("meta-bind | InputFieldMarkdownRenderChild >> unload",this),(t=this.inputField)==null||t.destroy(),this.plugin.unregisterInputFieldMarkdownRenderChild(this),this.unregisterSelfFromMetadataManager(),this.containerEl.empty(),this.containerEl.createEl("span",{text:"unloaded meta bind input field",cls:"meta-bind-plugin-error"}),super.onunload()}};var da=Cn(ca());var bs=Cn(xn()),Jd=da.Internal.getMetadataFromFileCache,Qr=class{constructor(e){this.updateCycleThreshold=5;this.plugin=e,this.cache=[],this.plugin.registerEvent(this.plugin.app.metadataCache.on("changed",this.updateMetadataFileCacheOnFrontmatterUpdate.bind(this))),this.interval=window.setInterval(()=>this.update(),this.plugin.settings.syncInterval)}register(e,t,r,i){let s=this.getCacheForFile(e);if(s)return console.debug(`meta-bind | MetadataManager >> registered ${i} to existing file cache ${e.path} -> ${r}`),s.listeners.push({callback:u=>t.set(u),metadataPath:r,uuid:i}),s;{console.debug(`meta-bind | MetadataManager >> registered ${i} to newly created file cache ${e.path} -> ${r}`);let u={file:e,metadata:Jd(e,this.plugin),listeners:[{callback:o=>t.set(o),metadataPath:r,uuid:i}],cyclesSinceLastUpdate:0,changed:!1};return console.log(`meta-bind | MetadataManager >> loaded metadata for file ${e.path}`,u.metadata),this.cache.push(u),u}}unregister(e,t){let r=this.getCacheForFile(e);!r||(console.debug(`meta-bind | MetadataManager >> unregistered ${t} to from file cache ${e.path}`),r.listeners=r.listeners.filter(i=>i.uuid!==t),r.listeners.length===0&&(console.debug(`meta-bind | MetadataManager >> deleted unused file cache ${e.path}`),this.cache=this.cache.filter(i=>i.file.path!==e.path)))}getCacheForFile(e){return this.cache.find(t=>t.file.path===e.path)}update(){for(let e of this.cache)e.changed&&this.updateFrontmatter(e),e.cyclesSinceLastUpdate+=1}async updateFrontmatter(e){console.debug(`meta-bind | MetadataManager >> updating frontmatter of ${e.file.path} to`,e.metadata),await this.plugin.app.fileManager.processFrontMatter(e.file,t=>{e.changed=!1,Object.assign(t,e.metadata)})}updateMetadataFileCache(e,t,r){console.debug(`meta-bind | MetadataManager >> updating metadata in ${t.path} metadata cache to`,e);let i=this.getCacheForFile(t);!i||(i.metadata=e,i.cyclesSinceLastUpdate=0,this.notifyListeners(i,void 0,r))}updatePropertyInMetadataFileCache(e,t,r,i){console.debug(`meta-bind | MetadataManager >> updating ${t} in ${r.path} metadata cache to`,e);let s=this.getCacheForFile(r);if(!s)return;let{parent:u,child:o}=Vs(t,s.metadata);if(u.value===void 0)throw Error(`The parent of "${t}" does not exist in Object, please create the parent first`);if(o.value===e){console.debug(`meta-bind | MetadataManager >> skipping redundant update of ${t} in ${r.path} metadata cache`,e);return}u.value[o.key]=e,s.cyclesSinceLastUpdate=0,s.changed=!0,this.notifyListeners(s,t,i)}updateMetadataFileCacheOnFrontmatterUpdate(e,t,r){let i=this.getCacheForFile(e);if(!i||i.cyclesSinceLastUpdate<this.updateCycleThreshold)return;let s=Object.assign({},r.frontmatter);delete s.position,console.debug(`meta-bind | MetadataManager >> updating ${e} on frontmatter update`,s),i.metadata=s,i.cyclesSinceLastUpdate=0,i.changed=!0,this.notifyListeners(i)}notifyListeners(e,t,r){let i;t&&(i=(0,bs.traverseObjectByPath)(t,e.metadata));for(let s of e.listeners)r&&r===s.uuid||(t?Ls(t,s.metadataPath)&&(console.debug(`meta-bind | MetadataManager >> notifying input field ${s.uuid} of updated metadata`),s.callback(i)):(console.debug(`meta-bind | MetadataManager >> notifying input field ${s.uuid} of updated metadata`),s.callback((0,bs.traverseObjectByPath)(s.metadataPath,e.metadata))))}};var Xr=class{constructor(e,t,r){this.api=e,this.filePath=t,this.container=r}createInputField(e,t,r){if(!this.container)throw new Error('inline API was instanced without a container, please use "createInputFieldInContainer"');return this.api.createInputField(e,t,r,this.filePath,this.container)}createInputFieldInContainer(e,t,r,i){return this.api.createInputField(e,t,r,this.filePath,i)}createInputFieldFromString(e,t,r){if(!this.container)throw new Error('inline API was instanced without a container, please use "createInputFieldFromStringInContainer"');return this.api.createInputFieldFromString(e,t,r,this.container)}createInputFieldFromStringInContainer(e,t,r,i){return this.api.createInputFieldFromString(e,t,r,i)}createDeclaration(e,t){return this.api.createDeclaration(e,t)}createDeclarationFromString(e){return this.api.createDeclarationFromString(e)}bindDeclaration(e,t,r){return this.api.bindDeclaration(e,t,r)}};var ei=class{constructor(e){this.plugin=e,this.app=e.app,this.parser=new Fr}createInlineAPI(e,t){return new Xr(this,e,t)}createInputField(e,t,r,i,s){if(!Object.values(Yn).contains(r))throw new j(`unknown render child type '${r}'`);return e=this.parser.parseDeclaration(e,void 0,t),new Jn(s,r,e,this.plugin,i,self.crypto.randomUUID())}createInputFieldFromString(e,t,r,i){let s=this.parser.parseString(e);return new Jn(i,t,s,this.plugin,r,self.crypto.randomUUID())}createDeclaration(e,t){if(this.parser.getInputFieldType(e)==="invalid")throw new j(`input field type '${e}' is invalid`);return{declaration:void 0,fullDeclaration:void 0,inputFieldType:e,argumentContainer:this.parser.parseArguments(e,t),isBound:!1,bindTarget:"",error:void 0}}createDeclarationFromString(e){return this.parser.parseString(e)}bindDeclaration(e,t,r){if(r&&!t)throw new ct("if a bind target file is specified, a bind target field must also be specified");return e.isBound=Re(t),e.bindTarget=r?r+"#"+t:t,e}};(function(n){n(window.CodeMirror)})(function(n){"use strict";n.customOverlayMode=function(e,t,r){return{startState:()=>({base:n.startState(e),overlay:n.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}),copyState:i=>({base:n.copyState(e,i.base),overlay:n.copyState(t,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}),token:(i,s)=>((i!=s.streamSeen||Math.min(s.basePos,s.overlayPos)<i.start)&&(s.streamSeen=i,s.basePos=s.overlayPos=i.start),i.start==s.basePos&&(s.baseCur=e.token(i,s.base),s.basePos=i.pos),i.start==s.overlayPos&&(i.pos=i.start,s.overlayCur=t.token(i,s.overlay),s.overlayPos=i.pos),i.pos=Math.min(s.basePos,s.overlayPos),s.overlayCur==null?s.baseCur:s.baseCur!=null&&s.overlay.combineTokens||r&&s.overlay.combineTokens==null?s.baseCur+" "+s.overlayCur:s.overlayCur),indent:e.indent&&((i,s,u)=>e.indent(i.base,s,u)),electricChars:e.electricChars,innerMode:i=>({state:i.base,mode:e}),blankLine:i=>{let s,u;return e.blankLine&&(s=e.blankLine(i.base)),t.blankLine&&(u=t.blankLine(i.overlay)),u==null?s:r&&s!=null?s+" "+u:u}}}});var ti=class extends fa.Plugin{async onload(){console.log("meta-bind | Main >> load"),await this.loadSettings(),this.api=new ei(this),q.dateFormat=this.settings.preferredDateFormat,this.api.parser.parseTemplates(this.settings.inputTemplates),fi(this.settings.firstWeekday),this.activeMarkdownInputFields=[],this.metadataManager=new Qr(this),this.registerMarkdownPostProcessor((t,r)=>{let i=t.querySelectorAll("code");for(let s=0;s<i.length;s++){let u=i.item(s),o=u.innerText;if(o.startsWith("INPUT[")&&o.endsWith("]")){let c=this.api.createInputFieldFromString(o,"inline",r.sourcePath,u);r.addChild(c)}}},100),this.registerMarkdownCodeBlockProcessor("meta-bind",(t,r,i)=>{let s=r,u=t.replace(/\n/g,"");if(u.startsWith("INPUT[")&&u.endsWith("]")){let a=this.api.createInputFieldFromString(u,"block",i.sourcePath,s);i.addChild(a)}}),this.addSettingTab(new ar(this.app,this))}async registerCodeMirrorMode(){let t=window.CodeMirror.getMode({},"javascript");if(t==null||t.name==="null"){console.log("Couldn't find js mode, can't enable syntax highlighting.");return}window.CodeMirror.defineMode("meta-bind-js",r=>({startState:()=>({...window.CodeMirror.startState(t)}),blankLine:s=>null,copyState:s=>({...window.CodeMirror.startState(t)}),token:(s,u)=>`line-HyperMD-codeblock ${t.token&&t.token(s,u)}`}))}onunload(){console.log("meta-bind | Main >> unload");for(let t of this.activeMarkdownInputFields)t.unload()}registerInputFieldMarkdownRenderChild(t){console.debug(`meta-bind | Main >> registered input field ${t.uuid}`),this.activeMarkdownInputFields.push(t)}unregisterInputFieldMarkdownRenderChild(t){console.debug(`meta-bind | Main >> unregistered input field ${t.uuid}`),this.activeMarkdownInputFields=this.activeMarkdownInputFields.filter(r=>r.uuid!==t.uuid)}getFilesByName(t){let r=Bs(t),i=r?_n(t):li(_n(t)),s=this.app.vault.getMarkdownFiles(),u=[];for(let o of s)r?_n(o.path)===i&&u.push(o):li(_n(o.name))===i&&u.push(o);return u}async loadSettings(){console.log("meta-bind | Main >> settings load"),this.settings=Object.assign({},Ke,await this.loadData())}async saveSettings(){console.log("meta-bind | Main >> settings save"),q.dateFormat=this.settings.preferredDateFormat,this.api.parser.parseTemplates(this.settings.inputTemplates),fi(this.settings.firstWeekday),await this.saveData(this.settings)}};
