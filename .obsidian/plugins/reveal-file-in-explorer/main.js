/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => revealExplorerFile
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var revealExplorerFileSettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "Reveal Explorer File" });
    const linkText = containerEl.createEl("span", {
      text: " \u{1F334}"
    });
    const linkContainer = containerEl.createEl("p", {
      text: "Repository: \u{1F334} "
    });
    linkContainer.createEl("a", {
      text: "1C0D/Obsidian-Reveal-File-in-explorer",
      href: "https://github.com/1C0D/Obsidian-Reveal-File-in-explorer"
    });
    linkContainer.appendChild(linkText);
    new import_obsidian.Setting(containerEl).setName("Fold when clicking title").setDesc(
      "When clicking title, close all folders where the file is not in"
    ).addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.foldOtherDirsBefore).onChange((value) => {
        this.plugin.settings.foldOtherDirsBefore = value;
        this.plugin.saveSettings();
        this.plugin.reveal();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reveal when opening file").setDesc("When opening a file, it will reveal it").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.revealOnOpen).onChange((value) => {
        this.plugin.settings.revealOnOpen = value;
        this.plugin.saveSettings();
        this.plugin.reveal();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Fold when opening file").setDesc("When opening a file, it will also fold other folders").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.foldWhenOpen).onChange((value) => {
        this.plugin.settings.foldWhenOpen = value;
        this.plugin.saveSettings();
        this.plugin.reveal();
      });
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  foldOtherDirsBefore: true,
  revealOnOpen: false,
  foldWhenOpen: false
};
var revealExplorerFile = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.reveal = () => {
      const { workspace } = this.app;
      const containerEl = workspace.containerEl.win;
      this.registerDomEvent(containerEl, "click", this.clickHandler);
      workspace.on("file-open", async () => {
        if (this.settings.revealOnOpen) {
          if (!this.is_file_explorer_open())
            return;
          const activeView = workspace.getActiveViewOfType(import_obsidian2.View);
          if (this.settings.foldWhenOpen)
            await this.fold();
          await this.app.commands.executeCommandById(
            "file-explorer:reveal-active-file"
          );
          setTimeout(async () => {
            this.app.commands.executeCommandById(
              "file-explorer:reveal-active-file"
            );
            setTimeout(async () => {
              this.app.workspace.setActiveLeaf(activeView.leaf, {
                focus: true
              });
            }, 50);
          }, 50);
        }
      });
    };
    this.clickHandler = async (evt) => {
      var _a, _b;
      if ((_a = evt.target) == null ? void 0 : _a.classList.contains("view-header-title")) {
        const { workspace } = this.app;
        const activeView = workspace.getActiveViewOfType(import_obsidian2.View);
        const isNewTab = (activeView == null ? void 0 : activeView.getDisplayText()) === "New tab";
        if (isNewTab)
          return;
        if (this.settings.foldOtherDirsBefore) {
          await this.fold();
        }
        await this.app.commands.executeCommandById(
          "file-explorer:reveal-active-file"
        );
        await this.app.commands.executeCommandById("editor:focus");
        const titleContainerEl = (_b = activeView == null ? void 0 : activeView.containerEl) == null ? void 0 : _b.querySelector(".view-header-title");
        setTimeout(() => {
          titleContainerEl == null ? void 0 : titleContainerEl.focus();
        }, 50);
      }
    };
    this.fold = async () => {
      var _a;
      const { workspace } = this.app;
      const fileExplorer = (_a = workspace.getLeavesOfType("file-explorer")) == null ? void 0 : _a.first();
      if (!fileExplorer) {
        return;
      }
      const activeView = workspace.getActiveViewOfType(import_obsidian2.View);
      if ((activeView == null ? void 0 : activeView.getDisplayText()) === "New tab")
        return;
      function isFolder(file) {
        return file instanceof import_obsidian2.TFolder;
      }
      const files = Object.entries(fileExplorer.view.fileItems);
      for (const [path, fileItem] of files) {
        if (path === "/")
          continue;
        const isFold = isFolder(fileItem.file);
        if (isFold) {
          await fileItem.setCollapsed(true);
        }
      }
    };
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new revealExplorerFileSettingsTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      this.reveal();
    });
  }
  //seeking for <div class="workspace-tab-header is-active" draggable="true" aria-label="Files" aria-label-delay="300" data-type="file-explorer">
  // so elts <div> with attr data-type = "file-explorer" and with a class "is-active".
  // isFileExplorerActive(): boolean {
  // 	const el = document.querySelector(
  // 		'div[data-type="file-explorer"].is-active'
  // 	);
  // 	return el !== null;
  // }
  //better https://github.com/shichongrui/obsidian-reveal-active-file/blob/master/main.ts
  is_file_explorer_open() {
    const workspace = this.app.workspace;
    let is_open = false;
    workspace.iterateAllLeaves((leaf) => {
      if (leaf.getViewState().type == "file-explorer" && leaf.width > 0) {
        is_open = true;
      }
    });
    return is_open;
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlLCBURm9sZGVyLCBWaWV3IH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IHJldmVhbEV4cGxvcmVyRmlsZVNldHRpbmdzVGFiIH0gZnJvbSBcIi4vc2V0dGluZ3NcIjtcclxuXHJcbmludGVyZmFjZSByZXZlYWxFeHBsb3JlckZpbGVTZXR0aW5ncyB7XHJcblx0Zm9sZE90aGVyRGlyc0JlZm9yZTogYm9vbGVhbjtcclxuXHRyZXZlYWxPbk9wZW46IGJvb2xlYW47XHJcblx0Zm9sZFdoZW5PcGVuOiBib29sZWFuO1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiByZXZlYWxFeHBsb3JlckZpbGVTZXR0aW5ncyA9IHtcclxuXHRmb2xkT3RoZXJEaXJzQmVmb3JlOiB0cnVlLFxyXG5cdHJldmVhbE9uT3BlbjogZmFsc2UsXHJcblx0Zm9sZFdoZW5PcGVuOiBmYWxzZSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHJldmVhbEV4cGxvcmVyRmlsZSBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IHJldmVhbEV4cGxvcmVyRmlsZVNldHRpbmdzO1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyByZXZlYWxFeHBsb3JlckZpbGVTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG5cdFx0XHR0aGlzLnJldmVhbCgpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHRyZXZlYWwgPSAoKSA9PiB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblx0XHRjb25zdCBjb250YWluZXJFbCA9IHdvcmtzcGFjZS5jb250YWluZXJFbC53aW47IC8vd2luIHRvIHdvcmsgb24gbXVsdGkgd2luZG93c1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGNvbnRhaW5lckVsLCBcImNsaWNrXCIsIHRoaXMuY2xpY2tIYW5kbGVyKTtcclxuXHRcdHdvcmtzcGFjZS5vbihcImZpbGUtb3BlblwiLCBhc3luYyAoKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLnNldHRpbmdzLnJldmVhbE9uT3Blbikge1xyXG5cdFx0XHRcdGlmICghdGhpcy5pc19maWxlX2V4cGxvcmVyX29wZW4oKSkgcmV0dXJuO1xyXG5cdFx0XHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB3b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShWaWV3KTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZm9sZFdoZW5PcGVuKSBhd2FpdCB0aGlzLmZvbGQoKTtcclxuXHRcdFx0XHRhd2FpdCAodGhpcy5hcHAgYXMgYW55KS5jb21tYW5kcy5leGVjdXRlQ29tbWFuZEJ5SWQoXHJcblx0XHRcdFx0XHRcImZpbGUtZXhwbG9yZXI6cmV2ZWFsLWFjdGl2ZS1maWxlXCJcclxuXHRcdFx0XHQpO1xyXG5cdFx0XHRcdC8vIGFwcGFyZW50bHkgdGhlIHJldmVhbCBmYWlscyBzb21ldGltZVxyXG5cdFx0XHRcdHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG5cdFx0XHRcdFx0KHRoaXMuYXBwIGFzIGFueSkuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKFxyXG5cdFx0XHRcdFx0XHRcImZpbGUtZXhwbG9yZXI6cmV2ZWFsLWFjdGl2ZS1maWxlXCJcclxuXHRcdFx0XHRcdCk7XHJcblxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKGFjdGl2ZVZpZXchLmxlYWYsIHtcclxuXHRcdFx0XHRcdFx0XHRmb2N1czogdHJ1ZSxcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9LCA1MCk7XHJcblx0XHRcdFx0fSwgNTApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHRjbGlja0hhbmRsZXIgPSBhc3luYyAoZXZ0OiBhbnkpID0+IHtcclxuXHRcdGlmIChldnQudGFyZ2V0Py5jbGFzc0xpc3QuY29udGFpbnMoXCJ2aWV3LWhlYWRlci10aXRsZVwiKSkge1xyXG5cdFx0XHQvLyBkb24ndCB0cmlnZ2VyIG9uIE5ldyB0YWJcclxuXHRcdFx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IHRoaXMuYXBwO1xyXG5cdFx0XHRjb25zdCBhY3RpdmVWaWV3ID0gd29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoVmlldyk7XHJcblx0XHRcdGNvbnN0IGlzTmV3VGFiID0gYWN0aXZlVmlldz8uZ2V0RGlzcGxheVRleHQoKSA9PT0gXCJOZXcgdGFiXCI7XHJcblx0XHRcdGlmIChpc05ld1RhYikgcmV0dXJuO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuZm9sZE90aGVyRGlyc0JlZm9yZSkge1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuZm9sZCgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGF3YWl0ICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcclxuXHRcdFx0XHRcImZpbGUtZXhwbG9yZXI6cmV2ZWFsLWFjdGl2ZS1maWxlXCJcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGF3YWl0ICh0aGlzLmFwcCBhcyBhbnkpLmNvbW1hbmRzLmV4ZWN1dGVDb21tYW5kQnlJZChcImVkaXRvcjpmb2N1c1wiKTtcclxuXHJcblx0XHRcdGNvbnN0IHRpdGxlQ29udGFpbmVyRWwgPVxyXG5cdFx0XHRcdGFjdGl2ZVZpZXc/LmNvbnRhaW5lckVsPy5xdWVyeVNlbGVjdG9yKFwiLnZpZXctaGVhZGVyLXRpdGxlXCIpO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0KHRpdGxlQ29udGFpbmVyRWwgYXMgYW55KT8uZm9jdXMoKTtcclxuXHRcdFx0fSwgNTApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGZvbGQgPSBhc3luYyAoKSA9PiB7XHJcblx0XHRjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XHJcblx0XHRjb25zdCBmaWxlRXhwbG9yZXIgPSB3b3Jrc3BhY2VcclxuXHRcdFx0LmdldExlYXZlc09mVHlwZShcImZpbGUtZXhwbG9yZXJcIilcclxuXHRcdFx0Py5maXJzdCgpO1xyXG5cdFx0aWYgKCFmaWxlRXhwbG9yZXIpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgYWN0aXZlVmlldyA9IHdvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKFZpZXcpO1xyXG5cdFx0aWYgKGFjdGl2ZVZpZXc/LmdldERpc3BsYXlUZXh0KCkgPT09IFwiTmV3IHRhYlwiKSByZXR1cm47XHJcblxyXG5cdFx0ZnVuY3Rpb24gaXNGb2xkZXIoZmlsZTogVEZpbGUgfCBURm9sZGVyKTogZmlsZSBpcyBURm9sZGVyIHtcclxuXHRcdFx0cmV0dXJuIGZpbGUgaW5zdGFuY2VvZiBURm9sZGVyO1xyXG5cdFx0fVxyXG5cdFx0Y29uc3QgZmlsZXMgPSBPYmplY3QuZW50cmllcygoZmlsZUV4cGxvcmVyLnZpZXcgYXMgYW55KS5maWxlSXRlbXMpO1xyXG5cdFx0Zm9yIChjb25zdCBbcGF0aCwgZmlsZUl0ZW1dIG9mIGZpbGVzKSB7XHJcblx0XHRcdGlmIChwYXRoID09PSBcIi9cIikgY29udGludWU7IC8vIGRvbid0IGNvbGxhcHNlIHJvb3RcclxuXHRcdFx0Ly8gQ29sbGFwc2UgZm9sZGVyXHJcblx0XHRcdGNvbnN0IGlzRm9sZCA9IGlzRm9sZGVyKChmaWxlSXRlbSBhcyBhbnkpLmZpbGUpO1xyXG5cdFx0XHRpZiAoaXNGb2xkKSB7XHJcblx0XHRcdFx0YXdhaXQgKGZpbGVJdGVtIGFzIGFueSkuc2V0Q29sbGFwc2VkKHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly9zZWVraW5nIGZvciA8ZGl2IGNsYXNzPVwid29ya3NwYWNlLXRhYi1oZWFkZXIgaXMtYWN0aXZlXCIgZHJhZ2dhYmxlPVwidHJ1ZVwiIGFyaWEtbGFiZWw9XCJGaWxlc1wiIGFyaWEtbGFiZWwtZGVsYXk9XCIzMDBcIiBkYXRhLXR5cGU9XCJmaWxlLWV4cGxvcmVyXCI+XHJcblx0Ly8gc28gZWx0cyA8ZGl2PiB3aXRoIGF0dHIgZGF0YS10eXBlID0gXCJmaWxlLWV4cGxvcmVyXCIgYW5kIHdpdGggYSBjbGFzcyBcImlzLWFjdGl2ZVwiLlxyXG5cdC8vIGlzRmlsZUV4cGxvcmVyQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG5cdC8vIFx0Y29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdC8vIFx0XHQnZGl2W2RhdGEtdHlwZT1cImZpbGUtZXhwbG9yZXJcIl0uaXMtYWN0aXZlJ1xyXG5cdC8vIFx0KTtcclxuXHQvLyBcdHJldHVybiBlbCAhPT0gbnVsbDtcclxuXHQvLyB9XHJcblxyXG5cdC8vYmV0dGVyIGh0dHBzOi8vZ2l0aHViLmNvbS9zaGljaG9uZ3J1aS9vYnNpZGlhbi1yZXZlYWwtYWN0aXZlLWZpbGUvYmxvYi9tYXN0ZXIvbWFpbi50c1xyXG5cdGlzX2ZpbGVfZXhwbG9yZXJfb3BlbigpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuYXBwLndvcmtzcGFjZTtcclxuXHRcdGxldCBpc19vcGVuID0gZmFsc2U7XHJcblx0XHR3b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRpZiAoXHJcblx0XHRcdFx0bGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlID09IFwiZmlsZS1leHBsb3JlclwiICYmXHJcblx0XHRcdFx0KGxlYWYgYXMgYW55KS53aWR0aCA+IDBcclxuXHRcdFx0KSB7XHJcblx0XHRcdFx0aXNfb3BlbiA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIGlzX29wZW47XHJcblx0fVxyXG5cclxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbihcclxuXHRcdFx0e30sXHJcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXHJcblx0XHRcdGF3YWl0IHRoaXMubG9hZERhdGEoKVxyXG5cdFx0KTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcblx0fVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHJldmVhbEV4cGxvcmVyRmlsZSBmcm9tIFwic3JjL21haW5cIjtcclxuaW1wb3J0IER1cGxpY2F0ZVRhYnMgZnJvbSBcInNyYy9tYWluXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgcmV2ZWFsRXhwbG9yZXJGaWxlU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IHJldmVhbEV4cGxvcmVyRmlsZTtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogRHVwbGljYXRlVGFicykge1xyXG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xyXG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcblx0fVxyXG5cclxuXHRkaXNwbGF5KCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcclxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJSZXZlYWwgRXhwbG9yZXIgRmlsZVwiIH0pO1xyXG5cdFx0Y29uc3QgbGlua1RleHQgPSBjb250YWluZXJFbC5jcmVhdGVFbChcInNwYW5cIiwge1xyXG5cdFx0XHR0ZXh0OiBcIiBcdUQ4M0NcdURGMzRcIixcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgbGlua0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcblx0XHRcdHRleHQ6IFwiUmVwb3NpdG9yeTogXHVEODNDXHVERjM0IFwiLFxyXG5cdFx0fSk7XHJcblx0XHRsaW5rQ29udGFpbmVyLmNyZWF0ZUVsKFwiYVwiLCB7XHJcblx0XHRcdHRleHQ6IFwiMUMwRC9PYnNpZGlhbi1SZXZlYWwtRmlsZS1pbi1leHBsb3JlclwiLFxyXG5cdFx0XHRocmVmOiBcImh0dHBzOi8vZ2l0aHViLmNvbS8xQzBEL09ic2lkaWFuLVJldmVhbC1GaWxlLWluLWV4cGxvcmVyXCIsXHJcblx0XHR9KTtcclxuXHRcdGxpbmtDb250YWluZXIuYXBwZW5kQ2hpbGQobGlua1RleHQpO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0XHQuc2V0TmFtZShcIkZvbGQgd2hlbiBjbGlja2luZyB0aXRsZVwiKVxyXG5cdFx0XHQuc2V0RGVzYyhcclxuXHRcdFx0XHRcIldoZW4gY2xpY2tpbmcgdGl0bGUsIGNsb3NlIGFsbCBmb2xkZXJzIHdoZXJlIHRoZSBmaWxlIGlzIG5vdCBpblwiXHJcblx0XHRcdClcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYSB0b2dnbGUgZm9yIHRoZSBzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZE90aGVyRGlyc0JlZm9yZSlcclxuXHRcdFx0XHRcdC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBwbHVnaW4gc2V0dGluZyB3aGVuIHRoZSB0b2dnbGUgaXMgY2hhbmdlZFxyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkT3RoZXJEaXJzQmVmb3JlID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZXZlYWwoKTtcclxuXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHRcdC5zZXROYW1lKFwiUmV2ZWFsIHdoZW4gb3BlbmluZyBmaWxlXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiV2hlbiBvcGVuaW5nIGEgZmlsZSwgaXQgd2lsbCByZXZlYWwgaXRcIilcclxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcblx0XHRcdFx0dG9nZ2xlXHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYSB0b2dnbGUgZm9yIHRoZSBzZXR0aW5nXHJcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZWFsT25PcGVuKVxyXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xyXG5cdFx0XHRcdFx0XHQvLyBVcGRhdGUgdGhlIHBsdWdpbiBzZXR0aW5nIHdoZW4gdGhlIHRvZ2dsZSBpcyBjaGFuZ2VkXHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJldmVhbE9uT3BlbiA9IHZhbHVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4ucmV2ZWFsKCk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdFx0LnNldE5hbWUoXCJGb2xkIHdoZW4gb3BlbmluZyBmaWxlXCIpXHJcblx0XHRcdC5zZXREZXNjKFwiV2hlbiBvcGVuaW5nIGEgZmlsZSwgaXQgd2lsbCBhbHNvIGZvbGQgb3RoZXIgZm9sZGVyc1wiKVxyXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuXHRcdFx0XHR0b2dnbGVcclxuXHRcdFx0XHRcdC8vIENyZWF0ZSBhIHRvZ2dsZSBmb3IgdGhlIHNldHRpbmdcclxuXHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5mb2xkV2hlbk9wZW4pXHJcblx0XHRcdFx0XHQub25DaGFuZ2UoKHZhbHVlKSA9PiB7XHJcblx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgcGx1Z2luIHNldHRpbmcgd2hlbiB0aGUgdG9nZ2xlIGlzIGNoYW5nZWRcclxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZm9sZFdoZW5PcGVuID0gdmFsdWU7XHJcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5yZXZlYWwoKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHR9KTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUE2Qzs7O0FDQTdDLHNCQUErQztBQUl4QyxJQUFNLGdDQUFOLGNBQTRDLGlDQUFpQjtBQUFBLEVBR25FLFlBQVksS0FBVSxRQUF1QjtBQUM1QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBRSxZQUFZLElBQUk7QUFDeEIsZ0JBQVksTUFBTTtBQUNsQixnQkFBWSxTQUFTLE1BQU0sRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQzNELFVBQU0sV0FBVyxZQUFZLFNBQVMsUUFBUTtBQUFBLE1BQzdDLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxVQUFNLGdCQUFnQixZQUFZLFNBQVMsS0FBSztBQUFBLE1BQy9DLE1BQU07QUFBQSxJQUNQLENBQUM7QUFDRCxrQkFBYyxTQUFTLEtBQUs7QUFBQSxNQUMzQixN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WixtQkFBeUIsY0FBYztBQUV4QyxtQkFBVyxNQUFNO0FBQ2hCLFVBQUMscURBQTBCO0FBQUEsUUFDNUIsR0FBRyxFQUFFO0FBQUEsTUFDTjtBQUFBLElBQ0Q7QUFFQSxnQkFBTyxZQUFZO0FBakZwQjtBQWtGRSxZQUFNLEVBQUUsVUFBVSxJQUFJLEtBQUs7QUFDM0IsWUFBTSxnQkFBZSxlQUNuQixnQkFBZ0IsZUFBZSxNQURaLG1CQUVsQjtBQUNILFVBQUksQ0FBQyxjQUFjO0FBQ2xCO0FBQUEsTUFDRDtBQUNBLFlBQU0sYUFBYSxVQUFVLG9CQUFvQixxQkFBSTtBQUNyRCxXQUFJLHlDQUFZLHNCQUFxQjtBQUFXO0FBRWhELGVBQVMsU0FBUyxNQUF3QztBQUN6RCxlQUFPLGdCQUFnQjtBQUFBLE1BQ3hCO0FBQ0EsWUFBTSxRQUFRLE9BQU8sUUFBUyxhQUFhLEtBQWEsU0FBUztBQUNqRSxpQkFBVyxDQUFDLE1BQU0sUUFBUSxLQUFLLE9BQU87QUFDckMsWUFBSSxTQUFTO0FBQUs7QUFFbEIsY0FBTSxTQUFTLFNBQVUsU0FBaUIsSUFBSTtBQUM5QyxZQUFJLFFBQVE7QUFDWCxnQkFBTyxTQUFpQixhQUFhLElBQUk7QUFBQSxRQUMxQztBQUFBLE1BQ0Q7QUFBQSxJQUNEO0FBQUE7QUFBQSxFQXRGQSxNQUFNLFNBQVM7QUFDZCxVQUFNLEtBQUssYUFBYTtBQUN4QixTQUFLLGNBQWMsSUFBSSw4QkFBOEIsS0FBSyxLQUFLLElBQUksQ0FBQztBQUNwRSxTQUFLLElBQUksVUFBVSxjQUFjLE1BQU07QUFDdEMsV0FBSyxPQUFPO0FBQUEsSUFDYixDQUFDO0FBQUEsRUFDRjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBNEZBLHdCQUFpQztBQUNoQyxVQUFNLFlBQVksS0FBSyxJQUFJO0FBQzNCLFFBQUksVUFBVTtBQUNkLGNBQVUsaUJBQWlCLENBQUMsU0FBUztBQUNwQyxVQUNDLEtBQUssYUFBYSxFQUFFLFFBQVEsbUJBQzNCLEtBQWEsUUFBUSxHQUNyQjtBQUNELGtCQUFVO0FBQUEsTUFDWDtBQUFBLElBQ0QsQ0FBQztBQUNELFdBQU87QUFBQSxFQUNSO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxXQUFXLE9BQU87QUFBQSxNQUN0QixDQUFDO0FBQUEsTUFDRDtBQUFBLE1BQ0EsTUFBTSxLQUFLLFNBQVM7QUFBQSxJQUNyQjtBQUFBLEVBQ0Q7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iXQp9Cg==
